<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦¥éˆç§˜ç¢¼ Hour Light v8.1 - ç”Ÿå‘½æ•¸å­—è§£ç¢¼ç³»çµ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #D4AF37;
            --gold-light: #F5E6A3;
            --cream: #FDF8E8;
            --brown: #4A3728;
            --night-bg: #1A1A2E;
            --night-card: #16213E;
            --purple: #9F5FDB;
        }
        
        body { font-family: 'Noto Sans TC', sans-serif; }
        .serif { font-family: 'Noto Serif TC', serif; }
        
        body.day-mode {
            background: linear-gradient(135deg, #FDF8E8 0%, #F5E6A3 50%, #FDF8E8 100%);
            color: #4A3728;
        }
        
        body.night-mode {
            background: linear-gradient(135deg, #1A1A2E 0%, #16213E 50%, #0F0F23 100%);
            color: #E0D4FC;
        }
        
        .gold-text { color: var(--gold); }
        .night-mode .gold-text { color: #FFD700; text-shadow: 0 0 15px rgba(255,215,0,0.3); }

        .gold-btn {
            background: linear-gradient(135deg, #D4AF37 0%, #F5E6A3 50%, #D4AF37 100%);
            color: #2D1B0E;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            transition: all 0.3s;
        }
        .gold-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4); }
        .night-mode .gold-btn {
            background: linear-gradient(135deg, #6B2C91 0%, #9F5FDB 50%, #6B2C91 100%);
            color: #fff;
        }

        .card {
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            transition: all 0.3s;
        }
        .day-mode .card {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 4px 20px rgba(139, 115, 85, 0.1);
        }
        .night-mode .card {
            background: rgba(22, 33, 62, 0.9);
            border: 1px solid rgba(159, 95, 219, 0.3);
        }

        .tab-btn { transition: all 0.3s; border-bottom: 3px solid transparent; }
        .tab-btn.active { border-bottom-color: var(--gold); }
        .night-mode .tab-btn.active { border-bottom-color: var(--purple); }

        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(8px);
            display: flex; align-items: center; justify-content: center;
            z-index: 100;
        }
        .modal-content { max-height: 90vh; overflow-y: auto; }

        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12'%3E%3Cpath fill='%23D4AF37' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            appearance: none;
        }

        .score-bar { height: 8px; border-radius: 4px; overflow: hidden; }
        .score-fill { height: 100%; transition: width 0.8s ease-out; }

        .master-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            animation: glow 2s ease-in-out infinite alternate;
        }
        .day-mode .master-badge { background: linear-gradient(135deg, #D4AF37, #F5E6A3); color: #4A3728; }
        .night-mode .master-badge { background: linear-gradient(135deg, #9F5FDB, #E066FF); color: #1A1A2E; }
        
        @keyframes glow {
            from { box-shadow: 0 0 5px rgba(212, 175, 55, 0.5); }
            to { box-shadow: 0 0 15px rgba(212, 175, 55, 0.8); }
        }

        .detail-panel {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .detail-panel.open {
            max-height: 2000px;
        }

        /* äº”è¡Œèƒ½é‡æ¢æ¨£å¼ */
        .element-bar {
            height: 24px;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }
        .element-fill {
            height: 100%;
            transition: width 0.8s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        .element-wood { background: linear-gradient(90deg, #2D5016, #4A7C23); }
        .element-fire { background: linear-gradient(90deg, #C41E3A, #FF6B6B); }
        .element-earth { background: linear-gradient(90deg, #8B6914, #D4A017); }
        .element-metal { background: linear-gradient(90deg, #71797E, #C0C0C0); }
        .element-water { background: linear-gradient(90deg, #1E3A5F, #4A90D9); }

        /* CTA é–ƒçˆæ•ˆæœ */
        .cta-pulse {
            animation: ctaPulse 2s ease-in-out infinite;
        }
        @keyframes ctaPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(212, 175, 55, 0); }
        }
        .night-mode .cta-pulse {
            animation: ctaPulseNight 2s ease-in-out infinite;
        }
        @keyframes ctaPulseNight {
            0%, 100% { box-shadow: 0 0 0 0 rgba(159, 95, 219, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(159, 95, 219, 0); }
        }

        /* é–ä½å…§å®¹æ¨£å¼ */
        .locked-content {
            position: relative;
            overflow: hidden;
        }
        .locked-content::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: linear-gradient(transparent, rgba(255,255,255,0.95));
            pointer-events: none;
        }
        .night-mode .locked-content::after {
            background: linear-gradient(transparent, rgba(22,33,62,0.95));
        }

        @media (max-width: 768px) {
            .tab-btn { font-size: 0.75rem; padding: 0.5rem; }
        }
    </style>
</head>
<body class="day-mode">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        /* ============================================
           â­ æ™‚è¾°å°ç…§è¡¨ï¼ˆæ­£ç¢ºç‰ˆï¼šç›´æ¥å°æ‡‰12å®®ä½ï¼‰
           ============================================ */

        const HOURS = [
            { id: 'zi', name: 'å­æ™‚ (23:00-01:00)', num: 1, palace: 1, meridian: 'è†½ç¶“' },
            { id: 'chou', name: 'ä¸‘æ™‚ (01:00-03:00)', num: 2, palace: 2, meridian: 'è‚ç¶“' },
            { id: 'yin', name: 'å¯…æ™‚ (03:00-05:00)', num: 3, palace: 3, meridian: 'è‚ºç¶“' },
            { id: 'mao', name: 'å¯æ™‚ (05:00-07:00)', num: 4, palace: 4, meridian: 'å¤§è…¸ç¶“' },
            { id: 'chen', name: 'è¾°æ™‚ (07:00-09:00)', num: 5, palace: 5, meridian: 'èƒƒç¶“' },
            { id: 'si', name: 'å·³æ™‚ (09:00-11:00)', num: 6, palace: 6, meridian: 'è„¾ç¶“' },
            { id: 'wu', name: 'åˆæ™‚ (11:00-13:00)', num: 7, palace: 7, meridian: 'å¿ƒç¶“' },
            { id: 'wei', name: 'æœªæ™‚ (13:00-15:00)', num: 8, palace: 8, meridian: 'å°è…¸ç¶“' },
            { id: 'shen', name: 'ç”³æ™‚ (15:00-17:00)', num: 9, palace: 9, meridian: 'è†€èƒ±ç¶“' },
            { id: 'you', name: 'é…‰æ™‚ (17:00-19:00)', num: 10, palace: 10, meridian: 'è…ç¶“' },
            { id: 'xu', name: 'æˆŒæ™‚ (19:00-21:00)', num: 11, palace: 11, meridian: 'å¿ƒåŒ…ç¶“' },
            { id: 'hai', name: 'äº¥æ™‚ (21:00-23:00)', num: 12, palace: 12, meridian: 'ä¸‰ç„¦ç¶“' },
            { id: 'unknown', name: 'æ™‚è¾°ä¸è©³', num: 0, palace: 0, meridian: '' }
        ];
        
        const getHourData = (hourId) => HOURS.find(h => h.id === hourId) || HOURS[12];

        /* ============================================
           â­ äº”è¡Œå°ç…§è¡¨
           ============================================ */
        const ELEMENT_DATA = {
            1: { name: 'å°æœ¨', icon: 'ğŸŒ±', element: 'wood', trait: 'èŒèŠ½ãƒ»å‘ä¸Š' },
            2: { name: 'å°æ°´', icon: 'ğŸ’§', element: 'water', trait: 'æµå‹•ãƒ»æ»‹æ½¤' },
            3: { name: 'å°ç«', icon: 'ğŸ”¥', element: 'fire', trait: 'é»ç‡ƒãƒ»é–ƒè€€' },
            4: { name: 'å°é‡‘', icon: 'âšœï¸', element: 'metal', trait: 'å‡èšãƒ»å …å›º' },
            5: { name: 'ä¸­å¤®åœŸ', icon: 'ğŸŒ', element: 'earth', trait: 'è½‰åŒ–ãƒ»åŒ…å®¹' },
            6: { name: 'å¤§é‡‘', icon: 'âšœï¸', element: 'metal', trait: 'æˆç†Ÿãƒ»æ”¶æ–‚' },
            7: { name: 'å¤§æ°´', icon: 'ğŸŒŠ', element: 'water', trait: 'æ·±æ²‰ãƒ»æ™ºæ…§' },
            8: { name: 'å¤§ç«', icon: 'ğŸ”¥', element: 'fire', trait: 'æ¬Šå¨ãƒ»åŠ›é‡' },
            9: { name: 'å¤§æœ¨', icon: 'ğŸŒ³', element: 'wood', trait: 'èŒ‚ç››ãƒ»åº‡è­·' },
            11: { name: 'é›™æ°´', icon: 'ğŸ’§ğŸ’§', element: 'water', trait: 'éˆæ³‰ãƒ»ç›´è¦º', count: 2 },
            22: { name: 'é›™åœŸ', icon: 'ğŸŒğŸŒ', element: 'earth', trait: 'ç£çŸ³ãƒ»å»ºé€ ', count: 2 },
            33: { name: 'é›™ç«', icon: 'ğŸ”¥ğŸ”¥', element: 'fire', trait: 'è–ç„°ãƒ»ç™‚ç™’', count: 2 }
        };

        const ELEMENT_COLORS = {
            wood: { bg: 'bg-green-100', text: 'text-green-700', bar: 'element-wood', label: 'æœ¨' },
            fire: { bg: 'bg-red-100', text: 'text-red-700', bar: 'element-fire', label: 'ç«' },
            earth: { bg: 'bg-yellow-100', text: 'text-yellow-700', bar: 'element-earth', label: 'åœŸ' },
            metal: { bg: 'bg-gray-100', text: 'text-gray-700', bar: 'element-metal', label: 'é‡‘' },
            water: { bg: 'bg-blue-100', text: 'text-blue-700', bar: 'element-water', label: 'æ°´' }
        };

        /* ============================================
           â­ å¿ƒç†å­¸å°ç…§è¡¨ï¼ˆç°¡åŒ–ç‰ˆï¼ŒéŠ·å”®æ¼æ–—ç”¨ï¼‰
           ============================================ */
        const PSYCHOLOGY_DATA = {
            1: { defense: 'å¦èª', pattern: 'ã€Œæˆ‘ä¸éœ€è¦åˆ¥äººã€', shadow: 'å®³æ€•è»Ÿå¼±', unlock: 'å­¸æœƒæ±‚åŠ©' },
            2: { defense: 'é€€åŒ–', pattern: 'é‡å£“åŠ›æ™‚è®Šå¾—ä¾è³´', shadow: 'å®³æ€•è¢«æ‹‹æ£„', unlock: 'å»ºç«‹è‡ªæˆ‘' },
            3: { defense: 'è½‰ç§»', pattern: 'æŠŠæƒ…ç·’è½‰åˆ°å…¶ä»–äº‹ä¸Š', shadow: 'å®³æ€•ä¸å¤ ç‰¹åˆ¥', unlock: 'é¢å°æ·±å±¤æ„Ÿå—' },
            4: { defense: 'ç†æ™ºåŒ–', pattern: 'ç”¨é‚è¼¯é€ƒé¿æ„Ÿå—', shadow: 'å®³æ€•å¤±æ§', unlock: 'æ¥ç´æƒ…ç·’' },
            5: { defense: 'é€ƒé¿', pattern: 'ç›´æ¥é›¢é–‹ä¸èˆ’æœçš„æƒ…å¢ƒ', shadow: 'å®³æ€•è¢«æŸç¸›', unlock: 'ç·´ç¿’åœç•™' },
            6: { defense: 'åå‘å½¢æˆ', pattern: 'éåº¦ä»˜å‡ºä¾†æ©é£¾éœ€è¦è¢«æ„›', shadow: 'å®³æ€•ä¸è¢«éœ€è¦', unlock: 'æ¥å—å¹«åŠ©' },
            7: { defense: 'éš”é›¢', pattern: 'åˆ‡æ–·æƒ…ç·’ï¼Œåªç•™æ€è€ƒ', shadow: 'å®³æ€•è¢«çœ‹ç©¿', unlock: 'ä¿¡ä»»ä»–äºº' },
            8: { defense: 'æŠ•å°„', pattern: 'æŠŠæ§åˆ¶æ¬²æŠ•å°„åˆ°åˆ¥äººèº«ä¸Š', shadow: 'å®³æ€•å¤±å»æ¬ŠåŠ›', unlock: 'æ”¾ä¸‹æŒæ§' },
            9: { defense: 'å£“æŠ‘', pattern: 'æŠŠéœ€æ±‚è—èµ·ä¾†ï¼Œå‡è£æ²’äº‹', shadow: 'å®³æ€•ä¸å¤ å®Œç¾', unlock: 'è¡¨é”çœŸå¯¦éœ€æ±‚' }
        };

        /* ============================================
           â­ å®Œæ•´æ•¸å­—è³‡æ–™åº«ï¼ˆé¦¥éˆç§˜ç¢¼å…­ç¶­åº¦è§£è®€ï¼‰
           ============================================ */

        const NUMBER_DATA = {
            1: { 
                title: 'é ˜èˆªè€…', 
                essence: 'ç¨ç«‹ã€é–‹å‰µã€é ˜å°',
                meridian: 'è…ç¶“ã€è†½ç¶“',
                emotionSpectrum: 'ææ‡¼ â†â†’ å‹‡æ°£',
                light: 'ç¨ç«‹é–‹å‰µã€æœ‰æ–¹å‘æ„Ÿã€æ•¢åšæ±ºå®šã€ä¸ç•å›°é›£',
                dark: 'å­¤ç¨ã€æ§åˆ¶ã€å®³æ€•å¤±æ•—ã€ä¸é¡˜æ±‚åŠ©',
                health: 'è…ã€è†€èƒ±ã€éª¨éª¼ã€è€³æœµ',
                oils: ['é›ªæ¾', 'å²©è˜­è‰', 'é»‘èƒ¡æ¤’'],
                soulLesson: 'å¾ã€Œæˆ‘è¦è­‰æ˜è‡ªå·±ã€åˆ°ã€Œæˆ‘æœ¬ä¾†å°±å¤ å¥½ã€',
                uniqueReading: '1è™Ÿäººæ˜¯å®‡å®™æ´¾ä¾†çš„å…ˆé‹’ï¼Œä½†æœ€å¤§çš„åŠŸèª²ä¸æ˜¯ã€Œæ›´ç¨ç«‹ã€ï¼Œè€Œæ˜¯ã€Œæ•¢æ–¼è„†å¼±ã€ã€‚ç•¶ä½ èƒ½èªªå‡ºã€Œæˆ‘éœ€è¦ä½ ã€ï¼Œæ‰æ˜¯çœŸæ­£çš„å¼·å¤§ã€‚',
                work: { type: 'é–‹å‰µè€…', desc: 'ã€Œè®“æˆ‘ä¾†å¸¶ã€', style: 'ç¨ç«‹æ±ºç­–ã€ä¸å–œæ­¡è¢«ç®¡ã€éœ€è¦è‡ªä¸»æ¬Š' },
                intimacy: { type: 'å¾æœè€…', trait: 'ä¸»å°å‹ã€å–œæ­¡å¸¶é ˜ã€è¿½æ±‚éç¨‹æ¯”çµæœæ›´èˆˆå¥®', healthy: 'è‡ªä¿¡çš„è¡¨é”æ…¾æœ›ï¼Œèƒ½çµ¦äºˆä¹Ÿèƒ½æ¥å—', shadow: 'åªé¡§è‡ªå·±çš„æ»¿è¶³ï¼ŒæŠŠæ€§ç•¶æˆå¾æœ', tip: 'è®“ä»–æ„Ÿè¦ºè¢«éœ€è¦ï¼Œé©æ™‚è®“ä»–ä¸»å°' }
            },
            2: { 
                title: 'èª¿å’Œè€…', 
                essence: 'åˆä½œã€æ•æ„Ÿã€é€£çµ',
                meridian: 'å¿ƒç¶“ã€å¿ƒåŒ…ç¶“',
                emotionSpectrum: 'å­¤ç¨ â†â†’ é€£çµ',
                light: 'æ•æ„Ÿé«”è²¼ã€å–„æ–¼èª¿è§£ã€ç›´è¦ºå¼·ã€æ“…é•·å‚¾è½',
                dark: 'è¨å¥½ã€æ²’æœ‰ç•Œé™ã€å¤±å»è‡ªæˆ‘ã€è¢«å‹•æ”»æ“Š',
                health: 'å¿ƒã€å°è…¸ã€è¡€æ¶²å¾ªç’°',
                oils: ['ç«ç‘°', 'èŒ‰è‰', 'å¤©ç«ºè‘µ'],
                soulLesson: 'å¾ã€Œä½ é–‹å¿ƒæˆ‘å°±é–‹å¿ƒã€åˆ°ã€Œæˆ‘å€‘éƒ½å¯ä»¥é–‹å¿ƒã€',
                uniqueReading: '2è™Ÿäººèƒ½æ„Ÿå—åˆ°åˆ¥äººæ„Ÿå—ä¸åˆ°çš„æƒ…ç·’æš—æµï¼Œä½†æœ€å¤§çš„åŠŸèª²æ˜¯åˆ†æ¸…æ¥šã€Œå“ªäº›æ˜¯æˆ‘çš„æƒ…ç·’ï¼Œå“ªäº›æ˜¯åˆ¥äººçš„ã€ã€‚å­¸æœƒèªªã€Œä¸ã€ï¼Œä¸æœƒå¤±å»æ„›ã€‚',
                work: { type: 'å”èª¿è€…', desc: 'ã€Œè®“æˆ‘ä¾†é…åˆã€', style: 'é‡è¦–å’Œè«§ã€æ“…é•·åœ˜éšŠåˆä½œã€éœ€è¦è¢«èªå¯' },
                intimacy: { type: 'é€£çµè€…', trait: 'é‡è¦–æƒ…æ„Ÿé€£çµã€éœ€è¦å‰æˆ²å’Œæ°›åœã€æ•æ„Ÿæ˜“å—å‚·', healthy: 'æ·±åº¦çš„èº«å¿ƒåˆä¸€é«”é©—ï¼Œæ¥µå¼·çš„æ„Ÿå—åŠ›', shadow: 'éåº¦è¨å¥½ï¼Œç”¨æ€§ä¾†æ›å–æ„›', tip: 'æƒ…æ„Ÿæ¯”æŠ€å·§é‡è¦ï¼Œäº‹å¾Œçš„æ“æŠ±è·Ÿéç¨‹ä¸€æ¨£é‡è¦' }
            },
            3: { 
                title: 'å‰µé€ è€…', 
                essence: 'å‰µæ„ã€è¡¨é”ã€æ¨‚è§€',
                meridian: 'è‚ç¶“ã€è†½ç¶“',
                emotionSpectrum: 'å£“æŠ‘ â†â†’ è¡¨é”',
                light: 'å‰µæ„ç„¡é™ã€è¡¨é”åŠ›å¼·ã€æœ‰æ„ŸæŸ“åŠ›ã€æ¨‚è§€é–‹æœ—',
                dark: 'è™é ­è›‡å°¾ã€è¡¨é¢è†šæ·ºã€é€ƒé¿æ·±å±¤å•é¡Œã€è‡ªæˆ‘æ‰¹è©•',
                health: 'è‚ã€è†½ã€çœ¼ç›ã€è‚Œè…±',
                oils: ['ä½›æ‰‹æŸ‘', 'ç”œæ©™', 'æª¸æª¬'],
                soulLesson: 'å¾ã€Œé–‹å§‹ä¸€ç™¾å€‹ã€åˆ°ã€Œå®Œæˆä¸€å€‹ã€',
                uniqueReading: '3è™Ÿäººæœ‰æ»¿è…¦å­çš„å¥½é»å­ï¼Œä½†æœ€å¤§çš„åŠŸèª²æ˜¯ã€Œå®Œæˆã€ã€‚ä¸å®Œç¾çš„å®Œæˆï¼Œå‹éå®Œç¾çš„ç©ºæƒ³ã€‚åšå®Œå®ƒï¼Œç™¼å‡ºå»ï¼Œè®“ä¸–ç•Œçœ‹è¦‹ã€‚',
                work: { type: 'è¡¨é”è€…', desc: 'ã€Œè®“æˆ‘ä¾†èªªã€', style: 'å–œæ­¡è®ŠåŒ–ã€å‰µæ„ç™¼æƒ³ã€éœ€è¦è®šç¾å’Œèˆå°' },
                intimacy: { type: 'è¡¨æ¼”è€…', trait: 'å–œæ­¡è®ŠåŒ–å’Œæ–°é®®æ„Ÿã€ç”¨è¨€èªèª¿æƒ…å¾ˆå²å®³ã€å–œæ­¡éŠæˆ²è§’è‰²æ‰®æ¼”', healthy: 'å……æ»¿å‰µæ„å’Œæ¨‚è¶£ï¼Œèƒ½è®“æ€§è®Šå¾—è¼•é¬†å¥½ç©', shadow: 'å¤ªåœ¨æ„è¡¨æ¼”ï¼Œç”¨æ€§ä¾†è­‰æ˜è‡ªå·±æœ‰é­…åŠ›', tip: 'ä¿æŒæ–°é®®æ„Ÿå¾ˆé‡è¦ï¼Œè®šç¾ä»–çš„å‰µæ„' }
            },
            4: { 
                title: 'å»ºé€ è€…', 
                essence: 'ç©©å®šã€å‹™å¯¦ã€å»ºè¨­',
                meridian: 'è‚ºç¶“ã€å¤§è…¸ç¶“',
                emotionSpectrum: 'åƒµåŒ– â†â†’ å½ˆæ€§',
                light: 'è…³è¸å¯¦åœ°ã€è² è²¬å¯é ã€çµ„ç¹”åŠ›å¼·ã€è€åŠ›é©šäºº',
                dark: 'å®³æ€•è®ŠåŒ–ã€æ”¾ä¸ä¸‹ã€å·¥ä½œç‹‚ã€å¤ªéåƒµåŒ–',
                health: 'è‚ºã€å¤§è…¸ã€çš®è†šã€éª¨éª¼',
                oils: ['å°¤åŠ åˆ©', 'çµ²æŸ', 'èŒ¶æ¨¹'],
                soulLesson: 'å¾ã€Œæ­»å®ˆä¸è®Šã€åˆ°ã€Œç©©ä¸­æ±‚è®Šã€',
                uniqueReading: '4è™Ÿäººè¢«ã€Œ4=æ­»ã€çš„è©›å’’å›°ä½å¤ªä¹…äº†ã€‚4ä¸æ˜¯æ­»äº¡ï¼Œæ˜¯é‡ç”Ÿã€‚èˆŠçš„ä¸å»ï¼Œæ–°çš„ä¸ä¾†ã€‚ä½ æœ€å¤§çš„åŠŸèª²æ˜¯ã€Œå­¸æœƒå‘Šåˆ¥ã€ã€‚',
                work: { type: 'åŸ·è¡Œè€…', desc: 'ã€Œè®“æˆ‘ä¾†åšã€', style: 'æŒ‰éƒ¨å°±ç­ã€é‡è¦–æµç¨‹ã€éœ€è¦æ˜ç¢ºçš„çµæ§‹' },
                intimacy: { type: 'ç©©å®šè€…', trait: 'å›ºå®šçš„ç¯€å¥å’Œæ¨¡å¼ã€é‡è¦–å®‰å…¨æ„Ÿå’Œä¿¡ä»»ã€éœ€è¦æ™‚é–“æš–æ©Ÿ', healthy: 'ç©©å®šã€æŒä¹…ã€å¯é ï¼Œæ·±åšçš„ä¿¡ä»»åŸºç¤', shadow: 'å¤ªåˆ¶å¼ï¼ŒæŠŠæ€§ç•¶æˆã€Œä¾‹è¡Œå…¬äº‹ã€', tip: 'ä¸è¦å¤ªå¤šé©šå–œï¼Œå»ºç«‹å›ºå®šçš„è¦ªå¯†å„€å¼' }
            },
            5: { 
                title: 'è®Šé©è€…', 
                essence: 'è‡ªç”±ã€è®ŠåŒ–ã€å†’éšª',
                meridian: 'èƒƒç¶“ã€è„¾ç¶“',
                emotionSpectrum: 'ç„¦æ…® â†â†’ è‡ªåœ¨',
                light: 'é©æ‡‰åŠ›å¼·ã€å–œæ­¡å†’éšªã€å¤šæ‰å¤šè—ã€ä¸æ€•æ”¹è®Š',
                dark: 'æ¼‚æ³Šä¸å®šã€ç„¡æ³•æ‰¿è«¾ã€éåº¦æ”¾ç¸±ã€ç„¦èºä¸å®‰',
                health: 'èƒƒã€è„¾ã€è‚Œè‚‰ã€æ¶ˆåŒ–ç³»çµ±',
                oils: ['è–‘', 'ç”œæ©™', 'è–„è·'],
                soulLesson: 'å¾ã€Œä¸€ç›´åœ¨é€ƒã€åˆ°ã€Œé¸æ“‡åœç•™ã€',
                uniqueReading: '5è™Ÿäººä»¥ç‚ºè‡ªç”±æ˜¯ã€Œä¸è¢«ç¶ä½ã€ï¼Œä½†çœŸæ­£çš„è‡ªç”±æ˜¯ã€Œé¸æ“‡ç•™ä¸‹ä¾†ã€ã€‚ç•¶ä½ èƒ½åœ¨ä¸€å€‹åœ°æ–¹æ·±è€•ï¼Œæ‰æœƒç™¼ç¾æœ€å¤§çš„å†’éšªåœ¨å…§å¿ƒã€‚',
                work: { type: 'å†’éšªè€…', desc: 'ã€Œè®“æˆ‘ä¾†è©¦ã€', style: 'å–œæ­¡è®ŠåŒ–ã€ä¸æ€•æŒ‘æˆ°ã€è¨å­è¢«æŸç¸›' },
                intimacy: { type: 'å†’éšªè€…', trait: 'å–œæ­¡å†’éšªå’Œå˜—è©¦ã€å®¹æ˜“å­å€¦é‡è¤‡ã€è¿½æ±‚åˆºæ¿€å’Œè‡ªç”±', healthy: 'é–‹æ”¾ã€å¥½å¥‡ã€æœ‰å¯¦é©—ç²¾ç¥', shadow: 'ç”¨æ€§ä¾†é€ƒé¿æ‰¿è«¾ï¼Œæˆç™®å‚¾å‘', tip: 'ä¿æŒè®ŠåŒ–å’Œé©šå–œï¼Œä¸€èµ·æ¢ç´¢æ–°äº‹ç‰©' }
            },
            6: { 
                title: 'ç…§é¡§è€…', 
                essence: 'è²¬ä»»ã€æ„›ã€æœå‹™',
                meridian: 'è„¾ç¶“ã€å¿ƒç¶“',
                emotionSpectrum: 'æ§åˆ¶ â†â†’ ä¿¡ä»»',
                light: 'æœ‰æ„›å¿ƒã€è² è²¬ä»»ã€ç…§é¡§ä»–äººã€å‰µé€ å’Œè«§',
                dark: 'éåº¦ä»˜å‡ºã€æ§åˆ¶ã€çŠ§ç‰²è‡ªå·±ã€ç„¡æ³•æ¥å—å¹«åŠ©',
                health: 'å¿ƒè‡Ÿã€è„¾èƒƒã€ä¹³æˆ¿ã€å­å®®',
                oils: ['ç«ç‘°', 'ä¾è˜­', 'å¤©ç«ºè‘µ'],
                soulLesson: 'å¾ã€Œç…§é¡§æ‰€æœ‰äººã€åˆ°ã€Œä¹Ÿç…§é¡§è‡ªå·±ã€',
                uniqueReading: '6è™Ÿäººå¾ˆæœƒæ„›åˆ¥äººï¼Œå»å¾ˆé›£æ¥å—åˆ¥äººçš„æ„›ã€‚ä½ æœ€å¤§çš„åŠŸèª²æ˜¯ã€Œè®“åˆ¥äººä¹Ÿç…§é¡§ä½ ã€ã€‚æ¥å—å¹«åŠ©ï¼Œä¸æ˜¯è»Ÿå¼±ï¼Œæ˜¯ä¿¡ä»»ã€‚',
                work: { type: 'ç…§é¡§è€…', desc: 'ã€Œè®“æˆ‘ä¾†é¡§ã€', style: 'é‡è¦–åœ˜éšŠå’Œè«§ã€æ¨‚æ–¼åŠ©äººã€éœ€è¦è¢«éœ€è¦' },
                intimacy: { type: 'ç…§é¡§è€…', trait: 'é‡è¦–çµ¦äºˆå°æ–¹æ„‰æ‚…ã€å–œæ­¡ç…§é¡§å’Œè¢«éœ€è¦ã€é‡è¦–ç’°å¢ƒå’Œæ°›åœ', healthy: 'æº«æš–ã€é«”è²¼ã€ç´°è†©ï¼Œèƒ½è®“å°æ–¹æ„Ÿè¦ºè¢«æ„›', shadow: 'åªé¡§å°æ–¹ï¼Œç„¡æ³•äº«å—è‡ªå·±çš„æ„‰æ‚…', tip: 'ä¸»å‹•ç…§é¡§ä»–ï¼Œå‘Šè¨´ä»–ï¼šã€Œä½ çš„æ„‰æ‚…å°æˆ‘å¾ˆé‡è¦ã€' }
            },
            7: { 
                title: 'æ¢ç´¢è€…', 
                essence: 'å…§çœã€æ™ºæ…§ã€éˆæ€§',
                meridian: 'å¿ƒç¶“ã€è…ç¶“',
                emotionSpectrum: 'æ‡·ç–‘ â†â†’ ä¿¡ä»»',
                light: 'æ™ºæ…§æ·±åˆ»ã€ç›´è¦ºæ•éŠ³ã€å–„æ–¼åˆ†æã€éˆæ€§è¦ºé†’',
                dark: 'éåº¦æ‡·ç–‘ã€å­¤åƒ»ã€ä¸ä¿¡ä»»ã€å†·æ¼ ç–é›¢',
                health: 'å¿ƒã€è…ã€ç¥ç¶“ç³»çµ±ã€è…¦éƒ¨',
                oils: ['ä¹³é¦™', 'æª€é¦™', 'è–°è¡£è‰'],
                soulLesson: 'å¾ã€Œä¸æ–·åˆ†æã€åˆ°ã€Œå…è¨±ä¸çŸ¥é“ã€',
                uniqueReading: '7è™Ÿäººç”¨æ€è€ƒä¾†ä¿è­·è‡ªå·±ï¼Œä½†æœ‰äº›äº‹æ˜¯æƒ³ä¸é€šçš„ã€‚ä½ æœ€å¤§çš„åŠŸèª²æ˜¯ã€Œå­¸æœƒä¿¡ä»»ã€â€”â€”ä¿¡ä»»ç›´è¦ºã€ä¿¡ä»»ä»–äººã€ä¿¡ä»»ç”Ÿå‘½ã€‚',
                work: { type: 'åˆ†æè€…', desc: 'ã€Œè®“æˆ‘ä¾†æƒ³ã€', style: 'ç¨ç«‹æ€è€ƒã€éœ€è¦ç¨è™•ç©ºé–“ã€ä¸å–œæ­¡è¢«æ‰“æ“¾' },
                intimacy: { type: 'æ¢ç´¢è€…', trait: 'éœ€è¦å¿ƒéˆé€£çµæ‰èƒ½èº«é«”é€£çµã€å¯èƒ½å°èº«é«”ç–é›¢ã€å–œæ­¡ç ”ç©¶å’Œæ¢ç´¢', healthy: 'èº«å¿ƒéˆåˆä¸€çš„æ·±åº¦é«”é©—', shadow: 'å¤ªåœ¨è…¦è¢‹è£¡ï¼Œèº«é«”ä¸åœ¨', tip: 'å¿ƒéˆé€£çµæ˜¯å‰æï¼Œçµ¦ä»–æ™‚é–“ã€Œå›åˆ°èº«é«”ã€' }
            },
            8: { 
                title: 'æŒæ¬Šè€…', 
                essence: 'æ¬ŠåŠ›ã€è±ç››ã€å½±éŸ¿åŠ›',
                meridian: 'å°è…¸ç¶“ã€è†€èƒ±ç¶“',
                emotionSpectrum: 'è²ªå©ª â†â†’ æ…·æ…¨',
                light: 'é ˜å°åŠ›å¼·ã€æœ‰å•†æ¥­é ­è…¦ã€èƒ½èšé›†è³‡æºã€æœ‰å½±éŸ¿åŠ›',
                dark: 'æ§åˆ¶ã€è²ªå©ªã€å·¥ä½œç‹‚ã€ç‚ºé”ç›®çš„ä¸æ“‡æ‰‹æ®µ',
                health: 'å¾ªç’°ç³»çµ±ã€é—œç¯€ã€éª¨éª¼ã€è‚Œè‚‰',
                oils: ['æ²’è—¥', 'æª€é¦™', 'é›ªæ¾'],
                soulLesson: 'å¾ã€Œæ“æœ‰æ›´å¤šã€åˆ°ã€Œåˆ†äº«æ›´å¤šã€',
                uniqueReading: '8è™Ÿäººæœ‰èšé›†è³‡æºçš„å¤©è³¦ï¼Œä½†æ¬ŠåŠ›æ˜¯æ‹¿ä¾†æœå‹™çš„ã€‚ä½ æœ€å¤§çš„åŠŸèª²æ˜¯ã€Œç”¨å½±éŸ¿åŠ›å¹«åŠ©åˆ¥äººã€ï¼Œè€Œä¸æ˜¯ã€Œç”¨å½±éŸ¿åŠ›æ§åˆ¶åˆ¥äººã€ã€‚',
                work: { type: 'æŒæ§è€…', desc: 'ã€Œè®“æˆ‘ä¾†ç®¡ã€', style: 'ç›®æ¨™å°å‘ã€é‡è¦–çµæœã€éœ€è¦æŒæ§æ„Ÿ' },
                intimacy: { type: 'æŒæ§è€…', trait: 'å¼·çƒˆçš„èƒ½é‡å’Œè€åŠ›ã€å–œæ­¡æŒæ§æˆ–è¢«å¾¹åº•æŒæ§ã€è¿½æ±‚æ¥µè‡´é«”é©—', healthy: 'å¼·å¤§çš„æ€§èƒ½é‡ï¼Œèƒ½çµ¦äºˆå¼·çƒˆçš„é«”é©—', shadow: 'ç”¨æ€§ä¾†å±•ç¾æ¬ŠåŠ›ï¼Œæ§åˆ¶æ…¾éå¼·', tip: 'å¯ä»¥é©åº¦è®“ä»–æŒæ§ï¼Œå¼·åº¦è¦å¤ ' }
            },
            9: { 
                title: 'æ™ºè€…', 
                essence: 'æ…ˆæ‚²ã€æ™ºæ…§ã€å®Œæˆ',
                meridian: 'ä¸‰ç„¦ç¶“ã€å¿ƒåŒ…ç¶“',
                emotionSpectrum: 'åŸ·è‘— â†â†’ æ”¾ä¸‹',
                light: 'æ…ˆæ‚²å¤§æ„›ã€æ™ºæ…§æ·±é ã€æœå‹™äººé¡ã€æœ‰å¤§æ ¼å±€',
                dark: 'éåº¦ç†æƒ³åŒ–ã€èˆ‡ç¾å¯¦è„«ç¯€ã€æ®‰é“è€…æƒ…çµã€ç„¡æ³•æ¥åœ°',
                health: 'ä¸‰ç„¦ã€å…ç–«ç³»çµ±ã€æ•´é«”å¹³è¡¡',
                oils: ['ä¹³é¦™', 'èŠ±æ¢¨æœ¨', 'å»£è—¿é¦™'],
                soulLesson: 'å¾ã€Œæ‹¯æ•‘ä¸–ç•Œã€åˆ°ã€Œå…ˆç…§é¡§å¥½è‡ªå·±ã€',
                uniqueReading: '9è™Ÿäººå¤©ç”Ÿæœ‰å¤§æ„›ï¼Œä½†æœ€å¤§çš„åŠŸèª²æ˜¯ã€Œè½åœ°ã€ã€‚ä½ ä¸éœ€è¦æ‹¯æ•‘æ‰€æœ‰äººï¼Œå…ˆæŠŠè‡ªå·±çš„ç”Ÿæ´»éå¥½ã€‚æ¥åœ°çš„ç†æƒ³ï¼Œæ‰æœ‰åŠ›é‡ã€‚',
                work: { type: 'æœå‹™è€…', desc: 'ã€Œè®“æˆ‘ä¾†å¹«ã€', style: 'é‡è¦–æ„ç¾©ã€é¡˜æ™¯å°å‘ã€éœ€è¦é€£çµæ›´å¤§çš„ç›®æ¨™' },
                intimacy: { type: 'å¥‰ç»è€…', trait: 'è¿½æ±‚èº«å¿ƒéˆåˆä¸€ã€å¯èƒ½è¦ºå¾—ã€Œæ€§å¤ªä½å±¤æ¬¡ã€ã€é‡è¦–æ„ç¾©å’Œé€£çµ', healthy: 'ç„¡æ¢ä»¶çš„æ„›èˆ‡æ¥ç´ï¼Œè¶…è¶Šè‚‰é«”çš„é€£çµ', shadow: 'é€ƒé¿èº«é«”ï¼Œåªæ´»åœ¨ç²¾ç¥å±¤é¢', tip: 'é€£çµåˆ°æ›´å¤§çš„æ„ç¾©ï¼Œå¹«åŠ©ä»–å›åˆ°èº«é«”' }
            },
            // â­ å¤§å¸«æ•¸
            11: { 
                title: 'éˆæ€§ç›´è¦ºè€…', 
                essence: 'ç›´è¦ºã€éˆæ€§ã€å•Ÿç™¼',
                meridian: 'å¿ƒåŒ…ç¶“',
                emotionSpectrum: 'å°é–‰ â†â†’ é–‹æ”¾',
                light: 'æ¥µå¼·ç›´è¦ºåŠ›ã€éˆæ€§é€šé“ã€å¤©ç”Ÿç™‚ç™’è€…å’Œå¼•å°è€…',
                dark: 'éåº¦æ•æ„Ÿã€ç„¦æ…®ä¸å®‰ã€ç¥ç¶“è³ªã€èˆ‡ç¾å¯¦è„«ç¯€',
                health: 'ç¥ç¶“ç³»çµ±ã€å¿ƒåŒ…ã€æƒ…ç·’ç©©å®š',
                oils: ['ä¹³é¦™', 'æª€é¦™', 'è–°è¡£è‰', 'æ©™èŠ±'],
                soulLesson: 'æŠŠéˆæ€§è¨Šæ¯è½‰åŒ–ç‚ºå¯¦éš›è¡Œå‹•ï¼Œä¸åªæ˜¯ã€Œæ„Ÿè¦ºåˆ°ã€ï¼Œé‚„è¦ã€Œåšå‡ºä¾†ã€',
                uniqueReading: '11æ˜¯ã€ŒåŠ å¼·ç‰ˆçš„2ã€ï¼ŒåŒæ™‚æ“æœ‰1çš„ç¨ç«‹å’Œ2çš„æ•æ„Ÿã€‚ä½ èƒ½æ¥æ”¶åˆ°åˆ¥äººæ¥æ”¶ä¸åˆ°çš„è¨Šæ¯ï¼Œä½†ä¹Ÿå®¹æ˜“è¢«é€™äº›è¨Šæ¯æ·¹æ²’ã€‚å­¸æœƒåˆ†è¾¨ã€Œå“ªäº›æ˜¯è¨Šæ¯ï¼Œå“ªäº›æ˜¯é›œè¨Šã€ã€‚',
                isMaster: true,
                masterMission: 'æˆç‚ºéˆæ€§èˆ‡ç¾å¯¦çš„æ©‹æ¨‘',
                work: { type: 'å•Ÿç™¼è€…', desc: 'ã€Œè®“æˆ‘ä¾†æ„Ÿæ‡‰ã€', style: 'ç›´è¦ºæ±ºç­–ã€éœ€è¦éˆæ„Ÿç©ºé–“ã€é©åˆé¡§å•è«®è©¢' },
                intimacy: { type: 'éˆæ€§é€£çµè€…', trait: 'éœ€è¦æ·±åº¦éˆæ€§é€£çµã€æ¥µåº¦æ•æ„Ÿã€èƒ½æ„Ÿæ‡‰å°æ–¹çš„æƒ…ç·’', healthy: 'èº«å¿ƒéˆå®Œå…¨åˆä¸€çš„ç¥è–é«”é©—', shadow: 'å¤ªæ•æ„Ÿè€Œç„¡æ³•æ”¾é¬†äº«å—', tip: 'å‰µé€ ç¥è–çš„ç©ºé–“å’Œæ°›åœï¼Œè®“ä»–æ„Ÿè¦ºå®‰å…¨' }
            },
            22: { 
                title: 'å¤§å¸«å»ºé€ è€…', 
                essence: 'é¡˜æ™¯ã€å»ºè¨­ã€å¯¦ç¾',
                meridian: 'å…¨ç¶“çµ¡æ•´åˆ',
                emotionSpectrum: 'å£“åŠ› â†â†’ æˆå°±',
                light: 'æŠŠå¤¢æƒ³è½åœ°ã€å»ºç«‹å¤§å‹ç³»çµ±ã€æœ‰é è¦‹ä¹Ÿæœ‰åŸ·è¡ŒåŠ›',
                dark: 'éåº¦å·¥ä½œã€å£“åŠ›æ¥µå¤§ã€å¿½ç•¥æƒ…æ„Ÿã€æ§åˆ¶éåº¦',
                health: 'å…¨èº«ç³»çµ±å¹³è¡¡ã€ç‰¹åˆ¥æ³¨æ„éå‹',
                oils: ['é›ªæ¾', 'æª€é¦™', 'æ²’è—¥', 'å²©è˜­è‰'],
                soulLesson: 'ä¸åªå»ºé€ ç‰©è³ªä¸–ç•Œï¼Œä¹Ÿè¦å»ºé€ éˆæ€§çš„æ©‹æ¨‘',
                uniqueReading: '22æ˜¯ã€ŒåŠ å¼·ç‰ˆçš„4ã€ï¼Œæœ‰æŠŠé¡˜æ™¯è½åœ°çš„è¶…å¼·èƒ½åŠ›ã€‚ä½†è¦è¨˜ä½ï¼šå»ºé€ çš„ç›®çš„ä¸æ˜¯æ§åˆ¶ï¼Œè€Œæ˜¯æœå‹™ã€‚æœ€å‰å¤§çš„å»ºç¯‰ï¼Œæ˜¯è®“æ‰€æœ‰äººéƒ½èƒ½é€²å…¥çš„ã€‚',
                isMaster: true,
                masterMission: 'å»ºé€ æœå‹™çœ¾ç”Ÿçš„ç³»çµ±',
                work: { type: 'ç³»çµ±å»ºé€ è€…', desc: 'ã€Œè®“æˆ‘ä¾†å»ºæ§‹ã€', style: 'é•·é è¦åŠƒã€ç³»çµ±æ€ç¶­ã€éœ€è¦è¶³å¤ çš„è³‡æºå’Œæ™‚é–“' },
                intimacy: { type: 'æ·±åº¦å»ºé€ è€…', trait: 'è¿½æ±‚é•·æœŸç©©å®šã€æ·±åº¦æ‰¿è«¾ã€è¦å»ºç«‹ã€ŒçœŸæ­£çš„é—œä¿‚ã€', healthy: 'å»ºç«‹æ·±åšçš„è¦ªå¯†åŸºç¤', shadow: 'å¤ªå°ˆæ³¨äº‹æ¥­å¿½ç•¥è¦ªå¯†', tip: 'è®“ä»–çŸ¥é“è¦ªå¯†é—œä¿‚ä¹Ÿæ˜¯é‡è¦çš„äººç”Ÿå»ºè¨­' }
            },
            33: { 
                title: 'å¤§å¸«ç™‚ç™’è€…', 
                essence: 'ç™‚ç™’ã€æ…ˆæ‚²ã€æœå‹™',
                meridian: 'å…¨ç¶“çµ¡æ•´åˆ',
                emotionSpectrum: 'çŠ§ç‰² â†â†’ æœå‹™',
                light: 'ç„¡æ¢ä»¶çš„æ„›ã€ç™‚ç™’ä»–äººæ·±å±¤å‰µå‚·ã€å¤©ç”Ÿå°å¸«',
                dark: 'çŠ§ç‰²éåº¦ã€ç„¡æ³•è¨­é™ã€ç‡ƒç‡’è‡ªå·±ã€å¤±å»è‡ªæˆ‘',
                health: 'å…¨èº«ç³»çµ±å¹³è¡¡ã€ç‰¹åˆ¥æ³¨æ„èƒ½é‡è€—ç«­',
                oils: ['ç«ç‘°', 'ä¹³é¦™', 'èŠ±æ¢¨æœ¨', 'æ©™èŠ±'],
                soulLesson: 'åœ¨æœå‹™ä»–äººçš„åŒæ™‚ï¼Œä¹Ÿè¦ç…§é¡§å¥½è‡ªå·±',
                uniqueReading: '33æ˜¯ã€ŒåŠ å¼·ç‰ˆçš„6ã€ï¼Œæ˜¯æœ€é«˜å±¤æ¬¡çš„ç™‚ç™’å’Œæœå‹™ã€‚ä½†è¨˜ä½ï¼šä½ ä¸éœ€è¦ç‡ƒç‡’è‡ªå·±ä¾†ç…§äº®åˆ¥äººã€‚å…ˆæŠŠè‡ªå·±çš„æ¯å­è£æ»¿ï¼Œæ‰èƒ½æŒçºŒçµ¦äºˆã€‚',
                isMaster: true,
                masterMission: 'æˆç‚ºç„¡æ¢ä»¶ä¹‹æ„›çš„ç®¡é“',
                work: { type: 'ç™‚ç™’å°å¸«', desc: 'ã€Œè®“æˆ‘ä¾†ç™‚ç™’ã€', style: 'æœå‹™å°å‘ã€éœ€è¦æ„ç¾©æ„Ÿã€é©åˆæ•™è‚²ç™‚ç™’é ˜åŸŸ' },
                intimacy: { type: 'ç™‚ç™’è€…', trait: 'çµ¦äºˆç„¡æ¢ä»¶çš„æ„›å’Œæ¥ç´ã€èƒ½ç™‚ç™’å°æ–¹çš„å‰µå‚·', healthy: 'è®“å°æ–¹æ„Ÿå—åˆ°è¢«å®Œå…¨æ¥ç´', shadow: 'åªä»˜å‡ºä¸æ¥å—ï¼Œç„¡æ³•äº«å—è¢«æ„›', tip: 'å…è¨±è‡ªå·±ä¹Ÿè¢«æ„›ã€è¢«ç…§é¡§' }
            }
        };

        // å–å¾—æ•¸å­—è³‡æ–™
        const getNumData = (num) => {
            if (NUMBER_DATA[num]) return NUMBER_DATA[num];
            const reduced = reduceToSingle(num);
            return NUMBER_DATA[reduced] || NUMBER_DATA[1];
        };

        // å–å¾—äº”è¡Œè³‡æ–™
        const getElementData = (num) => {
            if (ELEMENT_DATA[num]) return ELEMENT_DATA[num];
            const reduced = reduceToSingle(num);
            return ELEMENT_DATA[reduced] || ELEMENT_DATA[1];
        };

        // å–å¾—å¿ƒç†å­¸è³‡æ–™
        const getPsychData = (num) => {
            const base = reduceToSingle(num);
            return PSYCHOLOGY_DATA[base] || PSYCHOLOGY_DATA[1];
        };

        /* ============================================
           â­ 12å®®ä½å®Œæ•´è³‡æ–™åº«
           ============================================ */

        const PALACE_DATA = {
            1: { 
                name: 'å‹‡æ°£æ®¿', 
                meridian: 'è†½ç¶“', 
                time: '23:00-01:00',
                theme: 'æˆ‘æ•¢ä¸æ•¢åšè‡ªå·±ï¼Ÿ',
                darkEmotion: 'ææ‡¼ã€çŒ¶è±«ã€ä¸æ•¢è¡Œå‹•',
                lightEmotion: 'å‹‡æ°£ã€æ±ºæ–·ã€æ•¢æ–¼åšè‡ªå·±',
                stuckPattern: ['ç¸½æ˜¯åœ¨ç­‰ã€Œæº–å‚™å¥½ã€æ‰è¡Œå‹•', 'å®³æ€•åšéŒ¯æ±ºå®š', 'æ´»åœ¨åˆ¥äººçš„æœŸæœ›è£¡', 'ä¸æ•¢è¡¨é”çœŸå¯¦çš„è‡ªå·±'],
                soulQuestions: ['å¦‚æœä¸æ€•å¤±æ•—ï¼Œä½ æœƒåšä»€éº¼ï¼Ÿ', 'ä½ åœ¨ç­‰ä»€éº¼è¨±å¯ï¼Ÿ', 'èª°çš„çœ¼å…‰è®“ä½ ä¸æ•¢åšè‡ªå·±ï¼Ÿ'],
                oils: ['è–‘', 'é»‘èƒ¡æ¤’', 'æœæ¾æ¼¿æœ']
            },
            2: { 
                name: 'åŠ›é‡å»³', 
                meridian: 'è‚ç¶“', 
                time: '01:00-03:00',
                theme: 'æˆ‘çš„åŠ›é‡å¡åœ¨å“ªï¼Ÿ',
                darkEmotion: 'æ†¤æ€’ã€å£“æŠ‘ã€ç„¡åŠ›æ„Ÿ',
                lightEmotion: 'å‰µé€ åŠ›ã€ç”Ÿå‘½åŠ›ã€å‰é€²å‹•åŠ›',
                stuckPattern: ['è«åå…¶å¦™å°±ç”Ÿæ°£æˆ–ç…©èº', 'è¦ºå¾—è‡ªå·±çš„åŠ›é‡è¢«å£“åˆ¶', 'æœ‰å¾ˆå¤šæƒ³æ³•ä½†ç„¡æ³•å¯¦ç¾', 'å®¹æ˜“æŒ‡è²¬åˆ¥äººæˆ–è‡ªæˆ‘æ”»æ“Š'],
                soulQuestions: ['ä½ çš„æ†¤æ€’åœ¨å‘Šè¨´ä½ ä»€éº¼ï¼Ÿ', 'ä»€éº¼å¡ä½äº†ä½ çš„å‰µé€ åŠ›ï¼Ÿ', 'ä½ åœ¨å°èª°ç”Ÿæ°£ï¼Ÿï¼ˆåŒ…æ‹¬å°è‡ªå·±ï¼‰'],
                oils: ['ä½›æ‰‹æŸ‘', 'è–„è·', 'ç¾…é¦¬æ´‹ç”˜èŠ']
            },
            3: { 
                name: 'å‘Šåˆ¥è‹‘', 
                meridian: 'è‚ºç¶“', 
                time: '03:00-05:00',
                theme: 'æˆ‘æ”¾ä¸ä¸‹ä»€éº¼ï¼Ÿ',
                darkEmotion: 'æ‚²å‚·ã€å“€æ‚¼ã€ç„¡æ³•æ”¾ä¸‹',
                lightEmotion: 'æ¥å—ã€å‘Šåˆ¥ã€é‡‹ç„¶',
                stuckPattern: ['åè¦†å›æƒ³éå»çš„äº‹', 'ç„¡æ³•å¥½å¥½èªªå†è¦‹', 'å°å¤±å»çš„æ±è¥¿è€¿è€¿æ–¼æ‡·', 'ç”¨å¿™ç¢Œé€ƒé¿æ‚²å‚·'],
                soulQuestions: ['ä½ é‚„æ²’æœ‰å‘Šåˆ¥çš„æ˜¯ä»€éº¼ï¼Ÿ', 'ä½ å…è¨±è‡ªå·±æ‚²å‚·å—ï¼Ÿ', 'ä»€éº¼æ˜¯ä½ ä¸€ç›´ä¸è‚¯æ”¾ä¸‹çš„ï¼Ÿ'],
                oils: ['çµ²æŸ', 'ä¹³é¦™', 'å°¤åŠ åˆ©']
            },
            4: { 
                name: 'æ·¨åŒ–å®¤', 
                meridian: 'å¤§è…¸ç¶“', 
                time: '05:00-07:00',
                theme: 'æˆ‘è©²ä¸Ÿæ‰ä»€éº¼ï¼Ÿ',
                darkEmotion: 'åŸ·è‘—ã€å›¤ç©ã€é»è†©',
                lightEmotion: 'æ·¨åŒ–ã€é‡‹æ”¾ã€æ¸…çˆ½',
                stuckPattern: ['å®¶è£¡å †æ»¿ç”¨ä¸åˆ°çš„æ±è¥¿', 'é—œä¿‚è£¡ç´¯ç©å¾ˆå¤šæ²’èªªçš„è©±', 'èº«é«”å®¹æ˜“ä¾¿ç§˜æˆ–æµ®è…«', 'ç„¡æ³•çµæŸä¸é©åˆçš„é—œä¿‚/å·¥ä½œ'],
                soulQuestions: ['ä½ çš„äººç”Ÿæœ‰ä»€éº¼ã€Œå»¢ç‰©ã€éœ€è¦æ¸…ç†ï¼Ÿ', 'ä½ åœ¨å›¤ç©ä»€éº¼ï¼Ÿ', 'ä»€éº¼æ˜¯ä½ æ—©è©²æ”¾æ‰‹å»é‚„æŠ“è‘—çš„ï¼Ÿ'],
                oils: ['æª¸æª¬', 'è‘¡è„æŸš', 'èŒ¶æ¨¹']
            },
            5: { 
                name: 'æ¶ˆåŒ–é–£', 
                meridian: 'èƒƒç¶“', 
                time: '07:00-09:00',
                theme: 'æˆ‘æ¶ˆåŒ–ä¸äº†ä»€éº¼ï¼Ÿ',
                darkEmotion: 'ç„¦æ…®ã€æ“”æ†‚ã€ç„¡æ³•æ¥å—',
                lightEmotion: 'æ¥ç´ã€æ¶ˆåŒ–ã€è½‰åŒ–',
                stuckPattern: ['å°æœªä¾†å……æ»¿ç„¦æ…®', 'é›£ä»¥æ¥å—ç¾ç‹€', 'èƒƒéƒ¨ç¶“å¸¸ä¸èˆ’æœ', 'æƒ³å¤ªå¤šã€åè¦†å’€åš¼åŒä¸€ä»¶äº‹'],
                soulQuestions: ['ä»€éº¼äº‹æƒ…è®“ä½ ã€Œåš¥ä¸ä¸‹å»ã€ï¼Ÿ', 'ä½ åœ¨ç„¦æ…®ä»€éº¼ï¼Ÿ', 'ä»€éº¼æ˜¯ä½ ç„¡æ³•æ¥å—çš„ç¾å¯¦ï¼Ÿ'],
                oils: ['ç”œæ©™', 'è–‘', 'è±†è”»']
            },
            6: { 
                name: 'ä¿¡ä»»æ®¿', 
                meridian: 'è„¾ç¶“', 
                time: '09:00-11:00',
                theme: 'æˆ‘æƒ³å¤ªå¤šä»€éº¼ï¼Ÿ',
                darkEmotion: 'éåº¦æ€æ…®ã€æ“”æ†‚ã€æ§åˆ¶',
                lightEmotion: 'ä¿¡ä»»ã€è‡£æœã€äº¤è¨—',
                stuckPattern: ['ä»€éº¼äº‹éƒ½è¦æƒ³ä¸‰é', 'å¾ˆé›£ä¿¡ä»»åˆ¥äºº', 'ç¸½è¦ºå¾—è‡ªå·±åšå¾—ä¸å¤ å¥½', 'æ§åˆ¶æ…¾å¼·ï¼Œç„¡æ³•æ”¾æ‰‹'],
                soulQuestions: ['ä½ ä¸ä¿¡ä»»çš„æ˜¯ä»€éº¼ï¼Ÿ', 'ä½ åœ¨æ§åˆ¶ä»€éº¼ï¼Ÿ', 'å¦‚æœä½ ã€Œä¸æƒ³ã€ï¼Œæœƒæ€æ¨£ï¼Ÿ'],
                oils: ['æª€é¦™', 'å²©è˜­è‰', 'å¿«æ¨‚é¼ å°¾è‰']
            },
            7: { 
                name: 'å¿ƒé–€å®®', 
                meridian: 'å¿ƒç¶“', 
                time: '11:00-13:00',
                theme: 'æˆ‘æ¸´æœ›ä»€éº¼æ„›ï¼Ÿ',
                darkEmotion: 'å­¤ç¨ã€éš”é›¢ã€å¿ƒç‰†',
                lightEmotion: 'é€£çµã€å–œæ‚…ã€æ•é–‹',
                stuckPattern: ['è¦ºå¾—æ²’æœ‰äººçœŸæ­£æ‡‚è‡ªå·±', 'è¡¨é¢ç¤¾äº¤å¾ˆå¤šä½†å…§å¿ƒå­¤ç¨', 'ä¸æ•¢è®“åˆ¥äººå¤ªé è¿‘', 'æ¸´æœ›æ„›å»å®³æ€•å—å‚·'],
                soulQuestions: ['ä½ çš„å¿ƒç‰†åœ¨ä¿è­·ä»€éº¼ï¼Ÿ', 'ä½ çœŸæ­£æ¸´æœ›çš„æ„›æ˜¯ä»€éº¼ï¼Ÿ', 'èª°æ˜¯ä½ æƒ³è®“ä»–é è¿‘å»ä¸æ•¢çš„äººï¼Ÿ'],
                oils: ['ç«ç‘°', 'èŒ‰è‰', 'ä¾è˜­ä¾è˜­']
            },
            8: { 
                name: 'æ˜è¾¨å»³', 
                meridian: 'å°è…¸ç¶“', 
                time: '13:00-15:00',
                theme: 'æˆ‘åˆ†ä¸æ¸…ä»€éº¼ï¼Ÿ',
                darkEmotion: 'æ··äº‚ã€å›°æƒ‘ã€ç„¡æ³•åˆ¤æ–·',
                lightEmotion: 'æ˜è¾¨ã€æ¸…æ™°ã€æ™ºæ…§',
                stuckPattern: ['å¸¸å¸¸åœ¨é¸æ“‡ä¸­ç³¾çµ', 'åˆ†ä¸æ¸…èª°æ˜¯çœŸæœ‹å‹', 'å®¹æ˜“è¢«åˆ¥äººçš„æ„è¦‹å½±éŸ¿', 'è½åˆ°å¤ªå¤šè²éŸ³ï¼Œä¸çŸ¥é“å“ªå€‹æ˜¯çœŸçš„'],
                soulQuestions: ['ä½ åœ¨ç³¾çµä»€éº¼é¸æ“‡ï¼Ÿ', 'ä½ å…§å¿ƒçš„è²éŸ³åœ¨èªªä»€éº¼ï¼Ÿ', 'ä»€éº¼æ˜¯ä½ éœ€è¦åˆ†è¾¨æ¸…æ¥šçš„ï¼Ÿ'],
                oils: ['è¿·è¿­é¦™', 'ç¾…å‹’', 'è–„è·']
            },
            9: { 
                name: 'å¸è¼‰è‹‘', 
                meridian: 'è†€èƒ±ç¶“', 
                time: '15:00-17:00',
                theme: 'æˆ‘æ‰›è‘—ä»€éº¼ï¼Ÿ',
                darkEmotion: 'å£“åŠ›ã€ç·Šç¹ƒã€æ‰¿æ“”éåº¦',
                lightEmotion: 'é‡‹æ”¾ã€è¼•é¬†ã€æµå‹•',
                stuckPattern: ['èƒŒéƒ¨å’Œè‚©é ¸ç¸½æ˜¯å¾ˆç·Š', 'è¦ºå¾—è‡ªå·±è¦æ‰›æ‰€æœ‰çš„äº‹', 'ä¸æ•¢éº»ç…©åˆ¥äºº', 'å£“åŠ›å¤§åˆ°å¿«çˆ†ç‚¸'],
                soulQuestions: ['ä½ èƒŒä¸Šæ‰›çš„æ˜¯èª°çš„è²¬ä»»ï¼Ÿ', 'ä»€éº¼æ˜¯å¯ä»¥æ”¾ä¸‹çš„ï¼Ÿ', 'ä½ ç‚ºä»€éº¼è¦ºå¾—å¿…é ˆè‡ªå·±æ‰›ï¼Ÿ'],
                oils: ['è–°è¡£è‰', 'ç”œé¦¬é¬±è˜­', 'è‹¦æ©™è‘‰']
            },
            10: { 
                name: 'å¿—æ°£æ®¿', 
                meridian: 'è…ç¶“', 
                time: '17:00-19:00',
                theme: 'æˆ‘å®³æ€•ä»€éº¼ï¼Ÿ',
                darkEmotion: 'ææ‡¼ã€ç„¡åŠ›ã€è¿·å¤±æ–¹å‘',
                lightEmotion: 'å¿—æ°£ã€æ–¹å‘ã€ç”Ÿå‘½åŠ›',
                stuckPattern: ['ä¸çŸ¥é“äººç”Ÿè¦å¾€å“ªè£¡å»', 'å…§å¿ƒæ·±è™•æœ‰å¾ˆå¤§çš„ææ‡¼', 'ç¼ºä¹å‹•åŠ›å’Œç”Ÿå‘½åŠ›', 'å®³æ€•å¤±æ•—æ‰€ä»¥ä¸æ•¢é–‹å§‹'],
                soulQuestions: ['ä½ æœ€æ·±çš„ææ‡¼æ˜¯ä»€éº¼ï¼Ÿ', 'å¦‚æœä¸å®³æ€•ï¼Œä½ æƒ³æˆç‚ºä»€éº¼ï¼Ÿ', 'ä»€éº¼æ˜¯ä½ çš„ã€Œå¿—ã€ï¼Ÿ'],
                oils: ['é›ªæ¾', 'æª€é¦™', 'æ²’è—¥']
            },
            11: { 
                name: 'æ•é–‹é–£', 
                meridian: 'å¿ƒåŒ…ç¶“', 
                time: '19:00-21:00',
                theme: 'æˆ‘åœ¨ä¿è­·ä»€éº¼ï¼Ÿ',
                darkEmotion: 'å°é–‰ã€é˜²ç¦¦ã€å­¤ç«‹',
                lightEmotion: 'é–‹æ”¾ã€çœŸå¯¦ã€è¦ªå¯†',
                stuckPattern: ['è¡¨é¢é–‹æœ—ä½†å…¶å¯¦ä¸è®“äººé è¿‘', 'å®³æ€•çœŸæ­£çš„è¦ªå¯†', 'ç”¨å¿™ç¢Œæˆ–è·é›¢ä¿è­·è‡ªå·±', 'è¦ºå¾—å±•ç¾è„†å¼±å¾ˆå±éšª'],
                soulQuestions: ['ä½ åœ¨ä¿è­·å…§å¿ƒçš„ä»€éº¼ï¼Ÿ', 'ä½ å®³æ€•è¢«çœ‹è¦‹ä»€éº¼ï¼Ÿ', 'èª°æ˜¯ä½ æƒ³è¦å°ä»–æ•é–‹çš„äººï¼Ÿ'],
                oils: ['ç«ç‘°è‰', 'æ©™èŠ±', 'å»£è—¿é¦™']
            },
            12: { 
                name: 'å¹³è¡¡å®¤', 
                meridian: 'ä¸‰ç„¦ç¶“', 
                time: '21:00-23:00',
                theme: 'æˆ‘å“ªè£¡ä¸å¹³è¡¡ï¼Ÿ',
                darkEmotion: 'å¤±è¡¡ã€åˆ†è£‚ã€ä¸å”èª¿',
                lightEmotion: 'æ•´åˆã€å¹³è¡¡ã€å’Œè«§',
                stuckPattern: ['ç”Ÿæ´»å„æ–¹é¢åš´é‡ä¸å¹³è¡¡', 'èº«å¿ƒéˆåˆ†é›¢çš„æ„Ÿè¦º', 'è¦ºå¾—å…§åœ¨æœ‰å¾ˆå¤šã€Œä¸åŒçš„è‡ªå·±ã€', 'é›£ä»¥æ•´åˆéå»å’Œç¾åœ¨'],
                soulQuestions: ['ä½ çš„ç”Ÿæ´»å“ªè£¡å¤±è¡¡äº†ï¼Ÿ', 'ä½ æœ‰å“ªäº›ã€Œè‡ªå·±ã€é‚„æ²’æ•´åˆï¼Ÿ', 'ä»€éº¼æ˜¯ä½ éœ€è¦å’Œè§£çš„ï¼Ÿ'],
                oils: ['å¤©ç«ºè‘µ', 'ä¹³é¦™', 'èŠ±æ¢¨æœ¨']
            }
        };

        // æµå¹´ä¸»é¡Œ
        const YEAR_THEMES = {
            1: { keyword: 'æ–°é–‹å§‹', theme: 'ç¨®å­èŒèŠ½', advice: 'å•Ÿå‹•æ–°è¨ˆç•«ã€å‹‡æ•¢åšæ±ºå®š', palace: '1å®®ï¼ˆå‹‡æ°£æ®¿ï¼‰', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨å•ä½ ï¼šã€Œä½ æ•¢ä¸æ•¢åšè‡ªå·±ï¼Ÿã€' },
            2: { keyword: 'ç­‰å¾…', theme: 'è€å¿ƒè€•è€˜', advice: 'å»ºç«‹åˆä½œã€ç­‰å¾…æ™‚æ©Ÿ', palace: '2å®®ï¼ˆåŠ›é‡å»³ï¼‰', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨å•ä½ ï¼šã€Œä½ çš„åŠ›é‡å¡åœ¨å“ªï¼Ÿã€' },
            3: { keyword: 'è¡¨é”', theme: 'å‰µæ„ç¶»æ”¾', advice: 'è‡ªæˆ‘è¡¨é”ã€ç¤¾äº¤æ‹“å±•', palace: '3å®®ï¼ˆå‘Šåˆ¥è‹‘ï¼‰', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨å•ä½ ï¼šã€Œä½ æ”¾ä¸ä¸‹ä»€éº¼ï¼Ÿã€' },
            4: { keyword: 'å»ºè¨­', theme: 'ç©©å›ºåŸºç¤', advice: 'æ‰“åœ°åŸºã€å»ºç«‹çµæ§‹', palace: '4å®®ï¼ˆæ·¨åŒ–å®¤ï¼‰', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨å•ä½ ï¼šã€Œä½ è©²ä¸Ÿæ‰ä»€éº¼ï¼Ÿã€' },
            5: { keyword: 'è®ŠåŒ–', theme: 'è½‰å‹çªç ´', advice: 'æ“æŠ±æ”¹è®Šã€å‹‡æ–¼å†’éšª', palace: '5å®®ï¼ˆæ¶ˆåŒ–é–£ï¼‰', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨å•ä½ ï¼šã€Œä½ æ¶ˆåŒ–ä¸äº†ä»€éº¼ï¼Ÿã€' },
            6: { keyword: 'è²¬ä»»', theme: 'ç…§é¡§æ”¶æˆ', advice: 'å®¶åº­è²¬ä»»ã€æ”¶ç©«ä»˜å‡º', palace: '6å®®ï¼ˆä¿¡ä»»æ®¿ï¼‰', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨å•ä½ ï¼šã€Œä½ æƒ³å¤ªå¤šä»€éº¼ï¼Ÿã€' },
            7: { keyword: 'æ²‰æ¾±', theme: 'å…§åœ¨æ¢ç´¢', advice: 'åæ€å­¸ç¿’ã€ç¨è™•å……é›»', palace: '7å®®ï¼ˆå¿ƒé–€å®®ï¼‰', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨å•ä½ ï¼šã€Œä½ æ¸´æœ›ä»€éº¼æ„›ï¼Ÿã€' },
            8: { keyword: 'æ”¶ç©«', theme: 'è±ç››æˆå°±', advice: 'äº‹æ¥­æˆåŠŸã€è²¡å‹™è±æ”¶', palace: '8å®®ï¼ˆæ˜è¾¨å»³ï¼‰', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨å•ä½ ï¼šã€Œä½ åˆ†ä¸æ¸…ä»€éº¼ï¼Ÿã€' },
            9: { keyword: 'çµæŸ', theme: 'å®Œæˆé‡‹æ”¾', advice: 'æ”¾ä¸‹èˆŠæœ‰ã€æº–å‚™æ–°å¾ªç’°', palace: '9å®®ï¼ˆå¸è¼‰è‹‘ï¼‰', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨å•ä½ ï¼šã€Œä½ æ‰›è‘—ä»€éº¼ï¼Ÿã€' },
            11: { keyword: 'éˆæ€§è¦ºé†’', theme: 'ç›´è¦ºé–‹å•Ÿ', advice: 'ä¿¡ä»»ç›´è¦ºã€éˆæ€§æˆé•·', palace: '11å®®ï¼ˆæ•é–‹é–£ï¼‰', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨å•ä½ ï¼šã€Œä½ åœ¨ä¿è­·ä»€éº¼ï¼Ÿã€' },
            22: { keyword: 'å¤§å¸«å»ºé€ ', theme: 'é¡˜æ™¯è½åœ°', advice: 'å»ºç«‹é•·é ç³»çµ±ã€å¯¦ç¾å®å¤§å¤¢æƒ³', palace: 'å…¨å®®ä½', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨èªªï¼šã€Œå»ºé€ æœå‹™çœ¾ç”Ÿçš„æ©‹æ¨‘ã€' },
            33: { keyword: 'å¤§å¸«ç™‚ç™’', theme: 'ç„¡æ¢ä»¶çš„æ„›', advice: 'ç™‚ç™’è‡ªå·±èˆ‡ä»–äººã€æœå‹™çœ¾ç”Ÿ', palace: 'å…¨å®®ä½', focus: 'é€™ä¸€å¹´å®‡å®™åœ¨èªªï¼šã€Œæˆç‚ºæ„›çš„ç®¡é“ã€' }
        };

        // å¤§é‹ä¸»é¡Œ
        const FORTUNE_THEMES = {
            1: { age: '1-10æ­²', name: 'ç«¥å¹´å°è¨˜', desc: 'ç”Ÿå‘½çš„ç¬¬ä¸€å€‹åå¹´ï¼Œå¥ å®šå®‰å…¨æ„Ÿèˆ‡è‡ªæˆ‘èªçŸ¥çš„åŸºç¤' },
            2: { age: '11-20æ­²', name: 'é’æ˜¥æ¢ç´¢', desc: 'æ¢ç´¢è‡ªæˆ‘ã€å»ºç«‹åƒ¹å€¼è§€ã€å°‹æ‰¾èªåŒ' },
            3: { age: '21-30æ­²', name: 'è‡ªæˆ‘å»ºç«‹', desc: 'è¸å…¥ç¤¾æœƒã€å»ºç«‹äº‹æ¥­å’Œé—œä¿‚çš„æ ¹åŸº' },
            4: { age: '31-40æ­²', name: 'æ ¹åŸºç©©å›º', desc: 'ç©©å›ºäº‹æ¥­ã€æ‰¿æ“”è²¬ä»»ã€å»ºç«‹å®¶åº­' },
            5: { age: '41-50æ­²', name: 'è½‰åŒ–è›»è®Š', desc: 'ä¸­å¹´è½‰å‹ã€é‡æ–°å®šç¾©è‡ªæˆ‘ã€æ”¾ä¸‹ä¸é©åˆçš„' },
            6: { age: '51-60æ­²', name: 'è²¬ä»»æ”¶æˆ', desc: 'æ”¶ç©«å‰åŠç”Ÿçš„åŠªåŠ›ã€æ‰¿æ“”æ›´å¤§çš„è²¬ä»»' },
            7: { age: '61-70æ­²', name: 'æ™ºæ…§åœ“æ»¿', desc: 'å…§åœ¨æ¢ç´¢ã€åˆ†äº«æ™ºæ…§ã€éˆæ€§æ·±åŒ–' },
            8: { age: '71æ­²+', name: 'éˆæ€§æ˜‡è¯', desc: 'è¶…è¶Šç‰©è³ªã€éˆæ€§åœ“æ»¿ã€ç•™ä¸‹legacy' }
        };

        /* ============================================
           è¨ˆç®—é‚è¼¯
           ============================================ */
        
        // åˆ¤æ–·æ˜¯å¦ç‚ºå¤§å¸«æ•¸
        const isMasterNumber = (num) => num === 11 || num === 22 || num === 33;

        // åŒ–ç°¡åˆ°å€‹ä½æ•¸ï¼ˆä¸ä¿ç•™å¤§å¸«æ•¸ï¼‰
        const reduceToSingle = (num) => {
            while (num > 9) {
                num = String(num).split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);
            }
            return num;
        };

        // â­ æ ¸å¿ƒåŒ–ç°¡å‡½æ•¸ï¼šä¿ç•™å¤§å¸«æ•¸11ã€22ã€33
        const reduceNumber = (num) => {
            if (isMasterNumber(num)) return num;
            while (num > 9) {
                num = String(num).split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);
                if (isMasterNumber(num)) return num;
            }
            return num;
        };

        // å–å¾—åŸºç¤æ•¸å­—ï¼ˆç”¨æ–¼æŸ¥è¡¨ï¼‰
        const getBaseNum = (num) => {
            if (NUMBER_DATA[num]) return num;
            return reduceToSingle(num);
        };

        // â­ è¨ˆç®—äº”è¡Œçµ±è¨ˆ
        const calculateElements = (hourData) => {
            const { h, o, u, r } = hourData;
            const elements = { wood: 0, fire: 0, earth: 0, metal: 0, water: 0 };
            
            [h, o, u, r].forEach(num => {
                if (!num) return;
                const elemData = getElementData(num);
                if (elemData) {
                    const count = elemData.count || 1;
                    elements[elemData.element] += count;
                }
            });
            
            const total = Object.values(elements).reduce((a, b) => a + b, 0);
            const dominant = Object.entries(elements).filter(([_, v]) => v >= 2).map(([k]) => k);
            const missing = Object.entries(elements).filter(([_, v]) => v === 0).map(([k]) => k);
            
            return { elements, total, dominant, missing };
        };

        // â­ ä¸»è¨ˆç®—å‡½æ•¸
        const calculateHourLight = (data) => {
            const { year, month, day, lunarMonth, lunarDay, hourId } = data;
            const hourData = getHourData(hourId);
            const hourValue = hourData.num;
            
            // Uæ•¸è™•ç†ï¼šä¿ç•™11ï¼ˆæˆŒæ™‚å¤§å¸«æ•¸ï¼‰
            let uNum = 0;
            if (hourValue > 0) {
                if (hourValue === 11) {
                    uNum = 11;
                } else if (hourValue === 10) {
                    uNum = 1;
                } else if (hourValue === 12) {
                    uNum = 3;
                } else {
                    uNum = hourValue;
                }
            }
            
            // Hæ•¸ï¼šè¾²æ›†æœˆ+æ—¥ï¼Œä¿ç•™å¤§å¸«æ•¸
            const hNum = reduceNumber(parseInt(lunarMonth) + parseInt(lunarDay));
            
            // Oæ•¸ï¼šè¥¿æ›†å…¨åŠ ï¼Œä¿ç•™å¤§å¸«æ•¸
            const oNumRaw = String(year) + String(month).padStart(2, '0') + String(day).padStart(2, '0');
            const oNum = reduceNumber(oNumRaw.split('').reduce((a, b) => parseInt(a) + parseInt(b), 0));
            
            // Ræ•¸ï¼šH+O+Uï¼Œä¿ç•™å¤§å¸«æ•¸
            const rNum = uNum ? reduceNumber(hNum + oNum + uNum) : reduceNumber(hNum + oNum);

            // L.I.G.H.T. äº”èƒ½é‡
            const lNum = parseInt(lunarMonth) > 9 ? reduceNumber(parseInt(lunarMonth)) : parseInt(lunarMonth);
            const iNum = uNum || 5;
            const gNum = reduceNumber(String(year).split('').reduce((a, b) => parseInt(a) + parseInt(b), 0));
            const hEnergyNum = parseInt(lunarDay) > 9 ? reduceNumber(parseInt(lunarDay)) : parseInt(lunarDay);
            const tNum = reduceNumber(lNum + iNum + gNum + hEnergyNum);

            // 12å®®è¨ˆç®—
            const yearStr = String(year);
            const lastTwo = parseInt(yearStr.slice(-2));
            const p2Num = reduceNumber(Math.floor(lastTwo / 10) + (lastTwo % 10));
            const p3Num = parseInt(month) === 11 ? 11 : reduceNumber(parseInt(month));
            const p4Num = [11, 22].includes(parseInt(day)) ? parseInt(day) : reduceNumber(parseInt(day));
            const p5Num = parseInt(lunarMonth) === 11 ? 11 : lNum;
            const p6Num = [11, 22].includes(parseInt(lunarDay)) ? parseInt(lunarDay) : hEnergyNum;
            const p9Num = parseInt(yearStr.charAt(yearStr.length - 3)) || 9;

            const palaces = {
                1: getBaseNum(hNum), 
                2: p2Num, 
                3: p3Num, 
                4: p4Num,
                5: p5Num, 
                6: p6Num, 
                7: getBaseNum(oNum), 
                8: gNum,
                9: p9Num, 
                10: uNum || 5, 
                11: tNum, 
                12: getBaseNum(rNum)
            };

            // æ©‹æ¨‘æ•¸è¨ˆç®—
            const bridgeHO = Math.abs(getBaseNum(hNum) - getBaseNum(oNum));
            const bridgeOU = uNum ? Math.abs(getBaseNum(oNum) - uNum) : 0;
            const bridgeUR = uNum ? Math.abs(uNum - getBaseNum(rNum)) : 0;
            
            // å¹³è¡¡æ•¸è¨ˆç®—
            const balanceNum = Math.round((getBaseNum(hNum) + getBaseNum(oNum)) / 2);

            // æ•¸å­—çµ±è¨ˆ
            const numberCount = {};
            for (let i = 1; i <= 9; i++) numberCount[i] = 0;
            numberCount[11] = 0; numberCount[22] = 0; numberCount[33] = 0;
            
            [hNum, oNum, rNum].forEach(num => {
                if (isMasterNumber(num)) numberCount[num]++;
                else { const r = reduceToSingle(num); if (r >= 1 && r <= 9) numberCount[r]++; }
            });
            
            Object.values(palaces).forEach(num => {
                if (isMasterNumber(num)) numberCount[num]++;
                else { const r = reduceToSingle(num); if (r >= 1 && r <= 9) numberCount[r]++; }
            });

            const hasMasterNumbers = isMasterNumber(hNum) || isMasterNumber(oNum) || isMasterNumber(rNum) || isMasterNumber(uNum);
            const masterNumbersList = [hNum, oNum, uNum, rNum].filter(isMasterNumber);

            // â­ äº”è¡Œèƒ½é‡åˆ†æ
            const elementAnalysis = calculateElements({ h: hNum, o: oNum, u: uNum, r: rNum });

            return {
                inputData: { year, month, day, lunarMonth, lunarDay, hourId, hourValue, hourData },
                hour: { h: hNum, o: oNum, u: uNum, r: rNum },
                light: { l: lNum, i: iNum, g: gNum, h: hEnergyNum, t: tNum },
                palaces,
                bridges: { ho: bridgeHO, ou: bridgeOU, ur: bridgeUR },
                balanceNum,
                elementAnalysis,
                analysis: {
                    numberCount,
                    missingNumbers: Object.entries(numberCount).filter(([n, c]) => c === 0 && parseInt(n) <= 9).map(([n]) => parseInt(n)),
                    excessNumbers: Object.entries(numberCount).filter(([_, c]) => c >= 3).map(([n]) => parseInt(n)),
                    hasMasterNumbers,
                    masterNumbersList
                }
            };
        };

        // è¨ˆç®—æµå¹´
        const calculateYearFortune = (rNum, year) => {
            const universeYear = reduceNumber(String(year).split('').reduce((a, b) => parseInt(a) + parseInt(b), 0));
            const personalYear = reduceNumber(getBaseNum(rNum) + universeYear);
            const yearData = YEAR_THEMES[personalYear] || YEAR_THEMES[reduceToSingle(personalYear)];
            return { universeYear, personalYear, ...yearData };
        };

        // è¨ˆç®—å¤§é‹
        const calculateLifeFortunes = (rNum, birthYear) => {
            const currentYear = new Date().getFullYear();
            const age = currentYear - birthYear;
            const fortunes = [];
            const baseR = getBaseNum(rNum);
            
            for (let i = 1; i <= 8; i++) {
                const startAge = (i - 1) * 10 + 1;
                const endAge = i === 8 ? 'âˆ' : i * 10;
                const fortuneNum = reduceNumber(baseR + i);
                const isCurrent = age >= startAge && (i === 8 || age <= i * 10);
                const themeData = FORTUNE_THEMES[i];
                
                fortunes.push({
                    period: i,
                    ageRange: themeData.age,
                    startYear: birthYear + startAge - 1,
                    endYear: i === 8 ? 'âˆ' : birthYear + i * 10 - 1,
                    num: fortuneNum,
                    theme: themeData.name,
                    desc: themeData.desc,
                    numMeaning: getNumData(fortuneNum)?.title || '',
                    isCurrent,
                    isMaster: isMasterNumber(fortuneNum)
                });
            }
            return fortunes;
        };

        /* ============================================
           Google Sheets è¨˜éŒ„åŠŸèƒ½
           ============================================ */
        const SHEET_URL = 'https://script.google.com/macros/s/AKfycbzlPM5yIuAlrQKbYa01bysqxYo3woLAfp1Tc0Ebk8-W4_3KiUfipUx9Li-10YTw2voIVA/exec';
        
        const logToSheet = (data) => {
            try {
                const params = new URLSearchParams({
                    birthday: `${data.year}-${data.month}-${data.day}`,
                    lunarMonth: data.lunarMonth || '',
                    lunarDay: data.lunarDay || '',
                    hour: data.hourId || 'æœªå¡«',
                    source: 'hourlight-v8.1'
                });
                const img = new Image();
                img.src = SHEET_URL + '?' + params.toString();
            } catch (e) {
                console.log('è¨˜éŒ„å¤±æ•—', e);
            }
        };

        /* ============================================
           UI å…ƒä»¶
           ============================================ */

        // å¤§å¸«æ•¸å¾½ç« 
        const MasterBadge = ({ num }) => {
            if (!isMasterNumber(num)) return null;
            const labels = { 11: 'âœ¨ ç›´è¦ºå¤§å¸«', 22: 'ğŸ›ï¸ å»ºé€ å¤§å¸«', 33: 'ğŸ’• ç™‚ç™’å¤§å¸«' };
            return <span className="master-badge ml-2">{labels[num]}</span>;
        };

        // â­ CTA æŒ‰éˆ•å…ƒä»¶
        const CTAButton = ({ text, subtext, onClick, isNight, pulse = true }) => (
            <div className={`card p-4 text-center ${pulse ? 'cta-pulse' : ''} cursor-pointer hover:scale-[1.02] transition`}
                style={{ background: isNight ? 'linear-gradient(135deg, #4A2C7C 0%, #6B2C91 100%)' : 'linear-gradient(135deg, #D4AF37 0%, #F5E6A3 100%)' }}
                onClick={onClick}>
                <div className={`text-lg font-bold ${isNight ? 'text-white' : 'text-amber-900'}`}>{text}</div>
                {subtext && <div className={`text-sm mt-1 ${isNight ? 'text-purple-200' : 'text-amber-700'}`}>{subtext}</div>}
            </div>
        );

        // â­ äº”è¡Œèƒ½é‡æ¢å…ƒä»¶
        const ElementBar = ({ element, count, total, isNight }) => {
            const colors = ELEMENT_COLORS[element];
            const percentage = total > 0 ? (count / total) * 100 : 0;
            const status = count === 0 ? 'missing' : count >= 2 ? 'dominant' : 'normal';
            
            return (
                <div className="mb-2">
                    <div className="flex justify-between items-center mb-1">
                        <span className="text-sm font-bold">{colors.label}</span>
                        <span className={`text-xs px-2 py-0.5 rounded ${
                            status === 'missing' ? 'bg-red-100 text-red-600' :
                            status === 'dominant' ? 'bg-green-100 text-green-600' :
                            'bg-gray-100 text-gray-600'
                        }`}>
                            {count}å€‹ {status === 'missing' ? 'âš ï¸ç©ºç¼º' : status === 'dominant' ? 'âœ¨å¼·å‹¢' : ''}
                        </span>
                    </div>
                    <div className={`element-bar ${isNight ? 'bg-gray-700' : 'bg-gray-200'}`}>
                        <div className={`element-fill ${colors.bar}`} style={{ width: `${Math.max(percentage, 5)}%` }}>
                            {count > 0 && count}
                        </div>
                    </div>
                </div>
            );
        };

        // â­ äº”è¡Œåˆ†æå¡ç‰‡
        const ElementAnalysisCard = ({ elementAnalysis, isNight, onCTAClick }) => {
            const { elements, dominant, missing } = elementAnalysis;
            
            const elementOils = {
                wood: { oils: 'çµ²æŸã€æœæ¾ã€èŒ¶æ¨¹', practice: 'ç·´ç¿’ä¸»å‹•å‡ºæ“Šã€è¡¨é”è‡ªæˆ‘' },
                fire: { oils: 'ç”œæ©™ã€è‘¡è„æŸšã€è–‘', practice: 'ç·´ç¿’ç†±æƒ…è¡¨é”ã€ç¤¾äº¤äº’å‹•' },
                earth: { oils: 'å»£è—¿é¦™ã€å²©è˜­è‰ã€å®‰æ¯é¦™', practice: 'ç·´ç¿’è…³è¸å¯¦åœ°ã€å»ºç«‹ç©©å®š' },
                metal: { oils: 'å°¤åŠ åˆ©ã€è–„è·ã€ç™½åƒå±¤', practice: 'ç·´ç¿’è¨­ç«‹ç•Œç·šã€æ¸…æ™°è¡¨é”' },
                water: { oils: 'è–°è¡£è‰ã€æ´‹ç”˜èŠã€æª€é¦™', practice: 'ç·´ç¿’æ„Ÿå—æƒ…ç·’ã€æ¥ç´æµå‹•' }
            };
            
            return (
                <div className="card p-6">
                    <h4 className="font-bold gold-text text-lg mb-4 flex items-center gap-2">
                        ğŸŒ¿ äº”è¡Œèƒ½é‡åˆ†æ
                        <span className="text-xs opacity-50 font-normal">ï¼ˆH.O.U.R.å››ä¸»æ•¸ï¼‰</span>
                    </h4>
                    
                    {/* äº”è¡Œé•·æ¢åœ– */}
                    <div className="mb-4">
                        {['wood', 'fire', 'earth', 'metal', 'water'].map(elem => (
                            <ElementBar 
                                key={elem} 
                                element={elem} 
                                count={elements[elem]} 
                                total={Object.values(elements).reduce((a,b) => a+b, 0)}
                                isNight={isNight}
                            />
                        ))}
                    </div>
                    
                    {/* ç©ºç¼ºäº”è¡Œè­¦ç¤º */}
                    {missing.length > 0 && (
                        <div className={`p-4 rounded-lg mb-4 ${isNight ? 'bg-red-900/30' : 'bg-red-50'}`}>
                            <div className="font-bold text-red-500 mb-2">âš ï¸ ç©ºç¼ºèƒ½é‡è­¦ç¤º</div>
                            <div className="space-y-2">
                                {missing.map(elem => (
                                    <div key={elem} className="text-sm">
                                        <span className="font-bold">{ELEMENT_COLORS[elem].label}èƒ½é‡ç©ºç¼º</span>
                                        <span className="opacity-70 ml-2">â†’ {elementOils[elem].practice}</span>
                                    </div>
                                ))}
                            </div>
                            <div className="text-xs opacity-50 mt-2">æ¨è–¦ç²¾æ²¹ï¼š{missing.map(e => elementOils[e].oils).join('ã€')}</div>
                        </div>
                    )}
                    
                    {/* å¼·å‹¢äº”è¡Œ */}
                    {dominant.length > 0 && (
                        <div className={`p-3 rounded-lg mb-4 ${isNight ? 'bg-green-900/30' : 'bg-green-50'}`}>
                            <div className="text-sm">
                                <span className="font-bold text-green-600">âœ¨ å¼·å‹¢èƒ½é‡ï¼š</span>
                                {dominant.map(e => ELEMENT_COLORS[e].label).join('ã€')}
                                <span className="opacity-70 ml-2">â€” é€™æ˜¯ä½ çš„å¤©è³¦èƒ½é‡</span>
                            </div>
                        </div>
                    )}
                    
                    {/* CTA */}
                    <div className={`p-4 rounded-lg text-center ${isNight ? 'bg-purple-900/30' : 'bg-amber-50'} border-2 border-dashed ${isNight ? 'border-purple-500' : 'border-amber-400'}`}>
                        <div className="text-sm opacity-70 mb-2">æƒ³çŸ¥é“å¦‚ä½•è£œè¶³ç©ºç¼ºèƒ½é‡ï¼Ÿ</div>
                        <button onClick={onCTAClick} className="gold-btn px-6 py-2 rounded-lg text-sm">
                            ğŸ”® å–å¾—å€‹äººåŒ–ç²¾æ²¹è™•æ–¹
                        </button>
                    </div>
                </div>
            );
        };

        // â­ å¿ƒç†å­¸æç¤ºå¡ç‰‡ï¼ˆéŠ·å”®æ¼æ–—ç‰ˆï¼‰
        const PsychologyHintCard = ({ num, label, isNight, onCTAClick }) => {
            const psych = getPsychData(num);
            if (!psych) return null;
            
            return (
                <div className={`p-3 rounded-lg ${isNight ? 'bg-purple-900/20' : 'bg-purple-50'} border ${isNight ? 'border-purple-700' : 'border-purple-200'}`}>
                    <div className="flex items-center justify-between mb-2">
                        <span className="text-xs opacity-60">{label}æ•¸çš„å¿ƒç†æ¨¡å¼</span>
                        <span className="text-xs px-2 py-0.5 rounded bg-purple-200 text-purple-700">ğŸ§  ä½›æ´›ä¼Šå¾·</span>
                    </div>
                    <div className="font-bold text-purple-600 mb-1">é˜²è¡›æ©Ÿåˆ¶ï¼š{psych.defense}</div>
                    <div className="text-sm opacity-70 mb-2">ã€Œ{psych.pattern}ã€</div>
                    
                    {/* é–ä½çš„å…§å®¹é è¦½ */}
                    <div className="locked-content relative">
                        <div className="text-xs opacity-50">
                            <div>æ·±å±¤ææ‡¼ï¼š{psych.shadow}</div>
                            <div className="blur-sm">è§£é–æ–¹å‘ï¼š{psych.unlock}</div>
                            <div className="blur-sm">èªçŸ¥æ‰­æ›²æ¨¡å¼ï¼š...</div>
                        </div>
                    </div>
                    
                    <button onClick={onCTAClick} className="w-full mt-2 text-xs text-purple-600 hover:text-purple-800 font-bold">
                        ğŸ”“ è§£é–å®Œæ•´å¿ƒç†åˆ†æ â†’
                    </button>
                </div>
            );
        };

        // é›·é”åœ–
        const RadarChart = ({ data, isNight }) => {
            const chartRef = useRef(null);
            const chartInstance = useRef(null);

            useEffect(() => {
                if (!chartRef.current) return;
                if (chartInstance.current) chartInstance.current.destroy();

                const ctx = chartRef.current.getContext('2d');
                const color = isNight ? 'rgba(159, 95, 219, ' : 'rgba(212, 175, 55, ';

                chartInstance.current = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['L æ„›ä¹‹åŠ›', 'I ç›´è¦ºåŠ›', 'G æ ¹åŸºåŠ›', 'H å’Œè«§åŠ›', 'T è›»è®ŠåŠ›'],
                        datasets: [{
                            data: [data.l, data.i, data.g, data.h, data.t],
                            backgroundColor: color + '0.25)',
                            borderColor: color + '1)',
                            pointBackgroundColor: color + '1)',
                            borderWidth: 2, pointRadius: 5
                        }]
                    },
                    options: {
                        scales: { r: { suggestedMin: 0, suggestedMax: 9, ticks: { display: false } } },
                        plugins: { legend: { display: false } }
                    }
                });
            }, [data, isNight]);

            return <canvas ref={chartRef} />;
        };

        // è¼¸å…¥è¡¨å–®
        const InputForm = ({ onCalculate, title, showName = false, nameLabel = 'å§“å' }) => {
            const [formData, setFormData] = useState({
                name: '', year: '', month: '1', day: '1', lunarMonth: '', lunarDay: '', hourId: ''
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!formData.year || !formData.lunarMonth || !formData.lunarDay) {
                    alert('è«‹å¡«å¯«å®Œæ•´è³‡æ–™ï¼ˆè¥¿å…ƒå¹´ã€è¾²æ›†æœˆã€è¾²æ›†æ—¥ï¼‰');
                    return;
                }
                logToSheet(formData);
                onCalculate(formData);
            };

            return (
                <div className="card p-6 fade-in">
                    {title && <h3 className="text-xl font-bold gold-text mb-4 serif">{title}</h3>}
                    <form onSubmit={handleSubmit} className="space-y-4">
                        {showName && (
                            <input 
                                type="text" placeholder={nameLabel}
                                className="w-full p-3 border rounded-lg bg-white/80 text-gray-800"
                                value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})}
                            />
                        )}
                        <div className="grid grid-cols-3 gap-2">
                            <input type="number" placeholder="è¥¿å…ƒå¹´" className="p-3 border rounded-lg bg-white/80 text-gray-800"
                                value={formData.year} onChange={e => setFormData({...formData, year: e.target.value})} min="1900" max="2030" />
                            <select className="p-3 border rounded-lg bg-white/80 text-gray-800" value={formData.month}
                                onChange={e => setFormData({...formData, month: e.target.value})}>
                                {Array.from({length: 12}, (_, i) => <option key={i+1} value={i+1}>{i+1}æœˆ</option>)}
                            </select>
                            <select className="p-3 border rounded-lg bg-white/80 text-gray-800" value={formData.day}
                                onChange={e => setFormData({...formData, day: e.target.value})}>
                                {Array.from({length: 31}, (_, i) => <option key={i+1} value={i+1}>{i+1}æ—¥</option>)}
                            </select>
                        </div>
                        <div className="grid grid-cols-2 gap-2">
                            <select className="p-3 border rounded-lg bg-white/80 text-gray-800" value={formData.lunarMonth}
                                onChange={e => setFormData({...formData, lunarMonth: e.target.value})}>
                                <option value="">è¾²æ›†æœˆ</option>
                                {Array.from({length: 12}, (_, i) => <option key={i+1} value={i+1}>{['æ­£','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹','å','åä¸€','åäºŒ'][i]}æœˆ</option>)}
                            </select>
                            <select className="p-3 border rounded-lg bg-white/80 text-gray-800" value={formData.lunarDay}
                                onChange={e => setFormData({...formData, lunarDay: e.target.value})}>
                                <option value="">è¾²æ›†æ—¥</option>
                                {Array.from({length: 30}, (_, i) => {
                                    const d = i + 1;
                                    const label = d <= 10 ? 'åˆ' + ['ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹','å'][d-1] :
                                                  d < 20 ? 'å' + ['ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹'][d-11] :
                                                  d === 20 ? 'äºŒå' : d < 30 ? 'å»¿' + ['ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹'][d-21] : 'ä¸‰å';
                                    return <option key={d} value={d}>{label}</option>;
                                })}
                            </select>
                        </div>
                        <select className="w-full p-3 border rounded-lg bg-white/80 text-gray-800" value={formData.hourId}
                            onChange={e => setFormData({...formData, hourId: e.target.value})}>
                            <option value="">æ™‚è¾°ï¼ˆé¸å¡«ï¼‰</option>
                            {HOURS.slice(0, 12).map(h => <option key={h.id} value={h.id}>{h.name}</option>)}
                            <option value="unknown">æ™‚è¾°ä¸è©³</option>
                        </select>
                        <button type="submit" className="w-full gold-btn py-3 rounded-lg">é–‹å§‹è¨ˆç®—</button>
                    </form>
                </div>
            );
        };

        // â­ æ•¸å­—æ·±åº¦è§£è®€å¡ç‰‡ï¼ˆå«äº”è¡Œï¼‹å¿ƒç†å­¸æç¤ºï¼‰
        const NumberDeepCard = ({ num, label, subLabel, isNight, showFull = false, onCTAClick }) => {
            const [isOpen, setIsOpen] = useState(false);
            const data = getNumData(num);
            const elemData = getElementData(num);
            if (!data) return null;

            return (
                <div className={`card p-4 ${isMasterNumber(num) ? (isNight ? 'ring-2 ring-purple-400' : 'ring-2 ring-amber-400') : ''}`}>
                    <div className="flex justify-between items-start mb-2">
                        <div>
                            <div className="text-xs opacity-60">{label}</div>
                            <div className="text-xs opacity-40">{subLabel}</div>
                        </div>
                        <div className="text-right">
                            <div className="text-4xl font-bold gold-text">{num || 'â€”'}</div>
                            {isMasterNumber(num) && <MasterBadge num={num} />}
                        </div>
                    </div>
                    
                    {/* äº”è¡Œæ¨™ç±¤ */}
                    {elemData && (
                        <div className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs mb-2 ${ELEMENT_COLORS[elemData.element].bg} ${ELEMENT_COLORS[elemData.element].text}`}>
                            <span>{elemData.icon}</span>
                            <span>{elemData.name}</span>
                        </div>
                    )}
                    
                    <div className="text-lg font-bold mb-1">{data.title}</div>
                    <div className="text-sm opacity-70 mb-2">{data.essence}</div>
                    
                    {showFull && (
                        <>
                            <button onClick={() => setIsOpen(!isOpen)} className="text-xs gold-text hover:underline">
                                {isOpen ? 'æ”¶åˆ â–²' : 'å±•é–‹è§£è®€ â–¼'}
                            </button>
                            <div className={`detail-panel ${isOpen ? 'open' : ''}`}>
                                <div className="mt-3 pt-3 border-t border-current/10 space-y-3 text-sm">
                                    <div>
                                        <span className="font-bold text-green-600">âœ¨ å…‰æ˜é¢ï¼š</span>
                                        <span className="opacity-80">{data.light}</span>
                                    </div>
                                    <div>
                                        <span className="font-bold text-red-500">âš ï¸ é™°æš—é¢ï¼š</span>
                                        <span className="opacity-80">{data.dark}</span>
                                    </div>
                                    <div>
                                        <span className="font-bold gold-text">ğŸ¯ éˆé­‚åŠŸèª²ï¼š</span>
                                        <span className="opacity-80">{data.soulLesson}</span>
                                    </div>
                                    
                                    {/* å¿ƒç†å­¸æç¤º */}
                                    <PsychologyHintCard num={num} label={label} isNight={isNight} onCTAClick={onCTAClick} />
                                    
                                    <div className={`p-3 rounded-lg ${isNight ? 'bg-purple-900/30' : 'bg-amber-50'}`}>
                                        <div className="font-bold mb-1">ğŸ’ é¦¥éˆç¨å‰µè§£è®€</div>
                                        <p className="opacity-80 italic">{data.uniqueReading}</p>
                                    </div>
                                    <div>
                                        <span className="font-bold">ğŸŒ¿ èª¿é »ç²¾æ²¹ï¼š</span>
                                        <span className="opacity-70">{data.oils?.join('ã€')}</span>
                                    </div>
                                </div>
                            </div>
                        </>
                    )}
                </div>
            );
        };

        // å®®ä½æ·±åº¦è§£è®€å¡ç‰‡
        const PalaceDeepCard = ({ palaceId, palaceNum, isNight }) => {
            const [isOpen, setIsOpen] = useState(false);
            const palace = PALACE_DATA[palaceId];
            if (!palace) return null;

            return (
                <div className="card p-4 hover:scale-[1.02] transition cursor-pointer" onClick={() => setIsOpen(!isOpen)}>
                    <div className="flex justify-between items-start mb-2">
                        <div>
                            <div className="text-xs opacity-50">{palaceId}å®®ãƒ»{palace.meridian}</div>
                            <div className="text-xs opacity-40">{palace.time}</div>
                        </div>
                        <div className="text-2xl font-bold gold-text">{palaceNum}</div>
                    </div>
                    <div className="font-bold mb-1">{palace.name}</div>
                    <div className="text-xs opacity-70 mb-2">ã€Œ{palace.theme}ã€</div>
                    
                    <div className={`detail-panel ${isOpen ? 'open' : ''}`}>
                        <div className="mt-3 pt-3 border-t border-current/10 space-y-2 text-xs">
                            <div>
                                <span className="text-red-500">é™°æš—ï¼š</span>{palace.darkEmotion}
                            </div>
                            <div>
                                <span className="text-green-500">å…‰æ˜ï¼š</span>{palace.lightEmotion}
                            </div>
                            <div className="opacity-70">
                                <div className="font-bold mb-1">å¡ä½çš„äººæœƒï¼š</div>
                                <ul className="list-disc list-inside">
                                    {palace.stuckPattern.slice(0, 2).map((p, i) => <li key={i}>{p}</li>)}
                                </ul>
                            </div>
                            <div>
                                <span className="opacity-50">ğŸŒ¿ èª¿é »ç²¾æ²¹ï¼š</span>{palace.oils.join('ã€')}
                            </div>
                        </div>
                    </div>
                    <div className="text-xs opacity-40 mt-1">{isOpen ? 'é»æ“Šæ”¶åˆ â–²' : 'é»æ“Šå±•é–‹ â–¼'}</div>
                </div>
            );
        };

        /* ============================================
           ä¸»è¦åŠŸèƒ½é é¢
           ============================================ */

        // åŸºç¤å‘½ç›¤é 
        const BasicPage = ({ result, setResult, isNight, onShowConsult }) => {
            if (!result) {
                return (
                    <div className="max-w-xl mx-auto">
                        <div className="text-center mb-8">
                            <h2 className="text-3xl font-bold gold-text serif">é–‹å•Ÿä½ çš„å…§åœ¨åŸå ¡</h2>
                            <p className="text-sm mt-2 opacity-60">è¼¸å…¥å‡ºç”Ÿè³‡æ–™ï¼Œæ‰¾åˆ°ä½ çš„ç”Ÿå‘½å¯†ç¢¼</p>
                        </div>
                        <InputForm onCalculate={(data) => setResult(calculateHourLight(data))} />
                        
                        {/* å…è²»èªªæ˜ */}
                        <div className="text-center mt-6 text-sm opacity-60">
                            <p>âœ¨ å…è²»å–å¾—åŸºç¤å‘½ç›¤åˆ†æ</p>
                            <p>ğŸ“Š åŒ…å«H.O.U.R.å››ä¸»æ•¸ï¼‹äº”è¡Œèƒ½é‡ï¼‹12å®®ä½</p>
                        </div>
                    </div>
                );
            }

            const { hour, light, palaces, bridges, balanceNum, analysis, inputData, elementAnalysis } = result;

            return (
                <div className="space-y-8 fade-in">
                    {/* å¤§å¸«æ•¸æç¤º */}
                    {analysis.hasMasterNumbers && (
                        <section className={`card p-6 text-center ${isNight ? 'bg-gradient-to-r from-purple-900/50 to-pink-900/50' : 'bg-gradient-to-r from-amber-100 to-yellow-100'}`}>
                            <div className="text-4xl mb-3">âœ¨</div>
                            <h3 className="text-2xl font-bold gold-text serif mb-2">ä½ æ“æœ‰å¤§å¸«æ•¸ï¼</h3>
                            <p className="opacity-80 mb-3">é€™ä»£è¡¨ä½ èƒŒè² è‘—ç‰¹æ®Šçš„éˆæ€§ä½¿å‘½ï¼Œä½†ä¹Ÿé¢è‡¨æ›´å¤§çš„æŒ‘æˆ°ã€‚</p>
                            <div className="flex justify-center gap-3 flex-wrap">
                                {analysis.masterNumbersList.map(n => (
                                    <div key={n} className="px-4 py-2 rounded-lg bg-white/20">
                                        <span className="text-2xl font-bold gold-text">{n}</span>
                                        <span className="ml-2">{getNumData(n)?.title}</span>
                                    </div>
                                ))}
                            </div>
                        </section>
                    )}

                    {/* H.O.U.R. å››ä¸»æ•¸ */}
                    <section>
                        <h3 className="text-2xl font-bold gold-text mb-4 pl-4 border-l-4 border-current serif">ğŸ”‘ H.O.U.R. å››ä¸»æ•¸</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <NumberDeepCard num={hour.h} label="H ç™’æ•¸" subLabel="å…§åœ¨éœ€æ±‚ãƒ»è¾²æ›†æœˆæ—¥" isNight={isNight} showFull={true} onCTAClick={onShowConsult} />
                            <NumberDeepCard num={hour.o} label="O è­˜æ•¸" subLabel="å¤–åœ¨å‘ˆç¾ãƒ»è¥¿æ›†å…¨åŠ " isNight={isNight} showFull={true} onCTAClick={onShowConsult} />
                            <NumberDeepCard num={hour.u} label="U è§£æ•¸" subLabel="éš±è—æ½›èƒ½ãƒ»æ™‚è¾°" isNight={isNight} showFull={true} onCTAClick={onShowConsult} />
                            <NumberDeepCard num={hour.r} label="R è¡Œæ•¸" subLabel="äººç”Ÿä½¿å‘½ãƒ»H+O+U" isNight={isNight} showFull={true} onCTAClick={onShowConsult} />
                        </div>
                    </section>

                    {/* â­ äº”è¡Œèƒ½é‡åˆ†æï¼ˆæ–°å¢ï¼‰ */}
                    <section>
                        <ElementAnalysisCard elementAnalysis={elementAnalysis} isNight={isNight} onCTAClick={onShowConsult} />
                    </section>

                    {/* æ©‹æ¨‘æ•¸èˆ‡å¹³è¡¡æ•¸ */}
                    <section className="card p-6">
                        <h4 className="font-bold gold-text mb-3">ğŸŒ‰ æ©‹æ¨‘æ•¸èˆ‡å¹³è¡¡æ•¸</h4>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                            <div>
                                <div className="text-xs opacity-50">H-Oæ©‹æ¨‘</div>
                                <div className="text-2xl font-bold gold-text">{bridges.ho}</div>
                                <div className="text-xs opacity-60">å…§å¤–æ•´åˆ</div>
                            </div>
                            <div>
                                <div className="text-xs opacity-50">O-Uæ©‹æ¨‘</div>
                                <div className="text-2xl font-bold gold-text">{bridges.ou || 'â€”'}</div>
                                <div className="text-xs opacity-60">é¡¯æ½›é€£çµ</div>
                            </div>
                            <div>
                                <div className="text-xs opacity-50">U-Ræ©‹æ¨‘</div>
                                <div className="text-2xl font-bold gold-text">{bridges.ur || 'â€”'}</div>
                                <div className="text-xs opacity-60">æ½›èƒ½å¯¦ç¾</div>
                            </div>
                            <div>
                                <div className="text-xs opacity-50">å¹³è¡¡æ•¸</div>
                                <div className="text-2xl font-bold gold-text">{balanceNum}</div>
                                <div className="text-xs opacity-60">å±æ©Ÿèª¿æ•´</div>
                            </div>
                        </div>
                        
                        {/* æ©‹æ¨‘æ•¸CTA */}
                        {bridges.ho > 3 && (
                            <div className={`mt-4 p-3 rounded-lg text-center ${isNight ? 'bg-orange-900/30' : 'bg-orange-50'}`}>
                                <div className="text-sm text-orange-600 font-bold">âš ï¸ ä½ çš„H-Oæ©‹æ¨‘æ•¸è¼ƒé«˜ï¼ˆ{bridges.ho}ï¼‰</div>
                                <div className="text-xs opacity-70 mt-1">å…§åœ¨éœ€æ±‚èˆ‡å¤–åœ¨è¡¨ç¾æœ‰è½å·®ï¼Œå®¹æ˜“æ„Ÿåˆ°ç–²ç´¯</div>
                                <button onClick={onShowConsult} className="text-xs text-orange-600 font-bold mt-2 hover:underline">
                                    äº†è§£å¦‚ä½•æ•´åˆå…§å¤–èƒ½é‡ â†’
                                </button>
                            </div>
                        )}
                    </section>

                    {/* L.I.G.H.T. äº”èƒ½é‡ */}
                    <section className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <h3 className="text-2xl font-bold gold-text mb-4 pl-4 border-l-4 border-current serif">âœ¨ L.I.G.H.T. äº”èƒ½é‡</h3>
                            <div className="card p-6">
                                <div className="aspect-square max-w-xs mx-auto">
                                    <RadarChart data={light} isNight={isNight} />
                                </div>
                            </div>
                        </div>
                        <div className="space-y-2">
                            {[
                                { k: 'l', n: 'L æ„›ä¹‹åŠ›', d: 'è‡ªæˆ‘æ¥ç´ã€çµ¦äºˆèˆ‡æ¥å—æ„›çš„èƒ½åŠ›' },
                                { k: 'i', n: 'I ç›´è¦ºåŠ›', d: 'å…§åœ¨æ™ºæ…§ã€ç¬¬å…­æ„Ÿ' },
                                { k: 'g', n: 'G æ ¹åŸºåŠ›', d: 'å®‰å…¨æ„Ÿã€ç©©å®šã€ç´®æ ¹' },
                                { k: 'h', n: 'H å’Œè«§åŠ›', d: 'é—œä¿‚ã€é€£çµã€å…±æŒ¯' },
                                { k: 't', n: 'T è›»è®ŠåŠ›', d: 'è½‰åŒ–ã€æˆé•·ã€ç ´ç¹­' }
                            ].map(item => {
                                const v = light[item.k];
                                const level = v <= 3 ? 'weak' : v <= 6 ? 'medium' : 'strong';
                                return (
                                    <div key={item.k} className={`card p-3 ${level === 'weak' ? (isNight ? 'bg-red-900/30' : 'bg-red-50') : level === 'medium' ? (isNight ? 'bg-yellow-900/30' : 'bg-yellow-50') : (isNight ? 'bg-green-900/30' : 'bg-green-50')}`}>
                                        <div className="flex justify-between items-center">
                                            <div>
                                                <span className="font-bold">{item.n}</span>
                                                <div className="text-xs opacity-60">{item.d}</div>
                                            </div>
                                            <div className="flex items-center gap-2">
                                                <span className="text-2xl font-bold gold-text">{v}</span>
                                                <span className={`text-xs px-2 py-1 rounded ${level === 'weak' ? 'bg-red-200 text-red-700' : level === 'medium' ? 'bg-yellow-200 text-yellow-700' : 'bg-green-200 text-green-700'}`}>
                                                    {level === 'weak' ? 'éœ€åŸ¹é¤Š' : level === 'medium' ? 'ä¸­ç­‰' : 'å¤©è³¦'}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </section>

                    {/* ç©ºç¼ºæ•¸èˆ‡éå¤šæ•¸ */}
                    {(analysis.missingNumbers.length > 0 || analysis.excessNumbers.length > 0) && (
                        <section className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {analysis.missingNumbers.length > 0 && (
                                <div className={`card p-6 ${isNight ? 'bg-red-900/20' : 'bg-red-50'}`}>
                                    <h4 className="font-bold text-red-600 mb-3">âš ï¸ ç©ºç¼ºæ•¸å­— â€” éœ€è¦å­¸ç¿’çš„èª²é¡Œ</h4>
                                    <div className="space-y-2">
                                        {analysis.missingNumbers.slice(0, 3).map(n => (
                                            <div key={n} className="flex items-center gap-2">
                                                <span className="text-2xl font-bold text-red-500">{n}</span>
                                                <span className="text-sm">{NUMBER_DATA[n]?.title} â€” {NUMBER_DATA[n]?.essence}</span>
                                            </div>
                                        ))}
                                    </div>
                                    {analysis.missingNumbers.length > 3 && (
                                        <button onClick={onShowConsult} className="text-xs text-red-600 font-bold mt-3 hover:underline">
                                            æŸ¥çœ‹å®Œæ•´ç©ºç¼ºæ•¸å­—åˆ†æï¼ˆ{analysis.missingNumbers.length}å€‹ï¼‰â†’
                                        </button>
                                    )}
                                </div>
                            )}
                            {analysis.excessNumbers.length > 0 && (
                                <div className={`card p-6 ${isNight ? 'bg-amber-900/20' : 'bg-amber-50'}`}>
                                    <h4 className="font-bold text-amber-600 mb-3">âš¡ é‡è¤‡æ•¸å­— â€” å¼·åŒ–çš„èƒ½é‡</h4>
                                    <div className="space-y-2">
                                        {analysis.excessNumbers.map(n => (
                                            <div key={n} className="flex items-center gap-2">
                                                <span className="text-2xl font-bold text-amber-500">{n}</span>
                                                <span className="text-sm">{NUMBER_DATA[n]?.title} â€” èƒ½é‡å¼·ä½†è¦æ³¨æ„éåº¦</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </section>
                    )}

                    {/* 12å®®ä½ */}
                    <section>
                        <h3 className="text-2xl font-bold gold-text mb-4 pl-4 border-l-4 border-current serif">ğŸ° 12å®®ä½ãƒ»å…§åœ¨åŸå ¡</h3>
                        <p className="text-sm opacity-60 mb-4">é»æ“Šä»»ä¸€å®®ä½å¡ç‰‡å¯å±•é–‹è©³ç´°è§£è®€</p>
                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                            {Object.keys(PALACE_DATA).map(id => (
                                <PalaceDeepCard key={id} palaceId={parseInt(id)} palaceNum={palaces[id]} isNight={isNight} />
                            ))}
                        </div>
                        
                        {/* 12å®®ä½ CTA */}
                        <div className={`card p-6 mt-4 text-center ${isNight ? 'bg-gradient-to-r from-purple-900/50 to-pink-900/30' : 'bg-gradient-to-r from-amber-50 to-yellow-50'}`}>
                            <div className="text-lg font-bold gold-text mb-2">ğŸ”® æƒ³è¦12å®®ä½å®Œæ•´æ·±åº¦è§£è®€ï¼Ÿ</div>
                            <p className="text-sm opacity-70 mb-3">åŒ…å«æ¯å®®3000å­—è§£æã€éˆé­‚æå•ã€è¡Œå‹•æ–¹æ¡ˆã€ç²¾æ²¹è™•æ–¹</p>
                            <button onClick={onShowConsult} className="gold-btn px-8 py-3 rounded-lg">
                                å–å¾—å®Œæ•´12å®®å ±å‘Šæ›¸
                            </button>
                        </div>
                    </section>

                    {/* è¤‡è£½å ±å‘Šï¼ˆç°¡åŒ–ç‰ˆï¼‰ */}
                    <div className="text-center">
                        <button onClick={() => {
                            const text = `ã€é¦¥éˆç§˜ç¢¼åŸºç¤å ±å‘Šã€‘

Hæ•¸ï¼š${hour.h}ï¼ˆ${getNumData(hour.h)?.title}ï¼‰
Oæ•¸ï¼š${hour.o}ï¼ˆ${getNumData(hour.o)?.title}ï¼‰
Uæ•¸ï¼š${hour.u || 'â€”'}ï¼ˆ${hour.u ? getNumData(hour.u)?.title : 'æ™‚è¾°ä¸è©³'}ï¼‰
Ræ•¸ï¼š${hour.r}ï¼ˆ${getNumData(hour.r)?.title}ï¼‰

äº”è¡Œèƒ½é‡ï¼š
æœ¨${elementAnalysis.elements.wood} ç«${elementAnalysis.elements.fire} åœŸ${elementAnalysis.elements.earth} é‡‘${elementAnalysis.elements.metal} æ°´${elementAnalysis.elements.water}
${elementAnalysis.missing.length > 0 ? 'ç©ºç¼ºï¼š' + elementAnalysis.missing.map(e => ELEMENT_COLORS[e].label).join('ã€') : 'äº”è¡Œå¹³è¡¡'}

â€”â€” é¦¥éˆç§˜ç¢¼ Hour Light v8.1 â€”â€”
ğŸ”® å®Œæ•´è§£è®€è«‹æ´½ï¼šhttps://line.me/ti/p/~judyanee`;
                            navigator.clipboard.writeText(text);
                            alert('åŸºç¤å ±å‘Šå·²è¤‡è£½ï¼');
                        }} className="gold-btn px-8 py-3 rounded-lg text-lg">
                            ğŸ“‹ è¤‡è£½åŸºç¤å ±å‘Š
                        </button>
                    </div>
                </div>
            );
        };

        // æµå¹´é 
        const YearFortunePage = ({ result, isNight, onShowConsult }) => {
            const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());
            const currentYear = new Date().getFullYear();
            
            if (!result) return <div className="text-center py-20 opacity-60">è«‹å…ˆåœ¨ã€ŒåŸºç¤å‘½ç›¤ã€è¨ˆç®—ä½ çš„æ•¸æ“š</div>;

            const fortune = calculateYearFortune(result.hour.r, selectedYear);
            const palaceData = PALACE_DATA[fortune.personalYear] || PALACE_DATA[reduceToSingle(fortune.personalYear)];

            return (
                <div className="max-w-2xl mx-auto space-y-6 fade-in">
                    <div className="card p-6">
                        <h3 className="text-xl font-bold gold-text mb-4 serif">ğŸ—“ï¸ é¸æ“‡å¹´ä»½</h3>
                        <div className="flex gap-2 flex-wrap">
                            {[currentYear - 1, currentYear, currentYear + 1, currentYear + 2].map(y => (
                                <button key={y} onClick={() => setSelectedYear(y)}
                                    className={`px-4 py-2 rounded-lg transition ${selectedYear === y ? 'gold-btn' : 'bg-gray-100 hover:bg-gray-200 text-gray-700'}`}>
                                    {y}å¹´
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className={`card p-8 text-center ${isNight ? 'bg-gradient-to-br from-purple-900/50 to-pink-900/30' : 'bg-gradient-to-br from-amber-50 to-orange-50'}`}>
                        <div className="text-sm opacity-60">{selectedYear}å¹´ æµå¹´æ•¸</div>
                        <div className="text-7xl font-bold gold-text my-4">
                            {fortune.personalYear}
                            {isMasterNumber(fortune.personalYear) && <MasterBadge num={fortune.personalYear} />}
                        </div>
                        <div className="text-3xl font-bold serif">{fortune.keyword}å¹´</div>
                        <div className="text-lg mt-2 opacity-80">{fortune.theme}</div>
                    </div>

                    <div className={`card p-6 ${isNight ? 'bg-gradient-to-r from-amber-900/30 to-orange-900/20' : 'bg-gradient-to-r from-amber-50 to-yellow-50'}`}>
                        <h4 className="font-bold gold-text text-lg mb-3">ğŸ¯ å¹´åº¦èšç„¦</h4>
                        <p className="text-lg italic opacity-80">{fortune.focus}</p>
                    </div>

                    <div className="card p-6">
                        <h4 className="font-bold mb-3">ğŸ“ å¹´åº¦èšç„¦å®®ä½ï¼š{fortune.palace}</h4>
                        {palaceData && (
                            <div className="space-y-2 text-sm">
                                <p><span className="font-bold">ç¶“çµ¡ï¼š</span>{palaceData.meridian}ï¼ˆ{palaceData.time}ï¼‰</p>
                                <p><span className="font-bold">éˆé­‚æå•ï¼š</span>{palaceData.theme}</p>
                                <p><span className="text-red-500">é™°æš—é¢ï¼š</span>{palaceData.darkEmotion}</p>
                                <p><span className="text-green-500">å…‰æ˜é¢ï¼š</span>{palaceData.lightEmotion}</p>
                            </div>
                        )}
                    </div>

                    <div className="card p-6">
                        <h4 className="font-bold mb-3">ğŸ’¡ å¹´åº¦å»ºè­°</h4>
                        <p className="text-lg">{fortune.advice}</p>
                        <div className="mt-4 p-4 rounded-lg bg-gray-100 dark:bg-gray-800">
                            <p className="text-sm opacity-70">
                                ğŸŒ¿ èª¿é »ç²¾æ²¹ï¼š{palaceData?.oils?.join('ã€') || getNumData(fortune.personalYear)?.oils?.join('ã€')}
                            </p>
                        </div>
                    </div>
                    
                    {/* æµå¹´ CTA */}
                    <div className={`card p-6 text-center ${isNight ? 'bg-gradient-to-r from-purple-900/50 to-pink-900/30' : 'bg-gradient-to-r from-amber-50 to-yellow-50'}`}>
                        <div className="text-lg font-bold gold-text mb-2">ğŸ”® æƒ³çŸ¥é“{selectedYear}å¹´æ¯æœˆé‹å‹¢ï¼Ÿ</div>
                        <p className="text-sm opacity-70 mb-3">åŒ…å«12å€‹æœˆè©³ç´°é æ¸¬ã€é—œéµæ™‚é–“é»ã€è¡Œå‹•å»ºè­°</p>
                        <button onClick={onShowConsult} className="gold-btn px-8 py-3 rounded-lg">
                            å–å¾—{selectedYear}å¹´åº¦å®Œæ•´å ±å‘Š
                        </button>
                    </div>
                </div>
            );
        };

        // å¤§é‹é 
        const LifeFortunePage = ({ result, isNight, onShowConsult }) => {
            if (!result) return <div className="text-center py-20 opacity-60">è«‹å…ˆåœ¨ã€ŒåŸºç¤å‘½ç›¤ã€è¨ˆç®—ä½ çš„æ•¸æ“š</div>;

            const fortunes = calculateLifeFortunes(result.hour.r, parseInt(result.inputData.year));

            return (
                <div className="max-w-4xl mx-auto fade-in">
                    <div className="text-center mb-8">
                        <h2 className="text-3xl font-bold gold-text serif">â³ äººç”Ÿå¤§é‹æ™‚é–“è»¸</h2>
                        <p className="text-sm mt-2 opacity-60">æ¯10å¹´ä¸€å€‹å¤§é‹é€±æœŸï¼Œçœ‹è¦‹äººç”Ÿçš„ç¯€å¥</p>
                    </div>
                    
                    <div className="space-y-4">
                        {fortunes.map((f, i) => {
                            const numData = getNumData(f.num);
                            return (
                                <div key={i} className={`card p-6 ${f.isCurrent ? (isNight ? 'ring-2 ring-purple-500 bg-purple-900/20' : 'ring-2 ring-amber-500 bg-amber-50') : ''}`}>
                                    <div className="flex flex-col md:flex-row md:items-center gap-4">
                                        <div className="text-center md:w-32">
                                            <div className="text-4xl font-bold gold-text">
                                                {f.num}
                                                {f.isMaster && <MasterBadge num={f.num} />}
                                            </div>
                                            <div className="text-sm opacity-60">{f.numMeaning}</div>
                                        </div>
                                        <div className="flex-1">
                                            <div className="flex items-center gap-2 mb-1">
                                                {f.isCurrent && <span className="text-xs px-2 py-1 rounded-full bg-green-500 text-white">ç•¶å‰å¤§é‹</span>}
                                                <span className="font-bold text-lg">ç¬¬{f.period}å¤§é‹ãƒ»{f.theme}</span>
                                            </div>
                                            <div className="text-sm opacity-60 mb-2">{f.ageRange}ï¼ˆ{f.startYear}-{f.endYear}å¹´ï¼‰</div>
                                            <p className="text-sm opacity-80">{f.desc}</p>
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                    
                    {/* å¤§é‹ CTA */}
                    <div className={`card p-6 mt-8 text-center ${isNight ? 'bg-gradient-to-r from-purple-900/50 to-pink-900/30' : 'bg-gradient-to-r from-amber-50 to-yellow-50'}`}>
                        <div className="text-lg font-bold gold-text mb-2">ğŸ”® æƒ³è¦å¤§é‹æ·±åº¦è§£æï¼Ÿ</div>
                        <p className="text-sm opacity-70 mb-3">åŒ…å«æ¯å€‹å¤§é‹çš„æŒ‘æˆ°ã€æ©Ÿæœƒã€å¥åº·æé†’ã€è²¡é‹åˆ†æ</p>
                        <button onClick={onShowConsult} className="gold-btn px-8 py-3 rounded-lg">
                            å–å¾—å¤§é‹å®Œæ•´å ±å‘Š
                        </button>
                    </div>
                </div>
            );
        };

        // HRè­˜äººé ï¼ˆç°¡åŒ–ç‰ˆï¼‰
        const HRPage = ({ result, isNight, onShowConsult }) => {
            const [hrResult, setHrResult] = useState(null);

            const HRReport = ({ data }) => {
                const { hour, analysis } = data;
                const oData = getNumData(hour.o);
                const workData = oData?.work;
                
                return (
                    <div className="space-y-6 fade-in">
                        <div className="card p-6 text-center">
                            <div className="text-6xl font-bold gold-text">{hour.o}{isMasterNumber(hour.o) && <MasterBadge num={hour.o} />}</div>
                            <div className="text-2xl font-bold mt-2 serif">{workData?.type}</div>
                            <div className="text-lg opacity-70">{workData?.desc}</div>
                            <div className="text-sm opacity-50 mt-2">{workData?.style}</div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div className={`card p-4 ${isNight ? 'bg-green-900/30' : 'bg-green-50'}`}>
                                <h4 className="font-bold text-green-600 mb-2">âœ… æ ¸å¿ƒå„ªå‹¢</h4>
                                <p className="text-sm opacity-80">{oData?.light}</p>
                            </div>
                            <div className={`card p-4 ${isNight ? 'bg-red-900/30' : 'bg-red-50'}`}>
                                <h4 className="font-bold text-red-600 mb-2">âš ï¸ æ½›åœ¨é¢¨éšª</h4>
                                <p className="text-sm opacity-80">{oData?.dark}</p>
                            </div>
                        </div>
                        
                        {/* HR CTA */}
                        <div className={`card p-6 text-center ${isNight ? 'bg-gradient-to-r from-purple-900/50 to-pink-900/30' : 'bg-gradient-to-r from-amber-50 to-yellow-50'}`}>
                            <div className="text-lg font-bold gold-text mb-2">ğŸ”® æƒ³è¦å®Œæ•´HRäººæ‰å ±å‘Šï¼Ÿ</div>
                            <p className="text-sm opacity-70 mb-3">åŒ…å«è·èƒ½çŸ©é™£ã€ç®¡ç†å»ºè­°ã€åœ˜éšŠé…å°ã€é¢è©¦æŒ‡å—</p>
                            <button onClick={onShowConsult} className="gold-btn px-8 py-3 rounded-lg">
                                å–å¾—å°ˆæ¥­HRå ±å‘Š
                            </button>
                        </div>
                    </div>
                );
            };

            return (
                <div className="max-w-2xl mx-auto fade-in">
                    <div className="text-center mb-6">
                        <h2 className="text-3xl font-bold gold-text serif">ğŸ’¼ HRå¿«é€Ÿè­˜äºº</h2>
                        <p className="text-sm mt-2 opacity-60">åŸºæ–¼é¦¥éˆç§˜ç¢¼H.O.U.R.ç³»çµ±çš„äººæ‰è©•ä¼°</p>
                    </div>

                    {!hrResult ? (
                        <div className="space-y-4">
                            {result && (
                                <button onClick={() => setHrResult(result)} className="w-full gold-btn py-4 rounded-lg text-lg">
                                    ä½¿ç”¨æˆ‘çš„å‘½ç›¤ç”Ÿæˆå ±å‘Š
                                </button>
                            )}
                            <div className="text-center text-sm opacity-50">æˆ–</div>
                            <InputForm title="è¼¸å…¥å“¡å·¥/æ‡‰å¾µè€…è³‡æ–™" showName={true} nameLabel="å§“åï¼ˆé¸å¡«ï¼‰"
                                onCalculate={(data) => setHrResult(calculateHourLight(data))} />
                        </div>
                    ) : (
                        <div>
                            <button onClick={() => setHrResult(null)} className="text-sm opacity-60 hover:opacity-100 mb-4">â† é‡æ–°è¼¸å…¥</button>
                            <HRReport data={hrResult} />
                        </div>
                    )}
                </div>
            );
        };

        // è¦ªå¯†é—œä¿‚é ï¼ˆæ·±å¤œæ¨¡å¼ï¼Œç°¡åŒ–ç‰ˆï¼‰
        const IntimacyPage = ({ result, isNight, onShowConsult }) => {
            const [intimacyResult, setIntimacyResult] = useState(null);

            const IntimacyReport = ({ data }) => {
                const { hour } = data;
                const oData = getNumData(hour.o);
                const intimacy = oData?.intimacy;
                
                return (
                    <div className="space-y-6 fade-in">
                        <div className="card p-8 text-center bg-gradient-to-br from-pink-900/40 to-purple-900/50">
                            <div className="text-6xl mb-4">ğŸ”¥</div>
                            <h3 className="text-3xl font-bold gold-text serif mb-2">è¦ªå¯†é—œä¿‚æŒ‡å—</h3>
                            <p className="opacity-70">ä½ çš„æ…¾æœ›ã€ææ‡¼ã€èˆ‡æ•é–‹æ–¹å¼</p>
                        </div>

                        <div className="card p-6">
                            <div className="flex items-center gap-4 mb-4">
                                <span className="text-6xl font-bold gold-text">{hour.o}</span>
                                <div>
                                    <div className="text-2xl font-bold serif">{intimacy?.type}</div>
                                    <div className="opacity-70">{intimacy?.trait}</div>
                                </div>
                            </div>
                        </div>

                        <div className="grid md:grid-cols-2 gap-4">
                            <div className="card p-5 bg-gradient-to-br from-green-900/30 to-emerald-900/20">
                                <h4 className="font-bold text-green-400 text-lg mb-3">ğŸ’• å¥åº·ç‹€æ…‹</h4>
                                <p>{intimacy?.healthy}</p>
                            </div>
                            <div className="card p-5 bg-gradient-to-br from-red-900/30 to-rose-900/20">
                                <h4 className="font-bold text-red-400 text-lg mb-3">âš ï¸ å¤±è¡¡ç‹€æ…‹</h4>
                                <p>{intimacy?.shadow}</p>
                            </div>
                        </div>

                        <div className="card p-6 bg-gradient-to-br from-amber-900/30 to-orange-900/20">
                            <h4 className="font-bold text-amber-400 text-lg mb-3">ğŸ’¡ ä¼´ä¾¶éœ€è¦çŸ¥é“çš„</h4>
                            <p className="text-lg">{intimacy?.tip}</p>
                        </div>
                        
                        {/* è¦ªå¯†é—œä¿‚ CTA */}
                        <div className={`card p-6 text-center bg-gradient-to-r from-pink-900/50 to-purple-900/30`}>
                            <div className="text-lg font-bold gold-text mb-2">ğŸ”® æƒ³è¦å®Œæ•´è¦ªå¯†é—œä¿‚æŒ‡å—ï¼Ÿ</div>
                            <p className="text-sm opacity-70 mb-3">åŒ…å«7å®®æ„›çš„æ¸´æœ›ã€10å®®æ·±å±¤ææ‡¼ã€11å®®æ•é–‹æ–¹å¼ã€ç²¾æ²¹è™•æ–¹</p>
                            <button onClick={onShowConsult} className="gold-btn px-8 py-3 rounded-lg">
                                å–å¾—å®Œæ•´è¦ªå¯†æŒ‡å—
                            </button>
                        </div>
                    </div>
                );
            };

            return (
                <div className="max-w-2xl mx-auto fade-in">
                    <div className="text-center mb-6">
                        <h2 className="text-3xl font-bold gold-text serif">ğŸ’‹ è¦ªå¯†é—œä¿‚æŒ‡å—</h2>
                        <p className="text-sm mt-2 opacity-60">æ·±å¤œæ¨¡å¼å°ˆå±¬ãƒ»æ¢ç´¢ä½ çš„è¦ªå¯†ç‰¹è³ª</p>
                    </div>

                    {!intimacyResult ? (
                        <div className="space-y-4">
                            {result && (
                                <button onClick={() => setIntimacyResult(result)} className="w-full gold-btn py-4 rounded-lg text-lg">
                                    ä½¿ç”¨æˆ‘çš„å‘½ç›¤ç”Ÿæˆå ±å‘Š
                                </button>
                            )}
                            <div className="text-center text-sm opacity-50">æˆ–</div>
                            <InputForm title="è¼¸å…¥è³‡æ–™" onCalculate={(data) => setIntimacyResult(calculateHourLight(data))} />
                        </div>
                    ) : (
                        <div>
                            <button onClick={() => setIntimacyResult(null)} className="text-sm opacity-60 hover:opacity-100 mb-4">â† é‡æ–°è¼¸å…¥</button>
                            <IntimacyReport data={intimacyResult} />
                        </div>
                    )}
                </div>
            );
        };

        // åˆç›¤é ï¼ˆç°¡åŒ–ç‰ˆï¼‰
        const CompatibilityPage = ({ result, isNight, onShowConsult }) => {
            const [resultA, setResultA] = useState(result);
            const [resultB, setResultB] = useState(null);

            useEffect(() => {
                if (result && !resultA) setResultA(result);
            }, [result]);

            const analyzeCompatibility = (rA, rB) => {
                const hourA = rA.hour, hourB = rB.hour;
                let scores = { total: 0, details: [] };
                
                const oBaseA = getBaseNum(hourA.o), oBaseB = getBaseNum(hourB.o);
                const hBaseA = getBaseNum(hourA.h), hBaseB = getBaseNum(hourB.h);
                const rBaseA = getBaseNum(hourA.r), rBaseB = getBaseNum(hourB.r);
                
                const oDiff = Math.abs(oBaseA - oBaseB);
                const oScore = oDiff === 0 ? 20 : oDiff <= 2 ? 15 : oDiff <= 4 ? 10 : 5;
                scores.details.push({ name: 'Oæ•¸å¸å¼•åŠ›', score: oScore, max: 20 });
                
                const hDiff = Math.abs(hBaseA - hBaseB);
                const hScore = hDiff === 0 ? 20 : hDiff <= 2 ? 15 : hDiff <= 4 ? 10 : 5;
                scores.details.push({ name: 'Hæ•¸å¥‘åˆåº¦', score: hScore, max: 20 });
                
                const rDiff = Math.abs(rBaseA - rBaseB);
                const rScore = rDiff === 0 ? 20 : rDiff <= 2 ? 15 : rDiff <= 4 ? 10 : 5;
                scores.details.push({ name: 'Ræ•¸æ–¹å‘', score: rScore, max: 20 });
                
                const p7A = rA.palaces[7], p7B = rB.palaces[7];
                const p7Diff = Math.abs(p7A - p7B);
                const p7Score = p7Diff === 0 ? 20 : p7Diff <= 2 ? 15 : p7Diff <= 4 ? 10 : 5;
                scores.details.push({ name: '7å®®æ„›çš„èªè¨€', score: p7Score, max: 20 });
                
                scores.total = scores.details.reduce((sum, d) => sum + d.score, 0);
                
                let level;
                if (scores.total >= 70) level = 'å¤©ä½œä¹‹åˆ ğŸ’•';
                else if (scores.total >= 55) level = 'è‰¯å¥½é…å° âœ¨';
                else if (scores.total >= 40) level = 'éœ€è¦åŠªåŠ› ğŸ’ª';
                else level = 'æŒ‘æˆ°è¼ƒå¤§ ğŸŒ±';
                
                return { ...scores, level };
            };

            return (
                <div className="max-w-4xl mx-auto space-y-6 fade-in">
                    <div className="text-center mb-6">
                        <h2 className="text-3xl font-bold gold-text serif">ğŸ’• é—œä¿‚åˆç›¤åˆ†æ</h2>
                        <p className="text-sm mt-2 opacity-60">äº†è§£å…©äººçš„èƒ½é‡äº’å‹•èˆ‡å¥‘åˆåº¦</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div className="text-center mb-2 font-bold gold-text">Aæ–¹{resultA ? ' âœ“' : ''}</div>
                            {resultA ? (
                                <div className="card p-4 text-center">
                                    <div className="text-sm opacity-60">å·²è¼‰å…¥</div>
                                    <div className="text-2xl font-bold gold-text mt-2">H{resultA.hour.h} O{resultA.hour.o} R{resultA.hour.r}</div>
                                    <button onClick={() => setResultA(null)} className="text-xs mt-2 opacity-50 hover:opacity-100">é‡æ–°è¼¸å…¥</button>
                                </div>
                            ) : (
                                <InputForm title="Aæ–¹è³‡æ–™" onCalculate={(data) => setResultA(calculateHourLight(data))} />
                            )}
                        </div>
                        <div>
                            <div className="text-center mb-2 font-bold gold-text">Bæ–¹{resultB ? ' âœ“' : ''}</div>
                            {resultB ? (
                                <div className="card p-4 text-center">
                                    <div className="text-2xl font-bold gold-text">H{resultB.hour.h} O{resultB.hour.o} R{resultB.hour.r}</div>
                                    <button onClick={() => setResultB(null)} className="text-xs mt-2 opacity-50 hover:opacity-100">é‡æ–°è¼¸å…¥</button>
                                </div>
                            ) : (
                                <InputForm title="Bæ–¹è³‡æ–™" onCalculate={(data) => setResultB(calculateHourLight(data))} />
                            )}
                        </div>
                    </div>

                    {resultA && resultB && (() => {
                        const analysis = analyzeCompatibility(resultA, resultB);
                        return (
                            <div className="space-y-6 fade-in">
                                <div className={`card p-6 text-center ${analysis.total >= 55 ? (isNight ? 'bg-green-900/30' : 'bg-green-50') : (isNight ? 'bg-yellow-900/30' : 'bg-yellow-50')}`}>
                                    <div className="text-5xl font-bold gold-text">{analysis.total}</div>
                                    <div className="text-sm opacity-60">/ 80 åˆ†</div>
                                    <div className="text-2xl font-bold mt-2 serif">{analysis.level}</div>
                                </div>
                                
                                {/* åˆç›¤ CTA */}
                                <div className={`card p-6 text-center ${isNight ? 'bg-gradient-to-r from-purple-900/50 to-pink-900/30' : 'bg-gradient-to-r from-amber-50 to-yellow-50'}`}>
                                    <div className="text-lg font-bold gold-text mb-2">ğŸ”® æƒ³è¦å®Œæ•´åˆç›¤åˆ†æï¼Ÿ</div>
                                    <p className="text-sm opacity-70 mb-3">åŒ…å«12å®®ä½å°æ¯”ã€è¡çªåŒ–è§£å»ºè­°ã€ç›¸è™•ç§˜è¨£</p>
                                    <button onClick={onShowConsult} className="gold-btn px-8 py-3 rounded-lg">
                                        å–å¾—å®Œæ•´åˆç›¤å ±å‘Š
                                    </button>
                                </div>
                            </div>
                        );
                    })()}
                </div>
            );
        };

        /* ============================================
           ä¸»æ‡‰ç”¨
           ============================================ */

        const App = () => {
            const [result, setResult] = useState(null);
            const [isNight, setIsNight] = useState(false);
            const [activeTab, setActiveTab] = useState('basic');
            const [showAgeConfirm, setShowAgeConfirm] = useState(false);
            const [showConsultModal, setShowConsultModal] = useState(false);

            useEffect(() => {
                document.body.className = isNight ? 'night-mode' : 'day-mode';
            }, [isNight]);

            const handleNightToggle = () => {
                if (!isNight) {
                    setShowAgeConfirm(true);
                } else {
                    setIsNight(false);
                }
            };

            const confirmAge = () => {
                setIsNight(true);
                setShowAgeConfirm(false);
            };

            const tabs = [
                { id: 'basic', label: 'ğŸ”‘ åŸºç¤å‘½ç›¤', icon: 'ğŸ”‘' },
                { id: 'year', label: 'ğŸ—“ï¸ æµå¹´é‹å‹¢', icon: 'ğŸ—“ï¸' },
                { id: 'fortune', label: 'â³ å¤§é‹æ™‚é–“è»¸', icon: 'â³' },
                { id: 'compat', label: 'ğŸ’• é—œä¿‚åˆç›¤', icon: 'ğŸ’•' },
                { id: 'hr', label: isNight ? 'ğŸ’‹ è¦ªå¯†æŒ‡å—' : 'ğŸ’¼ HRè­˜äºº', icon: isNight ? 'ğŸ’‹' : 'ğŸ’¼' }
            ];

            return (
                <div className="min-h-screen">
                    {/* 18æ­²ç¢ºèª */}
                    {showAgeConfirm && (
                        <div className="modal-overlay">
                            <div className="card modal-content max-w-md w-full mx-4 p-8 text-center">
                                <div className="text-5xl mb-4">ğŸŒ™</div>
                                <h3 className="text-2xl font-bold gold-text mb-4 serif">æ·±å¤œæ¨¡å¼</h3>
                                <p className="mb-6 opacity-80">
                                    æ·±å¤œæ¨¡å¼åŒ…å«ã€Œè¦ªå¯†é—œä¿‚æŒ‡å—ã€å…§å®¹ï¼Œ<br/>åƒ…ä¾›å¹´æ»¿18æ­²ä¹‹æˆå¹´äººç€è¦½ã€‚
                                </p>
                                <p className="text-lg font-bold mb-6">è«‹å•ä½ å·²å¹´æ»¿18æ­²å—ï¼Ÿ</p>
                                <div className="flex gap-4 justify-center">
                                    <button onClick={() => setShowAgeConfirm(false)} className="px-8 py-3 rounded-lg bg-gray-200 text-gray-700 font-bold">æœªæ»¿18æ­²</button>
                                    <button onClick={confirmAge} className="gold-btn px-8 py-3 rounded-lg font-bold">æˆ‘å·²æ»¿18æ­²</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* è«®è©¢å½ˆçª— */}
                    {showConsultModal && (
                        <div className="modal-overlay" onClick={() => setShowConsultModal(false)}>
                            <div className="card modal-content max-w-md w-full mx-4 p-8 text-center" onClick={e => e.stopPropagation()}>
                                <div className="text-5xl mb-4">ğŸ”®</div>
                                <h3 className="text-2xl font-bold gold-text mb-4 serif">æ·±åº¦è§£è®€è«®è©¢</h3>
                                <p className="mb-4 opacity-80">
                                    å®Œæ•´å ±å‘Šï¼†ä¸€å°ä¸€æ·±åº¦è§£è®€ç‚ºä»˜è²»æœå‹™ï¼Œ<br/>ç”±å‰µè¾¦äººç‹é€¸å›è¦ªè‡ªç‚ºæ‚¨è§£æå‘½ç›¤å¯†ç¢¼ã€‚
                                </p>
                                <div className={`p-4 rounded-lg mb-4 ${isNight ? 'bg-purple-900/30' : 'bg-amber-50'}`}>
                                    <div className="text-sm font-bold mb-2">ğŸ“¦ ä»˜è²»æœå‹™å…§å®¹</div>
                                    <ul className="text-xs text-left space-y-1 opacity-80">
                                        <li>â–º å®Œæ•´12å®®ä½æ·±åº¦å ±å‘Šï¼ˆ12,000å­—+ï¼‰</li>
                                        <li>â–º å€‹äººåŒ–ç²¾æ²¹è™•æ–¹ï¼‹è¡Œå‹•æ–¹æ¡ˆ</li>
                                        <li>â–º å¿ƒç†å­¸æ·±åº¦åˆ†æï¼ˆé˜²è¡›æ©Ÿåˆ¶ã€èªçŸ¥æ‰­æ›²ï¼‰</li>
                                        <li>â–º 1å°1èªéŸ³/è¦–è¨Šè«®è©¢</li>
                                    </ul>
                                </div>
                                <div className="flex gap-3 justify-center">
                                    <button onClick={() => setShowConsultModal(false)} className="px-6 py-3 rounded-lg bg-gray-200 text-gray-700 font-bold">ç¨å¾Œå†èªª</button>
                                    <a href="https://line.me/ti/p/~judyanee" target="_blank" rel="noopener noreferrer" className="gold-btn px-6 py-3 rounded-lg font-bold">
                                        åŠ å…¥ LINE è«®è©¢
                                    </a>
                                </div>
                            </div>
                        </div>
                    )}

                    <header className={`backdrop-blur-md shadow-sm sticky top-0 z-50 ${isNight ? 'bg-gray-900/90' : 'bg-white/90'}`}>
                        <div className="container mx-auto px-4 py-3">
                            <div className="flex justify-between items-center mb-3">
                                <div>
                                    <h1 className="text-2xl font-bold gold-text tracking-widest serif">é¦¥éˆç§˜ç¢¼</h1>
                                    <p className="text-[10px] opacity-50">Hour Light ç”Ÿå‘½æ•¸å­—è§£ç¢¼ç³»çµ± v8.1</p>
                                </div>
                                <div className="flex items-center gap-2">
                                    {result && (
                                        <button onClick={() => setResult(null)} className="text-xs opacity-60 hover:opacity-100 px-3 py-1">é‡æ–°è¨ˆç®—</button>
                                    )}
                                    <button onClick={handleNightToggle} className="gold-btn px-3 py-1 rounded-full text-xs">
                                        {isNight ? 'ğŸŒ™ æ·±å¤œ' : 'â˜€ï¸ ç™½å¤©'}
                                    </button>
                                </div>
                            </div>
                            <div className="flex gap-1 overflow-x-auto pb-1">
                                {tabs.map(tab => (
                                    <button key={tab.id} onClick={() => setActiveTab(tab.id)}
                                        className={`tab-btn px-3 py-2 text-sm whitespace-nowrap ${activeTab === tab.id ? 'active font-bold' : 'opacity-60'}`}>
                                        <span className="hidden md:inline">{tab.label}</span>
                                        <span className="md:hidden">{tab.icon}</span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </header>

                    <main className="container mx-auto px-4 py-8">
                        {activeTab === 'basic' && <BasicPage result={result} setResult={setResult} isNight={isNight} onShowConsult={() => setShowConsultModal(true)} />}
                        {activeTab === 'year' && <YearFortunePage result={result} isNight={isNight} onShowConsult={() => setShowConsultModal(true)} />}
                        {activeTab === 'fortune' && <LifeFortunePage result={result} isNight={isNight} onShowConsult={() => setShowConsultModal(true)} />}
                        {activeTab === 'compat' && <CompatibilityPage result={result} isNight={isNight} onShowConsult={() => setShowConsultModal(true)} />}
                        {activeTab === 'hr' && (isNight ? <IntimacyPage result={result} isNight={isNight} onShowConsult={() => setShowConsultModal(true)} /> : <HRPage result={result} isNight={isNight} onShowConsult={() => setShowConsultModal(true)} />)}
                    </main>

                    {/* æµ®å‹•è«®è©¢æŒ‰éˆ• */}
                    <button onClick={() => setShowConsultModal(true)} className="fixed bottom-6 right-6 z-50 group">
                        <div className="relative">
                            <div className={`absolute bottom-full right-0 mb-3 w-48 p-3 rounded-xl shadow-lg 
                                transform transition-all duration-300 opacity-0 translate-y-2 group-hover:opacity-100 group-hover:translate-y-0
                                ${isNight ? 'bg-purple-900 text-purple-100' : 'bg-white text-gray-800'}`}>
                                <p className="text-sm font-bold mb-1">ğŸ”® æƒ³è¦æ›´æ·±å…¥çš„è§£è®€ï¼Ÿ</p>
                                <p className="text-xs opacity-80">å®Œæ•´å ±å‘Šï¼‹1å°1è«®è©¢</p>
                            </div>
                            <div className={`flex items-center gap-2 px-5 py-3 rounded-full shadow-lg transition-all duration-300 hover:scale-105 cta-pulse
                                ${isNight ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white' : 'bg-gradient-to-r from-amber-400 to-yellow-500 text-amber-900'}`}>
                                <span className="font-bold text-sm">é ç´„è«®è©¢</span>
                            </div>
                        </div>
                    </button>

                    <footer className="text-center py-8 opacity-40 text-xs">
                        <p>Â© 2026 é¦¥éˆç§˜ç¢¼ Hour Light v8.1</p>
                        <p>å‰µå§‹äººï¼šç‹é€¸å› ãƒ» hourlight.github.io</p>
                        <p className="mt-2">LINE ID: judyanee</p>
                    </footer>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
