<!DOCTYPE html>
<html lang="zh-TW">
<head>
<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BXP7K53QG6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-BXP7K53QG6');
</script>
<!-- Facebook Pixel -->
<script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '1333106288588347');
  fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=1333106288588347&ev=PageView&noscript=1"
/></noscript>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿå‘½è¦ºå¯ŸæŒ‡æ•¸ï½œé¦¥éˆä¹‹é‘° Hour Light</title>
    
    <!-- SEO Meta -->
    <meta name="description" content="é€éç‰Œå¡ç·¨è™Ÿè§£è®€ä½ çš„é¦¬æ–¯æ´›éœ€æ±‚å±¤ç´šåˆ†ä½ˆï¼Œä»¥ H.O.U.R. æ–¹æ³•è«–åˆ†æç•¶å‰ç”Ÿå‘½è¦ºå¯Ÿç‹€æ…‹ï¼Œæ‰¾åˆ°å±¬æ–¼ä½ çš„èƒ½é‡æå‡æ–¹å‘ã€‚">
    <meta name="keywords" content="é¦¬æ–¯æ´›éœ€æ±‚, ç”Ÿå‘½è¦ºå¯Ÿ, ç‰Œå¡è§£è®€, èƒ½é‡åˆ†æ, H.O.U.R., é¦¥éˆä¹‹é‘°">
    <link rel="canonical" href="https://hourlightkey.com/maslow-frequency.html">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hourlightkey.com/maslow-frequency.html">
    <meta property="og:title" content="ç”Ÿå‘½è¦ºå¯ŸæŒ‡æ•¸ï½œé¦¥éˆä¹‹é‘°">
    <meta property="og:description" content="é€éç‰Œå¡è§£è®€ä½ çš„é¦¬æ–¯æ´›éœ€æ±‚å±¤ç´šï¼Œæ‰¾åˆ°å°ˆå±¬çš„èƒ½é‡æå‡æ–¹å‘ã€‚">
    <meta property="og:image" content="https://hourlightkey.com/og-image.jpg">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:site_name" content="é¦¥éˆä¹‹é‘° Hour Light">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ç”Ÿå‘½è¦ºå¯ŸæŒ‡æ•¸ï½œé¦¥éˆä¹‹é‘°">
    <meta name="twitter:description" content="é€éç‰Œå¡è§£è®€ä½ çš„é¦¬æ–¯æ´›éœ€æ±‚å±¤ç´šï¼Œæ‰¾åˆ°å°ˆå±¬çš„èƒ½é‡æå‡æ–¹å‘ã€‚">
    <meta name="twitter:image" content="https://hourlightkey.com/og-image.jpg">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/css/hourlight-global.css">
    
    <style>
        /* ===== é é¢å°ˆå±¬æ¨£å¼ ===== */
        .mf-page {
            min-height: 100vh;
            padding: 40px 20px 80px;
        }
        
        .mf-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        /* ===== é é¦–å€ ===== */
        .mf-header {
            text-align: center;
            margin-bottom: 48px;
        }
        
        .mf-badge {
            display: inline-block;
            padding: 6px 16px;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--hl-gold);
            background: rgba(233,194,125,0.1);
            border: 1px solid var(--hl-border-soft);
            border-radius: 20px;
            margin-bottom: 16px;
        }
        
        .mf-title {
            font-family: var(--font-serif);
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            font-weight: 700;
            background: linear-gradient(135deg, #fbe6c2 0%, #e9c27d 40%, #cda86e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            letter-spacing: 2px;
        }
        
        .mf-subtitle {
            font-size: 0.95rem;
            color: #e8ddd0;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.8;
        }
        
        /* ===== ä¸»è¦ä½ˆå±€ ===== */
        .mf-main {
            display: grid;
            grid-template-columns: 1fr;
            gap: 32px;
        }
        
        @media (min-width: 900px) {
            .mf-main {
                grid-template-columns: 400px 1fr;
            }
        }
        
        /* ===== è¼¸å…¥å¡ç‰‡ ===== */
        .mf-input-card {
            background: 
                radial-gradient(ellipse at top left, rgba(233,194,125,0.12) 0%, transparent 50%),
                rgba(10,6,24,0.95);
            border: 1px solid var(--hl-border);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 
                0 20px 60px rgba(0,0,0,0.8),
                0 0 40px rgba(233,194,125,0.15),
                inset 0 1px 0 rgba(233,194,125,0.1);
        }
        
        .mf-section-title {
            font-family: var(--font-serif);
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--hl-gold);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .mf-section-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, var(--hl-gold), var(--hl-gold-deep));
            border-radius: 2px;
        }
        
        /* ===== ç‰Œé™£é¸æ“‡å™¨ ===== */
        .mf-spread-selector {
            margin-bottom: 24px;
        }
        
        .mf-label {
            display: block;
            font-size: 0.85rem;
            font-weight: 600;
            color: #f0e6d6;
            margin-bottom: 8px;
        }
        
        .mf-select {
            width: 100%;
            padding: 14px 40px 14px 16px;
            font-size: 0.95rem;
            font-family: var(--font-sans);
            color: var(--hl-ink);
            background: rgba(233,194,125,0.08);
            border: 1px solid var(--hl-border-soft);
            border-radius: 12px;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23e9c27d' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 14px center;
            transition: all 0.3s ease;
        }
        
        .mf-select:hover,
        .mf-select:focus {
            border-color: var(--hl-gold);
            background-color: rgba(233,194,125,0.12);
            outline: none;
            box-shadow: 0 0 0 3px rgba(233,194,125,0.15);
        }
        
        .mf-select option {
            background: #1a1428;
            color: var(--hl-ink);
            padding: 10px;
        }
        
        /* ===== ç‰Œè™Ÿè¼¸å…¥å€ ===== */
        .mf-input-area {
            margin-bottom: 24px;
        }
        
        .mf-textarea {
            width: 100%;
            min-height: 120px;
            padding: 16px;
            font-size: 1rem;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
            color: var(--hl-ink);
            background: rgba(5,3,10,0.6);
            border: 1px solid var(--hl-border-soft);
            border-radius: 12px;
            resize: vertical;
            transition: all 0.3s ease;
            letter-spacing: 1px;
        }
        
        .mf-textarea::placeholder {
            color: #a89b8a;
            font-family: var(--font-sans);
            letter-spacing: 0;
        }
        
        .mf-textarea:focus {
            border-color: var(--hl-gold);
            outline: none;
            box-shadow: 0 0 0 3px rgba(233,194,125,0.15);
        }
        
        .mf-input-hint {
            margin-top: 8px;
            font-size: 0.8rem;
            color: #b8ab9a;
            text-align: right;
        }
        
        .mf-input-hint span {
            color: var(--hl-gold);
        }
        
        /* ===== è¨ˆç®—æŒ‰éˆ• ===== */
        .mf-calculate-btn {
            width: 100%;
            padding: 16px 24px;
            font-size: 1rem;
            font-weight: 700;
            font-family: var(--font-sans);
            color: #1a1208;
            background: linear-gradient(135deg, var(--hl-gold-light) 0%, var(--hl-gold) 50%, var(--hl-gold-deep) 100%);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 8px 24px rgba(0,0,0,0.5),
                0 0 20px rgba(233,194,125,0.4);
            letter-spacing: 1px;
        }
        
        .mf-calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 32px rgba(0,0,0,0.6),
                0 0 30px rgba(233,194,125,0.6);
        }
        
        .mf-calculate-btn:active {
            transform: translateY(0);
        }
        
        /* ===== èªªæ˜å€å¡Š ===== */
        .mf-info-box {
            margin-top: 24px;
            padding: 20px;
            background: rgba(156,110,219,0.08);
            border: 1px solid rgba(156,110,219,0.25);
            border-radius: 12px;
        }
        
        .mf-info-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: #c9a6ff;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .mf-info-text {
            font-size: 0.82rem;
            color: #d8cfc2;
            line-height: 1.7;
        }
        
        /* ===== çµæœå€åŸŸï¼ˆéš±è—ç‹€æ…‹ï¼‰ ===== */
        .mf-result-card {
            background: 
                radial-gradient(ellipse at top right, rgba(233,194,125,0.1) 0%, transparent 50%),
                rgba(10,6,24,0.95);
            border: 1px solid var(--hl-border);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 
                0 20px 60px rgba(0,0,0,0.8),
                0 0 40px rgba(233,194,125,0.15);
            display: none;
        }
        
        .mf-result-card.is-visible {
            display: block;
            animation: fadeSlideIn 0.6s ease-out;
        }
        
        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ===== ç¸½åˆ†å€ ===== */
        .mf-score-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            padding-bottom: 20px;
            margin-bottom: 24px;
            border-bottom: 1px solid var(--hl-border-soft);
        }
        
        .mf-score-label {
            font-size: 0.9rem;
            color: #d8cfc2;
            margin-bottom: 4px;
        }
        
        .mf-score-title {
            font-family: var(--font-serif);
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--hl-ink);
        }
        
        .mf-score-value {
            text-align: right;
        }
        
        .mf-score-number {
            font-family: var(--font-serif);
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, #fbe6c2, #e9c27d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }
        
        .mf-score-max {
            font-size: 0.9rem;
            color: #b8ab9a;
        }
        
        /* ===== é€²åº¦æ¢ ===== */
        .mf-progress-section {
            margin-bottom: 32px;
        }
        
        .mf-progress-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #c4b7a6;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .mf-progress-bar {
            height: 8px;
            background: rgba(233,194,125,0.15);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }
        
        .mf-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #9c6edb, #e9c27d, #fbe6c2);
            border-radius: 4px;
            width: 0%;
            transition: width 1s ease-out;
        }
        
        .mf-progress-markers {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            display: flex;
        }
        
        .mf-progress-marker {
            flex: 1;
            border-right: 1px solid rgba(255,255,255,0.1);
        }
        
        .mf-progress-marker:last-child {
            border-right: none;
        }
        
        /* ===== é›·é”åœ–å€ ===== */
        .mf-chart-section {
            margin-bottom: 32px;
        }
        
        .mf-chart-container {
            position: relative;
            max-width: 320px;
            margin: 0 auto;
            aspect-ratio: 1;
        }
        
        /* ===== äº”å±¤åˆ†æ•¸ ===== */
        .mf-layers-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 32px;
        }
        
        .mf-layer-item {
            text-align: center;
            padding: 12px 8px;
            background: rgba(233,194,125,0.06);
            border: 1px solid var(--hl-border-soft);
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .mf-layer-item:hover {
            background: rgba(233,194,125,0.12);
            border-color: var(--hl-border);
        }
        
        .mf-layer-name {
            font-size: 0.72rem;
            font-weight: 700;
            color: #c4b7a6;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }
        
        .mf-layer-score {
            font-family: var(--font-serif);
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--hl-gold);
        }
        
        /* ===== H.O.U.R. è§£è®€å€ ===== */
        .mf-hour-section {
            background: rgba(5,3,10,0.5);
            border: 1px solid var(--hl-border-soft);
            border-radius: 16px;
            overflow: hidden;
        }
        
        .mf-hour-header {
            padding: 20px 24px;
            background: rgba(233,194,125,0.08);
            border-bottom: 1px solid var(--hl-border-soft);
        }
        
        .mf-hour-title {
            font-family: var(--font-serif);
            font-size: 1rem;
            font-weight: 600;
            color: var(--hl-gold);
            margin-bottom: 4px;
        }
        
        .mf-hour-subtitle {
            font-size: 0.8rem;
            color: #c4b7a6;
        }
        
        .mf-hour-body {
            padding: 24px;
        }
        
        .mf-interpretation {
            margin-bottom: 24px;
        }
        
        .mf-interpretation-level {
            font-size: 0.85rem;
            font-weight: 600;
            color: #c9a6ff;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .mf-interpretation-text {
            font-size: 0.92rem;
            color: #e8ddd0;
            line-height: 1.9;
            text-align: justify;
        }
        
        /* ===== H.O.U.R. æ­¥é©Ÿ ===== */
        .mf-hour-steps {
            display: grid;
            gap: 16px;
        }
        
        .mf-hour-step {
            display: flex;
            gap: 16px;
            padding: 16px;
            background: rgba(233,194,125,0.04);
            border-radius: 12px;
            border-left: 3px solid var(--hl-gold-soft);
            transition: all 0.3s ease;
        }
        
        .mf-hour-step:hover {
            background: rgba(233,194,125,0.08);
            border-left-color: var(--hl-gold);
        }
        
        .mf-step-letter {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-serif);
            font-size: 1.1rem;
            font-weight: 700;
            color: #1a1208;
            background: linear-gradient(135deg, var(--hl-gold-light), var(--hl-gold));
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .mf-step-content {
            flex: 1;
        }
        
        .mf-step-name {
            font-size: 0.85rem;
            font-weight: 700;
            color: #f5ebe0;
            margin-bottom: 4px;
        }
        
        .mf-step-action {
            font-size: 0.82rem;
            color: #d8cfc2;
            line-height: 1.6;
        }
        
        /* ===== CTA å€å¡Š ===== */
        .mf-cta-section {
            margin-top: 32px;
            padding: 24px;
            background: linear-gradient(135deg, rgba(156,110,219,0.1), rgba(233,194,125,0.08));
            border: 1px solid var(--hl-border-soft);
            border-radius: 16px;
            text-align: center;
        }
        
        .mf-cta-text {
            font-size: 0.9rem;
            color: #e8ddd0;
            margin-bottom: 16px;
        }
        
        .mf-cta-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .mf-cta-btn {
            padding: 12px 24px;
            font-size: 0.85rem;
            font-weight: 600;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .mf-cta-btn-primary {
            color: #1a1208;
            background: linear-gradient(135deg, var(--hl-gold), var(--hl-gold-deep));
            box-shadow: 0 4px 16px rgba(233,194,125,0.3);
        }
        
        .mf-cta-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(233,194,125,0.5);
            color: #1a1208;
        }
        
        .mf-cta-btn-secondary {
            color: var(--hl-gold);
            background: transparent;
            border: 1px solid var(--hl-gold);
        }
        
        .mf-cta-btn-secondary:hover {
            background: rgba(233,194,125,0.1);
            color: var(--hl-gold-light);
        }
        
        /* ===== ç©ºç‹€æ…‹æç¤º ===== */
        .mf-empty-state {
            text-align: center;
            padding: 60px 24px;
            color: #c4b7a6;
        }
        
        .mf-empty-icon {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        .mf-empty-text {
            font-size: 0.95rem;
            line-height: 1.7;
        }
        
        /* ===== RWD éŸ¿æ‡‰å¼ ===== */
        @media (max-width: 899px) {
            .mf-layers-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 6px;
            }
            
            .mf-layer-item {
                padding: 10px 4px;
            }
            
            .mf-layer-name {
                font-size: 0.6rem;
            }
            
            .mf-layer-score {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .mf-page {
                padding: 24px 16px 60px;
            }
            
            .mf-input-card,
            .mf-result-card {
                padding: 24px 20px;
            }
            
            .mf-score-number {
                font-size: 2.4rem;
            }
            
            .mf-hour-steps {
                gap: 12px;
            }
            
            .mf-hour-step {
                padding: 12px;
            }
            
            .mf-cta-buttons {
                flex-direction: column;
            }
            
            .mf-cta-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
    
    <!-- Schema.org çµæ§‹åŒ–è³‡æ–™ -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "ç”Ÿå‘½è¦ºå¯ŸæŒ‡æ•¸è¨ˆç®—æ©Ÿ",
      "url": "https://hourlightkey.com/maslow-frequency.html",
      "description": "é€éç‰Œå¡ç·¨è™Ÿè§£è®€é¦¬æ–¯æ´›éœ€æ±‚å±¤ç´šåˆ†ä½ˆï¼Œåˆ†æç•¶å‰ç”Ÿå‘½è¦ºå¯Ÿç‹€æ…‹",
      "applicationCategory": "LifestyleApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "TWD"
      },
      "creator": {
        "@type": "Organization",
        "name": "é¦¥éˆä¹‹é‘°åœ‹éš›æœ‰é™å…¬å¸"
      },
      "featureList": [
        "é¦¬æ–¯æ´›éœ€æ±‚å±¤ç´šåˆ†æ",
        "ç”Ÿå‘½è¦ºå¯Ÿé›·é”åœ–",
        "H.O.U.R. è¡Œå‹•å»ºè­°"
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "@id": "https://hourlightkey.com/#organization",
      "name": "é¦¥éˆä¹‹é‘°åœ‹éš›æœ‰é™å…¬å¸",
      "alternateName": ["Hour Light International Co., Ltd.", "é¦¥éˆä¹‹é‘°", "Hour Light"],
      "url": "https://hourlightkey.com",
      "logo": "https://hourlightkey.com/logo.svg",
      "description": "æ„Ÿå®˜ç§‘å­¸ Ã— æƒ…ç·’å•†æ¥­ç³»çµ±",
      "sameAs": [
        "https://www.youtube.com/@hourlight",
        "https://lin.ee/OQDB5t6"
      ]
    }
    </script>
<style>
/* ========== æµ®å‹• LINE æŒ‰éˆ•ï¼ˆç»ç’ƒæ“¬æ…‹ï¼‰========== */
.hl-float-line{position:fixed;right:20px;bottom:24px;z-index:9000;display:flex;align-items:center;gap:8px;padding:14px 22px;border-radius:999px;background:rgba(5,3,10,0.7);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(233,194,125,0.3);color:var(--hl-gold,#e9c27d);text-decoration:none;font-weight:600;font-size:0.95rem;box-shadow:0 8px 32px rgba(0,0,0,0.3),inset 0 1px 0 rgba(233,194,125,0.1);transition:all .3s ease}
.hl-float-line:hover{background:linear-gradient(135deg,#06c755,#04a648);border-color:transparent;color:#fff;box-shadow:0 8px 32px rgba(0,0,0,0.3),0 0 20px rgba(6,199,85,0.4);transform:translateY(-3px)}
.hl-float-line-icon{font-size:1.2rem;transition:transform .3s ease}
.hl-float-line:hover .hl-float-line-icon{transform:scale(1.1)}
.hl-float-line-text{letter-spacing:1px}
@media(max-width:480px){.hl-float-line{right:16px;bottom:20px;padding:12px 18px;font-size:0.85rem}.hl-float-line-text{display:none}.hl-float-line-icon{font-size:1.4rem}}
</style>
<style>
/* ========== èƒŒæ™¯éŸ³æ¨‚æ§åˆ¶æŒ‰éˆ• ========== */
.hl-music-toggle{position:fixed;top:20px;right:20px;z-index:9999;width:44px;height:44px;border-radius:50%;border:1px solid rgba(233,194,125,0.4);background:rgba(5,3,10,0.8);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);color:#e9c27d;font-size:1.2rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}
.hl-music-toggle:hover{background:rgba(233,194,125,0.1);transform:scale(1.1)}
.hl-music-toggle.playing{animation:music-pulse 2s ease-in-out infinite}
@keyframes music-pulse{0%,100%{box-shadow:0 0 10px rgba(233,194,125,0.3)}50%{box-shadow:0 0 20px rgba(233,194,125,0.6)}}
</style>
</head>
<body>
<!-- ========== èƒŒæ™¯éŸ³æ¨‚ ========== -->
<audio id="bgMusic" loop>
  <source src="https://hourlightkey.com/432Hz.mp3" type="audio/mpeg">
</audio>
<button class="hl-music-toggle" id="musicToggle" onclick="toggleHLMusic()">ğŸ”‡</button>
<script>
function toggleHLMusic(){
  var a=document.getElementById('bgMusic'),b=document.getElementById('musicToggle');
  if(a.paused){a.volume=0.3;a.play();b.textContent='ğŸ”Š';b.classList.add('playing');}
  else{a.pause();b.textContent='ğŸ”‡';b.classList.remove('playing');}
}
</script>
<!-- ========== End èƒŒæ™¯éŸ³æ¨‚ ========== -->


<!-- ===== å°èˆªåˆ— ===== -->
<nav class="hl-nav">
    <div class="hl-nav-inner">
        <a href="index.html" class="hl-nav-brand">
            <span class="hl-nav-brand-text">é¦¥éˆä¹‹é‘°</span>
        </a>
        <button class="hl-nav-toggle" onclick="document.querySelector('.hl-nav-links').classList.toggle('is-open')">
            <span></span><span></span><span></span>
        </button>
        <div class="hl-nav-links">
            <a href="services.html" class="hl-nav-link">æœå‹™é …ç›®</a>
            <a href="courses.html" class="hl-nav-link">èª²ç¨‹å­¸è‹‘</a>
            <a href="fuling-mima.html" class="hl-nav-link">é¦¥éˆç§˜ç¢¼</a>
            <a href="draw-hl.html" class="hl-nav-link">èƒ½é‡æŠ½ç‰Œ</a>
            <a href="https://lin.ee/OQDB5t6" target="_blank" class="hl-nav-cta">LINE è«®è©¢</a>
        </div>
    </div>
</nav>

<!-- ===== ä¸»è¦å…§å®¹ ===== -->
<main class="mf-page">
    <div class="mf-container">
        
        <!-- é é¦– -->
        <header class="mf-header">
            <span class="mf-badge">H.O.U.R. Frequency Analysis</span>
            <h1 class="mf-title">ç”Ÿå‘½è¦ºå¯ŸæŒ‡æ•¸</h1>
            <p class="mf-subtitle">
                é€éç‰Œå¡ç·¨è™Ÿï¼Œè§£è®€ä½ ç›®å‰çš„é¦¬æ–¯æ´›éœ€æ±‚å±¤ç´šåˆ†ä½ˆ<br>
                æ‰¾åˆ°èƒ½é‡å¡é—œçš„ä½ç½®ï¼Œå•Ÿå‹•å±¬æ–¼ä½ çš„ H.O.U.R. é€²åŒ–ä¹‹æ—…
            </p>
        </header>
        
        <!-- ä¸»è¦å€åŸŸ -->
        <div class="mf-main">
            
            <!-- å·¦å´ï¼šè¼¸å…¥å€ -->
            <div class="mf-input-card">
                <h2 class="mf-section-title">è²¼ä¸Šä½ çš„æŠ½ç‰Œçµæœ</h2>
                <p style="font-size: 0.85rem; color: #c4b7a6; margin-bottom: 20px;">
                    é‚„æ²’æŠ½ç‰Œï¼Ÿå…ˆå» <a href="draw-hl.html" style="color: var(--hl-gold); text-decoration: underline;">å…§åœ¨GPSæŠ½ç‰Œ</a> æŠ½ 7/12/15/21 å¼µç‰Œ
                </p>
                
                <!-- ç‰Œé™£é¸æ“‡ -->
                <div class="mf-spread-selector">
                    <label class="mf-label">é¸æ“‡ç‰Œé™£æ¨¡å¼</label>
                    <select id="spreadType" class="mf-select" onchange="updatePlaceholder()">
                        <option value="7">ğŸŒ¿ 7 å¼µï½œå¿«é€Ÿèº«å¿ƒè¦ºå¯Ÿ</option>
                        <option value="12">ğŸ•°ï¸ 12 å¼µï½œæµå¹´å®®ä½æƒæ</option>
                        <option value="15">ğŸ§˜ 15 å¼µï½œæ½›æ„è­˜æ·±å±¤æ¢ç´¢</option>
                        <option value="21">ğŸ”® 21 å¼µï½œè‹±é›„æ—…ç¨‹å…¨åƒåœ–</option>
                        <option value="custom">âœ¨ è‡ªè¨‚æ•¸é‡</option>
                    </select>
                </div>
                
                <!-- ç‰Œè™Ÿè¼¸å…¥ -->
                <div class="mf-input-area">
                    <label class="mf-label">è¼¸å…¥ç‰Œå¡è³‡æ–™</label>
                    <textarea id="cardInput" class="mf-textarea" 
                        placeholder="æ–¹æ³•ä¸€ï¼šç›´æ¥è²¼ä¸ŠæŠ½ç‰Œçµæœ&#10;æ–¹æ³•äºŒï¼šè¼¸å…¥ç‰Œè™Ÿï¼ˆå¦‚ï¼šA14, 028, A17...ï¼‰&#10;&#10;ç³»çµ±æœƒè‡ªå‹•è­˜åˆ¥ 7 å¼µç‰Œçš„ä½åºæ¬Šé‡"></textarea>
                    <p class="mf-input-hint">
                        ç›´æ¥è²¼ä¸ŠæŠ½ç‰Œçµæœï¼Œæˆ–æ‰‹å‹•è¼¸å…¥ç‰Œè™Ÿ
                    </p>
                </div>
                
                <!-- è¨ˆç®—æŒ‰éˆ• -->
                <button class="mf-calculate-btn" onclick="calculateFrequency()">
                    âœ¨ å•Ÿå‹•è¦ºå¯Ÿè§£è®€
                </button>
                
                <!-- èªªæ˜å€ -->
                <div class="mf-info-box">
                    <p class="mf-info-title">ğŸ’¡ ä½¿ç”¨æ–¹å¼</p>
                    <p class="mf-info-text">
                        å¾ã€Œå…§åœ¨GPSæŠ½ç‰Œã€è¤‡è£½çµæœå¾Œï¼Œç›´æ¥è²¼åˆ°ä¸Šæ–¹å³å¯ï¼ç³»çµ±æœƒè‡ªå‹•è­˜åˆ¥ç‰Œè™Ÿèˆ‡å¼µæ•¸ï¼Œä¸¦ä¾æ“šç‰Œé™£ä½ç½®çµ¦äºˆä¸åŒæ¬Šé‡ã€‚è¶Šå¾Œé¢çš„ç‰Œï¼ˆå»ºè­°/æ ¸å¿ƒè¨Šæ¯ä½ï¼‰ä½”æ¯”è¶Šé‡ã€‚
                    </p>
                </div>
            </div>
            
            <!-- å³å´ï¼šçµæœå€ -->
            <div id="resultCard" class="mf-result-card">
                
                <!-- ç©ºç‹€æ…‹ -->
                <div id="emptyState" class="mf-empty-state">
                    <div class="mf-empty-icon">ğŸ”®</div>
                    <p class="mf-empty-text">
                        è¼¸å…¥ä½ æŠ½åˆ°çš„ç‰Œå¡ç·¨è™Ÿ<br>
                        è®“æˆ‘ç‚ºä½ è§£è®€ç•¶å‰çš„ç”Ÿå‘½è¦ºå¯Ÿç‹€æ…‹
                    </p>
                </div>
                
                <!-- çµæœå…§å®¹ï¼ˆåˆå§‹éš±è—ï¼‰ -->
                <div id="resultContent" style="display: none;">
                    
                    <!-- ç¸½åˆ†å€ -->
                    <div class="mf-score-header">
                        <div>
                            <p class="mf-score-label">ç•¶å‰ç”Ÿå‘½è¦ºå¯Ÿ</p>
                            <h3 class="mf-score-title">Frequency Index</h3>
                        </div>
                        <div class="mf-score-value">
                            <span id="totalScore" class="mf-score-number">0</span>
                            <span class="mf-score-max">/ 1000</span>
                        </div>
                    </div>
                    
                    <!-- é€²åº¦æ¢ -->
                    <div class="mf-progress-section">
                        <div class="mf-progress-labels">
                            <span>åŸºç¤æœŸ</span>
                            <span>è¦ºé†’æœŸ</span>
                            <span>é«˜é »æœŸ</span>
                            <span>å¤§å¸«æœŸ</span>
                        </div>
                        <div class="mf-progress-bar">
                            <div id="progressFill" class="mf-progress-fill"></div>
                            <div class="mf-progress-markers">
                                <div class="mf-progress-marker"></div>
                                <div class="mf-progress-marker"></div>
                                <div class="mf-progress-marker"></div>
                                <div class="mf-progress-marker"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é›·é”åœ– -->
                    <div class="mf-chart-section">
                        <div class="mf-chart-container">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- äº”å±¤åˆ†æ•¸ -->
                    <div class="mf-layers-grid">
                        <div class="mf-layer-item">
                            <div class="mf-layer-name">ç”Ÿç† P</div>
                            <div id="scoreP" class="mf-layer-score">0</div>
                        </div>
                        <div class="mf-layer-item">
                            <div class="mf-layer-name">å®‰å…¨ S</div>
                            <div id="scoreS" class="mf-layer-score">0</div>
                        </div>
                        <div class="mf-layer-item">
                            <div class="mf-layer-name">é—œä¿‚ B</div>
                            <div id="scoreB" class="mf-layer-score">0</div>
                        </div>
                        <div class="mf-layer-item">
                            <div class="mf-layer-name">å°Šé‡ E</div>
                            <div id="scoreE" class="mf-layer-score">0</div>
                        </div>
                        <div class="mf-layer-item">
                            <div class="mf-layer-name">å¯¦ç¾ A</div>
                            <div id="scoreA" class="mf-layer-score">0</div>
                        </div>
                    </div>
                    
                    <!-- H.O.U.R. è§£è®€å€ -->
                    <div class="mf-hour-section">
                        <div class="mf-hour-header">
                            <h4 class="mf-hour-title">H.O.U.R. è¦ºå¯Ÿè§£è®€</h4>
                            <p class="mf-hour-subtitle">Heal â†’ Own â†’ Unlock â†’ Rise</p>
                        </div>
                        <div class="mf-hour-body">
                            
                            <!-- å±¤ç´šè§£è®€ -->
                            <div class="mf-interpretation">
                                <p id="levelBadge" class="mf-interpretation-level">
                                    ğŸŒ± åŸºç¤å»ºæ§‹æœŸ
                                </p>
                                <p id="interpretationText" class="mf-interpretation-text">
                                    è§£è®€å…§å®¹å°‡åœ¨è¨ˆç®—å¾Œé¡¯ç¤º...
                                </p>
                            </div>
                            
                            <!-- H.O.U.R. æ­¥é©Ÿ -->
                            <div class="mf-hour-steps">
                                <div class="mf-hour-step">
                                    <div class="mf-step-letter">H</div>
                                    <div class="mf-step-content">
                                        <p class="mf-step-name">Heal èº«å¿ƒæ ¡æº–</p>
                                        <p id="stepH" class="mf-step-action">è¡Œå‹•å»ºè­°è¼‰å…¥ä¸­...</p>
                                    </div>
                                </div>
                                <div class="mf-hour-step">
                                    <div class="mf-step-letter">O</div>
                                    <div class="mf-step-content">
                                        <p class="mf-step-name">Own æ™ºæ…§è¾¨è­˜</p>
                                        <p id="stepO" class="mf-step-action">è¡Œå‹•å»ºè­°è¼‰å…¥ä¸­...</p>
                                    </div>
                                </div>
                                <div class="mf-hour-step">
                                    <div class="mf-step-letter">U</div>
                                    <div class="mf-step-content">
                                        <p class="mf-step-name">Unlock æ½›èƒ½è§£é–</p>
                                        <p id="stepU" class="mf-step-action">è¡Œå‹•å»ºè­°è¼‰å…¥ä¸­...</p>
                                    </div>
                                </div>
                                <div class="mf-hour-step">
                                    <div class="mf-step-letter">R</div>
                                    <div class="mf-step-content">
                                        <p class="mf-step-name">Rise è¡Œå‹•é€²åŒ–</p>
                                        <p id="stepR" class="mf-step-action">è¡Œå‹•å»ºè­°è¼‰å…¥ä¸­...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CTA å€å¡Š -->
                    <div class="mf-cta-section">
                        <p class="mf-cta-text">æƒ³è¦æ›´æ·±å…¥çš„å€‹äººåŒ–è§£è®€ï¼Ÿ</p>
                        <div class="mf-cta-buttons">
                            <a href="consulting.html" class="mf-cta-btn mf-cta-btn-primary">é ç´„ä¸€å°ä¸€è«®è©¢</a>
                            <a href="book.html" class="mf-cta-btn mf-cta-btn-secondary">é–±è®€é¦¥éˆä¹‹é‘°æ›¸ç±</a>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
</main>

<!-- ===== Footer ===== -->
<footer class="hl-footer">
    <div class="hl-footer-inner">
        <div class="hl-footer-brand">é¦¥éˆä¹‹é‘° Hour Light</div>
        <div class="hl-footer-links">
            <a href="index.html">é¦–é </a>
            <a href="services.html">æœå‹™é …ç›®</a>
            <a href="courses.html">èª²ç¨‹å­¸è‹‘</a>
            <a href="fuling-mima.html">é¦¥éˆç§˜ç¢¼</a>
            <a href="privacy.html">éš±ç§æ¬Šæ”¿ç­–</a>
            <a href="terms.html">æœå‹™æ¢æ¬¾</a>
        </div>
        <div class="hl-footer-copyright">
            <span class="hl-footer-copyright-brand">Â© 2026 é¦¥éˆä¹‹é‘°åœ‹éš›æœ‰é™å…¬å¸</span><br>
            Hour Light International Co., Ltd. All Rights Reserved.<br>
            ã€Œé¦¥éˆä¹‹é‘°â„¢ã€ã€ŒH.O.U.R.â„¢ã€ç‚ºæœ¬å…¬å¸å•†æ¨™ï¼ˆç”³è«‹ä¸­ï¼‰
        </div>
    </div>
</footer>

<script>
/**
 * é¦¥éˆä¹‹é‘° - ç”Ÿå‘½è¦ºå¯ŸæŒ‡æ•¸è¨ˆç®—å™¨
 * çµåˆé¦¬æ–¯æ´›éœ€æ±‚å±¤ç´š Ã— H.O.U.R. æ–¹æ³•è«–
 * Â© 2026 é¦¥éˆä¹‹é‘°åœ‹éš›æœ‰é™å…¬å¸
 */

// ===== æ ¸å¿ƒé…ç½® =====
const CONFIG = {
    // äº”å±¤æ»¿åˆ†é…ç½®ï¼ˆåˆè¨ˆ 1000ï¼‰
    MAX_SCORES: { P: 150, S: 200, B: 200, E: 200, A: 250 },
    LEVEL_ORDER: ['P', 'S', 'B', 'E', 'A'],
    LEVEL_NAMES: {
        P: 'ç”Ÿç†éœ€æ±‚',
        S: 'å®‰å…¨éœ€æ±‚',
        B: 'æ­¸å±¬èˆ‡æ„›',
        E: 'å°Šé‡éœ€æ±‚',
        A: 'è‡ªæˆ‘å¯¦ç¾'
    }
};

// ===== å¤§ç§˜å„€åˆ†å±¤ï¼ˆA00-A21ï¼‰=====
// ä¾æ“šå¤§ç§˜å„€çš„éˆæ€§æ„æ¶µé‡æ–°åˆ†é¡
const ARCANA_MAPPING = {
    // A00-A04ï¼šåŸºç¤å®‰å…¨èˆ‡çµæ§‹ï¼ˆæ„šäººâ†’çš‡å¸ï¼‰
    S: { start: 0, end: 4 },
    // A05-A10ï¼šé—œä¿‚èˆ‡é€£çµï¼ˆæ•™çš‡â†’å‘½é‹ä¹‹è¼ªï¼‰
    B: { start: 5, end: 10 },
    // A11-A16ï¼šè‡ªæˆ‘åƒ¹å€¼èˆ‡åŠ›é‡ï¼ˆæ­£ç¾©â†’é«˜å¡”ï¼‰
    E: { start: 11, end: 16 },
    // A17-A21ï¼šéˆæ€§è¦ºé†’èˆ‡è¶…è¶Šï¼ˆæ˜Ÿæ˜Ÿâ†’ä¸–ç•Œï¼‰
    A: { start: 17, end: 21 }
};

// ===== ç²¾æ²¹å¡åˆ†å±¤ï¼ˆ001-108ï¼‰=====
const AROMA_RANGES = [
    { start: 1, end: 21, level: 'P' },    // æ ¹åŸºé¡ç²¾æ²¹
    { start: 22, end: 43, level: 'S' },   // å®‰å®šé¡ç²¾æ²¹
    { start: 44, end: 65, level: 'B' },   // é€£çµé¡ç²¾æ²¹
    { start: 66, end: 87, level: 'E' },   // è‡ªä¿¡é¡ç²¾æ²¹
    { start: 88, end: 108, level: 'A' }   // éˆæ€§é¡ç²¾æ²¹
];

// ===== ä½åºæ¬Šé‡é…ç½® =====
const WEIGHTS = {
    7: [1.0, 1.0, 1.0, 1.1, 1.15, 1.25, 1.4],
    12: [1.0, 1.0, 1.0, 1.05, 1.1, 1.15, 1.2, 1.25, 1.3, 1.4, 1.45, 1.55],
    15: [1.0, 1.0, 1.0, 1.0, 1.0, 1.1, 1.15, 1.2, 1.3, 1.4, 1.5, 1.6, 1.8, 1.9, 2.0],
    21: [1.0, 1.0, 1.0, 1.05, 1.1, 1.15, 1.2, 1.2, 1.25, 1.3, 1.25, 1.3, 1.35, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2.0, 2.2]
};

// ===== H.O.U.R. è§£è®€è³‡æ–™åº« =====
const INTERPRETATIONS = {
    low: {
        range: [0, 350],
        badge: 'ğŸŒ± åŸºç¤å»ºæ§‹æœŸ',
        text: 'è¦ªæ„›çš„ï¼Œä½ çš„èƒ½é‡æ­£è™•æ–¼ã€Œé‡æ–°æ‰æ ¹ã€çš„éšæ®µã€‚é€™ä¸æ˜¯é€€æ­¥ï¼Œè€Œæ˜¯å®‡å®™åœ¨æé†’ä½ ï¼šåœ°åŸºä¸ç©©ï¼Œé«˜æ¨“é›£èµ·ã€‚ç¾åœ¨æœ€é‡è¦çš„ä¸æ˜¯è¿½æ±‚ä»€éº¼å‰å¤§ç›®æ¨™ï¼Œè€Œæ˜¯å…ˆæŠŠèº«é«”ç…§é¡§å¥½ã€æŠŠç”Ÿæ´»æ­¥èª¿ç©©ä¸‹ä¾†ã€‚ç•¶ä½ å…è¨±è‡ªå·±æ…¢ä¸‹ä¾†ï¼Œåè€Œèƒ½è½è¦‹å…§å¿ƒçœŸæ­£çš„è²éŸ³ã€‚',
        steps: {
            H: 'æ¯å¤©èŠ± 10 åˆ†é˜åšè…¹å¼å‘¼å¸ï¼Œæ­é…è–°è¡£è‰æˆ–ä¹³é¦™ç²¾æ²¹ï¼Œè®“ç¥ç¶“ç³»çµ±å›åˆ°å®‰å…¨æ¨¡å¼',
            O: 'ç”¨ã€Œå››æ§‹é¢è¦ºå¯Ÿæ³•ã€æƒæï¼šèº«é«”æœ‰å“ªè£¡ç·Šç¹ƒï¼Ÿæƒ…ç·’æœ‰ä»€éº¼å¡ä½ï¼Ÿå“ªäº›äººéš›é—œä¿‚è®“ä½ æ¶ˆè€—ï¼Ÿ',
            U: 'ä½ ç›®å‰æœ€éœ€è¦çš„ä¸æ˜¯ã€Œæ›´å¤šã€ï¼Œè€Œæ˜¯ã€Œæ¸›å°‘ã€ã€‚åˆ—å‡º 3 ä»¶å¯ä»¥æš«æ™‚æ”¾ä¸‹çš„äº‹',
            R: 'æœ¬é€±åªåšä¸€ä»¶äº‹ï¼šå›ºå®šç¡çœ æ™‚é–“ã€‚é€™æ˜¯æ‰€æœ‰æ”¹è®Šçš„èµ·é»'
        }
    },
    mid: {
        range: [351, 550],
        badge: 'ğŸ¦‹ è¦ºé†’æ“´å¼µæœŸ',
        text: 'ä½ æ­£ç«™åœ¨è½‰è®Šçš„é–€æª»ä¸Šã€‚åŸºæœ¬éœ€æ±‚å·²ç¶“ç«™ç©©ï¼Œå…§å¿ƒé–‹å§‹æ¸´æœ›ã€Œè¢«çœ‹è¦‹ã€å’Œã€Œæœ‰æ„ç¾©ã€ã€‚é€™æ˜¯ä¸€å€‹ç¾å¥½ä½†å®¹æ˜“ç„¦èºçš„éšæ®µâ€”â€”ä½ çŸ¥é“è‡ªå·±å¯ä»¥æ›´å¥½ï¼Œä½†é‚„ä¸å¤ªç¢ºå®šæ–¹å‘ã€‚åˆ¥æ€¥ï¼Œé€™ä»½ã€Œä¸ç¢ºå®šã€æœ¬èº«å°±æ˜¯æˆé•·çš„è­‰æ“šã€‚',
        steps: {
            H: 'å˜—è©¦ã€Œæƒ…ç·’å‘½åã€ç·´ç¿’ï¼šæ¯å¤©è¨˜éŒ„ 3 å€‹æƒ…ç·’ï¼Œä¸¦ç‚ºå®ƒå€‘æ‰¾åˆ°å°æ‡‰çš„èº«é«”æ„Ÿå—',
            O: 'å•è‡ªå·±ï¼šã€Œæˆ‘åšä»€éº¼äº‹æƒ…æ™‚æœƒå¿˜è¨˜æ™‚é–“ï¼Ÿã€é€™å€‹ç­”æ¡ˆè—è‘—ä½ çš„å¤©è³¦å¯†ç¢¼',
            U: 'é¸ä¸€å€‹è®“ä½ å®³æ€•ä½†åˆåš®å¾€çš„å°æŒ‘æˆ°ï¼Œçµ¦è‡ªå·± 30 å¤©å¯¦é©—æœŸ',
            R: 'æ¯é€±å®‰æ’ä¸€å€‹ã€Œæˆå°±æ™‚åˆ»ã€ï¼šå®Œæˆä¸€ä»¶è®“è‡ªå·±é©•å‚²çš„äº‹ï¼Œä¸è«–å¤§å°'
        }
    },
    high: {
        range: [551, 750],
        badge: 'âœ¨ é«˜é »é¡¯åŒ–æœŸ',
        text: 'ä½ çš„èƒ½é‡å·²ç¶“é€²å…¥ã€Œå‰µé€ è€…æ¨¡å¼ã€ã€‚è‡ªæˆ‘å¯¦ç¾çš„æ¯”é‡æ˜é¡¯æå‡ï¼Œä»£è¡¨ä½ è¶Šä¾†è¶Šæ¸…æ¥šè‡ªå·±æ˜¯èª°ã€æƒ³è¦ä»€éº¼ã€‚é€™å€‹éšæ®µçš„èª²é¡Œæ˜¯ã€Œæ•´åˆã€â€”â€”å¦‚ä½•è®“å…§åœ¨çš„è¦ºçŸ¥èˆ‡å¤–åœ¨çš„è¡Œå‹•ä¸€è‡´ï¼Œè€Œä¸æ˜¯åªåœ¨è…¦è¢‹è£¡æ‰“è½‰ã€‚',
        steps: {
            H: 'ç”¨å†¥æƒ³æˆ–éœå¿ƒç·´ç¿’ä¿æŒç©©å®šç‹€æ…‹ï¼Œæ¨è–¦æ­é…æª€é¦™ã€ä¹³é¦™æˆ–é›ªæ¾ç²¾æ²¹',
            O: 'è¦ºå¯Ÿè‡ªå·±çš„ã€Œèƒ½é‡é‚Šç•Œã€ï¼šå“ªäº›äººäº‹ç‰©æœƒæ‹‰ä½ä½ çš„ç‹€æ…‹ï¼Ÿå¦‚ä½•å„ªé›…åœ°è¨­é™ï¼Ÿ',
            U: 'é–‹å§‹æ€è€ƒã€Œå‚³æ‰¿ã€ï¼šä½ çš„ç¶“é©—å¦‚ä½•èƒ½å¹«åŠ©åˆ°æ­£åœ¨èµ°ä½ èµ°éçš„è·¯çš„äººï¼Ÿ',
            R: 'æ¯æœˆè¨­å®šä¸€å€‹å…·é«”çš„ã€Œå½±éŸ¿åŠ›ç›®æ¨™ã€ï¼šå¸¶é ˜ã€åˆ†äº«ã€å‰µé€ æ­£å‘æ¼£æ¼ª'
        }
    },
    master: {
        range: [751, 1000],
        badge: 'ğŸ‘‘ å¤§å¸«é¡¯åŒ–æœŸ',
        text: 'é€™æ˜¯éå¸¸ç¨€æœ‰çš„èƒ½é‡ç‹€æ…‹ã€‚ä½ ä¸åªæ˜¯åœ¨ã€Œåšã€ï¼Œè€Œæ˜¯åœ¨ã€Œæˆç‚ºã€ã€‚ä½ çš„å­˜åœ¨æœ¬èº«å°±æ˜¯ä¸€ç¨®å½±éŸ¿åŠ›ï¼Œä¸éœ€è¦åˆ»æ„è­‰æ˜ä»€éº¼ã€‚é€™å€‹éšæ®µçš„èª²é¡Œæ˜¯ã€Œæ”¾ä¸‹åŸ·è‘—ã€â€”â€”åŒ…æ‹¬å°é«˜èƒ½é‡ç‹€æ…‹æœ¬èº«çš„åŸ·è‘—ã€‚çœŸæ­£çš„è‡ªç”±ï¼Œæ˜¯ä¸å†éœ€è¦ä»»ä½•æ¨™ç±¤ä¾†å®šç¾©è‡ªå·±ã€‚',
        steps: {
            H: 'ç·´ç¿’ã€Œç„¡ç‚ºã€ï¼šå…è¨±è‡ªå·±ä»€éº¼éƒ½ä¸åšï¼Œåªæ˜¯å­˜åœ¨ã€‚é€™å°ä½ åè€Œæ˜¯æœ€é›£çš„åŠŸèª²',
            O: 'è¦ºå¯Ÿï¼šä½ æ˜¯å¦é–‹å§‹å°ã€Œç¶­æŒé«˜é »ã€ç”¢ç”Ÿå£“åŠ›ï¼Ÿé‚£æœ¬èº«å°±æ˜¯ä¸€ç¨®åŸ·å¿µ',
            U: 'ä½ çš„ä¸‹ä¸€æ­¥å¯èƒ½ä¸æ˜¯ã€Œæ›´é«˜ã€ï¼Œè€Œæ˜¯ã€Œæ›´æ·±ã€â€”â€”å¾€å…§åœ¨çš„å¯§éœèµ°',
            R: 'é¸æ“‡ä¸€å€‹ä½ çœŸæ­£æƒ³è¦çš„æ–¹å¼å»æœå‹™ï¼Œä¸æ˜¯å› ç‚ºã€Œæ‡‰è©²ã€ï¼Œè€Œæ˜¯å› ç‚ºã€Œæƒ³è¦ã€'
        }
    }
};

// ===== åœ–è¡¨å¯¦ä¾‹ =====
let radarChart = null;

// ===== å·¥å…·å‡½æ•¸ =====
function updatePlaceholder() {
    const type = document.getElementById('spreadType').value;
    const textarea = document.getElementById('cardInput');
    const placeholders = {
        7: 'æ–¹æ³•ä¸€ï¼šç›´æ¥è²¼ä¸ŠæŠ½ç‰Œçµæœ\næ–¹æ³•äºŒï¼šè¼¸å…¥ç‰Œè™Ÿï¼ˆå¦‚ï¼šA14, 028, A17...ï¼‰\n\nç³»çµ±æœƒè‡ªå‹•è­˜åˆ¥ 7 å¼µç‰Œçš„ä½åºæ¬Šé‡',
        12: 'æ–¹æ³•ä¸€ï¼šç›´æ¥è²¼ä¸ŠæŠ½ç‰Œçµæœ\næ–¹æ³•äºŒï¼šè¼¸å…¥ç‰Œè™Ÿï¼ˆå¦‚ï¼šA14, 028, A17...ï¼‰\n\nç³»çµ±æœƒè‡ªå‹•è­˜åˆ¥ 12 å¼µç‰Œçš„ä½åºæ¬Šé‡',
        15: 'æ–¹æ³•ä¸€ï¼šç›´æ¥è²¼ä¸ŠæŠ½ç‰Œçµæœ\næ–¹æ³•äºŒï¼šè¼¸å…¥ç‰Œè™Ÿï¼ˆå¦‚ï¼šA14, 028, A17...ï¼‰\n\nç³»çµ±æœƒè‡ªå‹•è­˜åˆ¥ 15 å¼µç‰Œçš„ä½åºæ¬Šé‡',
        21: 'æ–¹æ³•ä¸€ï¼šç›´æ¥è²¼ä¸ŠæŠ½ç‰Œçµæœ\næ–¹æ³•äºŒï¼šè¼¸å…¥ç‰Œè™Ÿï¼ˆå¦‚ï¼šA14, 028, A17...ï¼‰\n\nç³»çµ±æœƒè‡ªå‹•è­˜åˆ¥ 21 å¼µç‰Œçš„ä½åºæ¬Šé‡',
        custom: 'æ–¹æ³•ä¸€ï¼šç›´æ¥è²¼ä¸ŠæŠ½ç‰Œçµæœ\næ–¹æ³•äºŒï¼šè¼¸å…¥ç‰Œè™Ÿï¼ˆå¦‚ï¼šA14, 028, A17...ï¼‰\n\nè‡ªè¨‚æ•¸é‡ä½¿ç”¨å‡ç­‰æ¬Šé‡'
    };
    textarea.placeholder = placeholders[type] || placeholders.custom;
}

function parseCard(input) {
    input = input.trim().toUpperCase().replace(/^NO\.?/, '');
    
    // å¤§ç§˜å„€ï¼šA00-A21
    if (input.startsWith('A')) {
        const num = parseInt(input.substring(1));
        if (!isNaN(num) && num >= 0 && num <= 21) {
            return { type: 'arcana', val: num, raw: input };
        }
    }
    
    // ç²¾æ²¹å¡ï¼š001-108
    const num = parseInt(input);
    if (!isNaN(num) && num >= 1 && num <= 108) {
        return { type: 'aroma', val: num, raw: input };
    }
    
    return null;
}

function getArcanaLevel(val) {
    for (const [level, range] of Object.entries(ARCANA_MAPPING)) {
        if (val >= range.start && val <= range.end) {
            return level;
        }
    }
    return 'S'; // é è¨­
}

function getAromaLevel(val) {
    const range = AROMA_RANGES.find(r => val >= r.start && val <= r.end);
    return range ? range.level : 'P';
}

function getNeighborLevels(level) {
    const idx = CONFIG.LEVEL_ORDER.indexOf(level);
    const neighbors = [];
    if (idx > 0) neighbors.push(CONFIG.LEVEL_ORDER[idx - 1]);
    if (idx < CONFIG.LEVEL_ORDER.length - 1) neighbors.push(CONFIG.LEVEL_ORDER[idx + 1]);
    return neighbors;
}

// ===== ä¸»è¨ˆç®—å‡½æ•¸ =====
function calculateFrequency() {
    const inputStr = document.getElementById('cardInput').value;
    
    // æ™ºèƒ½è§£æï¼šæ”¯æ´å¤šç¨®è¼¸å…¥æ ¼å¼
    // æ ¼å¼1ï¼šç°¡å–®åˆ—è¡¨ "A14, 028, A17, 084"
    // æ ¼å¼2ï¼šå®Œæ•´æŠ½ç‰Œçµæœï¼ˆå¾æŠ½ç‰Œå·¥å…·è¤‡è£½ï¼‰
    
    let cards = [];
    
    // æª¢æŸ¥æ˜¯å¦æ˜¯å®Œæ•´æŠ½ç‰Œçµæœæ ¼å¼ï¼ˆåŒ…å«ã€ŒæŠ½ç‰Œå¼µæ•¸ã€æˆ–ç‰¹å®šæ¨™è¨˜ï¼‰
    if (inputStr.includes('æŠ½ç‰Œçµæœ') || inputStr.includes('â–¸') || inputStr.includes('ğŸ’­')) {
        // å®Œæ•´æŠ½ç‰Œçµæœæ ¼å¼ï¼šå¾æ¯è¡Œæå–ç‰Œè™Ÿ
        // æ ¼å¼ç¯„ä¾‹ï¼šã€Œ  A14 å…§åœ¨å¹³è¡¡ã€æˆ–ã€Œ  028 æª¸æª¬è‰ã€
        const lines = inputStr.split('\n');
        
        for (const line of lines) {
            // åŒ¹é…å¤§ç§˜å„€ï¼šA + æ•¸å­—ï¼ˆA0, A1, A01, A14, A21 ç­‰ï¼‰
            const arcanaMatch = line.match(/\bA(\d{1,2})\b/i);
            if (arcanaMatch) {
                const num = parseInt(arcanaMatch[1]);
                if (num >= 0 && num <= 21) {
                    cards.push({ type: 'arcana', val: num, raw: 'A' + num });
                }
                continue;
            }
            
            // åŒ¹é…ç²¾æ²¹å¡ï¼šç¨ç«‹çš„ä¸‰ä½æ•¸å­—ï¼ˆ001-108ï¼‰
            // ä½†è¦æ’é™¤ã€Œ15 å¼µã€é€™ç¨®æŠ½ç‰Œå¼µæ•¸æè¿°
            const aromaMatch = line.match(/^\s*(\d{2,3})\s+[\u4e00-\u9fff]/);
            if (aromaMatch) {
                const num = parseInt(aromaMatch[1]);
                if (num >= 1 && num <= 108) {
                    cards.push({ type: 'aroma', val: num, raw: String(num).padStart(3, '0') });
                }
            }
        }
    } else {
        // ç°¡å–®åˆ—è¡¨æ ¼å¼
        const rawTokens = inputStr.split(/[\s,ï¼Œã€\n]+/);
        cards = rawTokens.map(t => parseCard(t)).filter(c => c !== null);
    }
    
    if (cards.length === 0) {
        alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„ç‰Œå¡è³‡æ–™ï¼\n\næ”¯æ´å…©ç¨®æ ¼å¼ï¼š\n1. ç›´æ¥è²¼ä¸ŠæŠ½ç‰Œçµæœ\n2. è¼¸å…¥ç‰Œè™Ÿåˆ—è¡¨ï¼ˆå¦‚ï¼šA14, 028, A17...ï¼‰');
        return;
    }
    
    // è‡ªå‹•åµæ¸¬ç‰Œé™£å¼µæ•¸
    const spreadType = document.getElementById('spreadType').value;
    let detectedSpread = spreadType;
    
    if (spreadType === 'custom' || 
        (spreadType === '7' && cards.length !== 7) ||
        (spreadType === '12' && cards.length !== 12) ||
        (spreadType === '15' && cards.length !== 15) ||
        (spreadType === '21' && cards.length !== 21)) {
        // è‡ªå‹•åµæ¸¬æœ€æ¥è¿‘çš„ç‰Œé™£
        if (cards.length <= 7) detectedSpread = '7';
        else if (cards.length <= 12) detectedSpread = '12';
        else if (cards.length <= 15) detectedSpread = '15';
        else detectedSpread = '21';
    }
    
    let weights = WEIGHTS[detectedSpread] || new Array(cards.length).fill(1.0);
    
    // åˆå§‹åŒ–åˆ†æ•¸
    let scores = { P: 0, S: 0, B: 0, E: 0, A: 0 };
    let totalMaxPossible = 0;
    
    // è¨ˆç®—æ¯å¼µç‰Œçš„åˆ†æ•¸
    cards.forEach((card, index) => {
        // å–å¾—ä½åºæ¬Šé‡
        let w = 1.0;
        if (spreadType !== 'custom' && index < weights.length) {
            w = weights[index];
        } else if (spreadType !== 'custom' && index >= weights.length) {
            w = weights[weights.length - 1];
        }
        
        totalMaxPossible += 200 * w;
        
        if (card.type === 'arcana') {
            // å¤§ç§˜å„€è¨ˆç®—
            const level = getArcanaLevel(card.val);
            const levelMax = CONFIG.MAX_SCORES[level];
            
            // åŸºç¤åˆ†æ•¸ï¼š70% ~ 100% éš¨ç·¨è™Ÿéå¢
            const baseScore = levelMax * (0.70 + 0.30 * (card.val / 21));
            scores[level] += baseScore * w;
            
            // é‚Šç•Œæ“´æ•£ï¼š5% çµ¦ç›¸é„°å±¤
            const neighbors = getNeighborLevels(level);
            const diffusionScore = baseScore * 0.05;
            neighbors.forEach(n => scores[n] += diffusionScore * w);
            
        } else {
            // ç²¾æ²¹å¡è¨ˆç®—
            const level = getAromaLevel(card.val);
            const levelMax = CONFIG.MAX_SCORES[level];
            const range = AROMA_RANGES.find(r => r.level === level);
            
            // å±¤å…§æ¯”ä¾‹
            let ratio = (card.val - range.start) / (range.end - range.start);
            ratio = Math.max(0.15, Math.min(1, ratio)); // ä¿åº• 15%
            
            scores[level] += levelMax * ratio * w;
        }
    });
    
    // ===== é‡æ–°è¨­è¨ˆçš„æ­£è¦åŒ–é‚è¼¯ v2 =====
    // ç›®æ¨™åˆ†ä½ˆï¼ˆæ›´åš´æ ¼ï¼‰ï¼š
    // - ä¸€èˆ¬äººï¼ˆéš¨æ©ŸæŠ½ç‰Œï¼‰ï¼š200-400 åˆ†
    // - è¦ºé†’æœŸï¼ˆæœ‰æ„è­˜æˆé•·è€…ï¼‰ï¼š401-550 åˆ†
    // - é«˜é »å€ï¼ˆç©©å®šä¿®ç·´è€…ï¼‰ï¼š551-700 åˆ†
    // - å¤§å¸«æœŸï¼ˆæ¥µå°‘æ•¸ï¼‰ï¼š701-1000 åˆ†
    
    const rawTotal = scores.P + scores.S + scores.B + scores.E + scores.A;
    
    // è¨ˆç®—ã€Œç†è«–æ»¿åˆ†ã€çš„æ¯”ä¾‹
    // æ¯å¼µç‰Œå¦‚æœéƒ½æ‹¿åˆ°å°æ‡‰å±¤ç´šçš„ã€Œæ»¿åˆ†ã€ï¼Œå¹³å‡ç´„ 200 åˆ†
    // ä½†è€ƒæ…®åˆ°å¤§ç§˜å„€çš„é‚Šç•Œæ“´æ•£å’Œä½åºæ¬Šé‡ï¼Œå¯¦éš›æœƒæ›´é«˜
    const cardCount = cards.length;
    
    // è¨ˆç®—åŠ æ¬Šå¾Œçš„ç†è«–æœ€å¤§å€¼
    let theoreticalMax = 0;
    cards.forEach((card, index) => {
        const w = (spreadType !== 'custom' && WEIGHTS[spreadType]) 
            ? (WEIGHTS[spreadType][index] || WEIGHTS[spreadType][WEIGHTS[spreadType].length - 1]) 
            : 1.0;
        // å‡è¨­æ¯å¼µç‰Œéƒ½æ‹¿åˆ°æœ€é«˜å±¤ç´šï¼ˆAå±¤ 250åˆ†ï¼‰çš„æ»¿åˆ†
        theoreticalMax += 250 * w;
    });
    
    // åŸå§‹åˆ†æ•¸ä½”ç†è«–æœ€å¤§å€¼çš„æ¯”ä¾‹
    let rawRatio = rawTotal / theoreticalMax;
    
    // ä½¿ç”¨èª¿æ•´éçš„æ˜ å°„å‡½æ•¸
    // ä¸ç”¨ Sigmoidï¼Œæ”¹ç”¨åˆ†æ®µç·šæ€§æ˜ å°„ï¼Œæ›´ç›´è§€
    let normalizedTotal;
    
    if (rawRatio <= 0.25) {
        // 0-25% â†’ 100-300 åˆ†ï¼ˆåŸºç¤æœŸï¼‰
        normalizedTotal = 100 + (rawRatio / 0.25) * 200;
    } else if (rawRatio <= 0.45) {
        // 25-45% â†’ 300-450 åˆ†ï¼ˆè¦ºé†’æœŸï¼‰
        normalizedTotal = 300 + ((rawRatio - 0.25) / 0.20) * 150;
    } else if (rawRatio <= 0.65) {
        // 45-65% â†’ 450-600 åˆ†ï¼ˆé«˜é »æœŸï¼‰
        normalizedTotal = 450 + ((rawRatio - 0.45) / 0.20) * 150;
    } else if (rawRatio <= 0.85) {
        // 65-85% â†’ 600-750 åˆ†ï¼ˆé«˜é »æœŸä¸Šæ®µï¼‰
        normalizedTotal = 600 + ((rawRatio - 0.65) / 0.20) * 150;
    } else {
        // 85%+ â†’ 750-1000 åˆ†ï¼ˆå¤§å¸«æœŸï¼Œæ¥µé›£ï¼‰
        normalizedTotal = 750 + ((rawRatio - 0.85) / 0.15) * 250;
    }
    
    normalizedTotal = Math.max(100, Math.min(1000, Math.round(normalizedTotal)));
    
    // è¨ˆç®—å„å±¤é¡¯ç¤ºåˆ†æ•¸
    const scaleFactor = normalizedTotal / rawTotal;
    const finalScores = {
        P: Math.round((scores.P / rawTotal) * normalizedTotal) || 0,
        S: Math.round((scores.S / rawTotal) * normalizedTotal) || 0,
        B: Math.round((scores.B / rawTotal) * normalizedTotal) || 0,
        E: Math.round((scores.E / rawTotal) * normalizedTotal) || 0,
        A: Math.round((scores.A / rawTotal) * normalizedTotal) || 0
    };
    
    // ä¿®æ­£å°¾å·®
    const checkSum = finalScores.P + finalScores.S + finalScores.B + finalScores.E + finalScores.A;
    if (checkSum !== normalizedTotal) {
        finalScores.A += (normalizedTotal - checkSum);
    }
    
    displayResults(finalScores, normalizedTotal);
}

// ===== é¡¯ç¤ºçµæœ =====
function displayResults(scores, total) {
    // é¡¯ç¤ºçµæœå¡ç‰‡
    const resultCard = document.getElementById('resultCard');
    resultCard.classList.add('is-visible');
    
    // éš±è—ç©ºç‹€æ…‹ï¼Œé¡¯ç¤ºå…§å®¹
    document.getElementById('emptyState').style.display = 'none';
    document.getElementById('resultContent').style.display = 'block';
    
    // æ›´æ–°ç¸½åˆ†
    document.getElementById('totalScore').textContent = total;
    
    // æ›´æ–°é€²åº¦æ¢ï¼ˆå»¶é²å‹•ç•«ï¼‰
    setTimeout(() => {
        document.getElementById('progressFill').style.width = (total / 10) + '%';
    }, 100);
    
    // æ›´æ–°äº”å±¤åˆ†æ•¸
    document.getElementById('scoreP').textContent = scores.P;
    document.getElementById('scoreS').textContent = scores.S;
    document.getElementById('scoreB').textContent = scores.B;
    document.getElementById('scoreE').textContent = scores.E;
    document.getElementById('scoreA').textContent = scores.A;
    
    // å–å¾—å°æ‡‰è§£è®€
    let interpretation;
    if (total <= 350) {
        interpretation = INTERPRETATIONS.low;
    } else if (total <= 550) {
        interpretation = INTERPRETATIONS.mid;
    } else if (total <= 750) {
        interpretation = INTERPRETATIONS.high;
    } else {
        interpretation = INTERPRETATIONS.master;
    }
    
    // æ›´æ–°è§£è®€å…§å®¹
    document.getElementById('levelBadge').textContent = interpretation.badge;
    document.getElementById('interpretationText').textContent = interpretation.text;
    
    // æ›´æ–° H.O.U.R. æ­¥é©Ÿ
    document.getElementById('stepH').textContent = interpretation.steps.H;
    document.getElementById('stepO').textContent = interpretation.steps.O;
    document.getElementById('stepU').textContent = interpretation.steps.U;
    document.getElementById('stepR').textContent = interpretation.steps.R;
    
    // æ›´æ–°é›·é”åœ–
    updateRadarChart(scores);
    
    // æ»¾å‹•åˆ°çµæœå€
    resultCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// ===== æ›´æ–°é›·é”åœ– =====
function updateRadarChart(scores) {
    const ctx = document.getElementById('radarChart').getContext('2d');
    
    if (radarChart) {
        radarChart.destroy();
    }
    
    radarChart = new Chart(ctx, {
        type: 'radar',
        data: {
            labels: ['ç”Ÿç† P', 'å®‰å…¨ S', 'é—œä¿‚ B', 'å°Šé‡ E', 'å¯¦ç¾ A'],
            datasets: [{
                label: 'èƒ½é‡åˆ†ä½ˆ',
                data: [scores.P, scores.S, scores.B, scores.E, scores.A],
                fill: true,
                backgroundColor: 'rgba(233, 194, 125, 0.15)',
                borderColor: 'rgba(233, 194, 125, 0.8)',
                borderWidth: 2,
                pointBackgroundColor: '#e9c27d',
                pointBorderColor: '#fbe6c2',
                pointBorderWidth: 2,
                pointRadius: 5,
                pointHoverRadius: 7,
                pointHoverBackgroundColor: '#fbe6c2',
                pointHoverBorderColor: '#e9c27d'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            scales: {
                r: {
                    angleLines: {
                        color: 'rgba(233, 194, 125, 0.15)'
                    },
                    grid: {
                        color: 'rgba(233, 194, 125, 0.1)'
                    },
                    pointLabels: {
                        font: {
                            size: 12,
                            family: "'Noto Sans TC', sans-serif",
                            weight: '500'
                        },
                        color: '#c4b7a6'
                    },
                    ticks: {
                        display: false
                    },
                    suggestedMin: 0,
                    suggestedMax: Math.max(250, Math.max(scores.P, scores.S, scores.B, scores.E, scores.A) + 30)
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    backgroundColor: 'rgba(10, 6, 24, 0.95)',
                    titleColor: '#e9c27d',
                    bodyColor: '#f7efe1',
                    borderColor: 'rgba(233, 194, 125, 0.3)',
                    borderWidth: 1,
                    padding: 12,
                    cornerRadius: 8
                }
            }
        }
    });
}

// ===== åˆå§‹åŒ– =====
document.addEventListener('DOMContentLoaded', function() {
    updatePlaceholder();
    
    // é¡¯ç¤ºçµæœå¡ç‰‡ï¼ˆä½†å…§å®¹éš±è—ï¼‰
    document.getElementById('resultCard').classList.add('is-visible');
});
</script>

<!-- ========== æµ®å‹• LINE æŒ‰éˆ•ï¼ˆç»ç’ƒæ“¬æ…‹ï¼‰========== -->
<a href="https://lin.ee/OQDB5t6" target="_blank" rel="noopener" class="hl-float-line">
  <span class="hl-float-line-icon">ğŸ’¬</span>
  <span class="hl-float-line-text">LINE è«®è©¢</span>
</a>
<!-- ========== End æµ®å‹• LINE æŒ‰éˆ• ========== -->
</body>
</html>
