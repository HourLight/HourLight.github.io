<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ç‘ªé›…æ›†è¨ˆç®—å™¨ï½œé¦¥éˆä¹‹é‘°</title>
<meta name="description" content="æ‰¾åˆ°ä½ çš„ç‘ªé›…åœ–é¨°,è§£é–ä½ çš„å®‡å®™å°è¨˜ã€‚æºè‡ªå°ç£,é¦¥éˆä¹‹é‘°ã€‚">
<link rel="icon" href="favicon.ico" />
<style>
  :root{
    --milk:#f9f5f0; --cocoa:#6b4f3e;
    --rose:#cda86e; --rose-dark:#a88257;
    --ink:#2a2a2a; --line:rgba(0,0,0,.10);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    background:url('https://github.com/HourLight/11/raw/main/background.jpg') center/cover fixed no-repeat;
    font-family:"Noto Sans TC","PingFang TC","Arial",sans-serif;
    color:var(--ink);
    padding:20px;
    min-height:100vh;
  }
  .container{
    max-width:700px;
    margin:0 auto;
    background:rgba(255,255,255,.95);
    backdrop-filter:blur(8px);
    border-radius:20px;
    padding:40px 32px;
    box-shadow:0 12px 40px rgba(0,0,0,.15);
  }
  h1{
    text-align:center;
    color:var(--cocoa);
    font-size:clamp(1.8rem,4vw,2.2rem);
    margin-bottom:8px;
    font-weight:900;
  }
  .subtitle{
    text-align:center;
    color:#888;
    font-size:0.9rem;
    margin-bottom:32px;
  }

  .input-section{
    background:rgba(249,245,240,.6);
    border-radius:16px;
    padding:24px;
    margin-bottom:24px;
  }
  .input-label{
    font-size:0.95rem;
    font-weight:700;
    color:var(--cocoa);
    margin-bottom:12px;
    display:block;
  }
  .date-input{
    width:100%;
    padding:14px 16px;
    border:2px solid var(--line);
    border-radius:12px;
    font-size:1rem;
    font-family:inherit;
    transition:.25s;
    background:#fff;
  }
  .date-input:focus{
    outline:none;
    border-color:var(--rose);
    box-shadow:0 0 0 3px rgba(205,168,110,.15);
  }

  .calc-btn{
    display:block;
    width:100%;
    background:linear-gradient(135deg,var(--rose),var(--rose-dark));
    color:#fff;
    border:none;
    padding:16px 24px;
    border-radius:14px;
    font-size:1.1rem;
    font-weight:900;
    cursor:pointer;
    box-shadow:0 6px 18px rgba(205,168,110,.4);
    transition:.25s;
    margin-top:16px;
  }
  .calc-btn:hover{
    transform:translateY(-3px);
    box-shadow:0 8px 24px rgba(205,168,110,.5);
  }

  .result-section{
    display:none;
    margin-top:32px;
  }
  .result-section.show{
    display:block;
    animation:fadeIn 0.5s;
  }
  @keyframes fadeIn{
    from{opacity:0;transform:translateY(20px)}
    to{opacity:1;transform:translateY(0)}
  }

  .maya-card{
    background:linear-gradient(135deg,rgba(205,168,110,.2),rgba(168,130,87,.15));
    border:3px solid var(--rose);
    border-radius:16px;
    padding:32px 24px;
    margin-bottom:24px;
    text-align:center;
  }
  .kin-number{
    font-size:1rem;
    color:#888;
    margin-bottom:8px;
    font-weight:600;
  }
  .totem-icon{
    font-size:4rem;
    margin:12px 0;
  }
  .totem-name{
    font-size:1.8rem;
    font-weight:900;
    color:var(--cocoa);
    margin-bottom:8px;
  }
  .tone-name{
    font-size:1.2rem;
    color:var(--rose);
    font-weight:700;
    margin-bottom:16px;
  }
  .totem-desc{
    font-size:1rem;
    color:#666;
    line-height:1.7;
  }

  .info-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
    gap:16px;
    margin-bottom:24px;
  }
  .info-card{
    background:#fff;
    border:2px solid var(--line);
    border-radius:12px;
    padding:20px 16px;
    text-align:center;
  }
  .info-card-title{
    font-size:0.85rem;
    color:#888;
    margin-bottom:8px;
    font-weight:600;
  }
  .info-card-value{
    font-size:1.1rem;
    font-weight:800;
    color:var(--cocoa);
  }

  .detail-section{
    background:rgba(249,245,240,.6);
    border-radius:12px;
    padding:20px;
    margin-bottom:20px;
  }
  .detail-title{
    font-size:1rem;
    font-weight:800;
    color:var(--cocoa);
    margin-bottom:12px;
  }
  .detail-text{
    font-size:0.95rem;
    color:#666;
    line-height:1.6;
  }

  .copy-btn{
    display:block;
    width:100%;
    background:#fff;
    border:2px solid var(--cocoa);
    color:var(--cocoa);
    padding:12px 20px;
    border-radius:12px;
    font-size:1rem;
    font-weight:800;
    cursor:pointer;
    transition:.25s;
    margin-bottom:16px;
  }
  .copy-btn:hover{
    background:var(--cocoa);
    color:#fff;
    transform:translateY(-2px);
  }
  .copy-btn.copied{
    background:#4caf50;
    border-color:#4caf50;
    color:#fff;
  }

  /* CTAå€å¡Š */
  .cta-section{
    background:linear-gradient(135deg,#f5e6d3,#e8c39e);
    border-radius:16px;
    padding:32px 24px;
    text-align:center;
    margin:24px 0;
  }
  .cta-section h3{
    color:var(--cocoa);
    font-size:1.4rem;
    font-weight:900;
    margin-bottom:12px;
  }
  .cta-section p{
    color:#5a4a3a;
    font-size:0.95rem;
    line-height:1.7;
    margin-bottom:20px;
  }
  .cta-btns{
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  .cta-btn{
    display:block;
    text-decoration:none;
    padding:14px 24px;
    border-radius:999px;
    font-weight:900;
    font-size:1rem;
    transition:.25s;
    text-align:center;
  }
  .cta-btn.primary{
    background:linear-gradient(135deg,var(--cocoa),#3a2a1f);
    color:#fff;
    border:2px solid rgba(255,255,255,.9);
  }
  .cta-btn.primary:hover{
    transform:translateY(-2px);
    box-shadow:0 6px 20px rgba(42,42,42,.4);
  }
  .cta-btn.secondary{
    background:#fff;
    color:var(--cocoa);
    border:2px solid var(--cocoa);
  }
  .cta-btn.secondary:hover{
    background:var(--cocoa);
    color:#fff;
    transform:translateY(-2px);
  }

  .back-home{
    display:block;
    text-align:center;
    margin-top:24px;
    color:var(--rose);
    text-decoration:none;
    font-weight:700;
    transition:.25s;
  }
  .back-home:hover{
    color:var(--rose-dark);
    text-decoration:underline;
  }

  @media(max-width:600px){
    .container{padding:28px 20px}
    .totem-icon{font-size:3rem}
    .totem-name{font-size:1.5rem}
  }
</style>
</head>
<body>
  <div class="container">
    <h1>ğŸŒ€ ç‘ªé›…æ›†è¨ˆç®—å™¨</h1>
    <p class="subtitle">ğŸ‡¹ğŸ‡¼ æºè‡ªå°ç£ï½œé¦¥éˆä¹‹é‘°</p>

    <div class="input-section">
      <label class="input-label">è«‹è¼¸å…¥ä½ çš„å‡ºç”Ÿæ—¥æœŸ</label>
      <input type="date" class="date-input" id="birthDate" min="1900-01-01" max="2100-12-31">
      <button class="calc-btn" onclick="calculate()">ğŸ”® æ‰¾åˆ°æˆ‘çš„ç‘ªé›…å°è¨˜</button>
    </div>

    <div class="result-section" id="resultSection">
      <div class="maya-card">
        <div class="kin-number" id="kinNumber">KIN -</div>
        <div class="totem-icon" id="totemIcon">-</div>
        <div class="totem-name" id="totemName">-</div>
        <div class="tone-name" id="toneName">-</div>
        <div class="totem-desc" id="totemDesc">-</div>
      </div>

      <div class="info-grid">
        <div class="info-card">
          <div class="info-card-title">æ³¢ç¬¦</div>
          <div class="info-card-value" id="waveSpell">-</div>
        </div>
        <div class="info-card">
          <div class="info-card-title">èª¿æ€§</div>
          <div class="info-card-value" id="toneValue">-</div>
        </div>
        <div class="info-card">
          <div class="info-card-title">é¡è‰²</div>
          <div class="info-card-value" id="colorValue">-</div>
        </div>
      </div>

      <div class="detail-section">
        <div class="detail-title">âœ¨ ä½ çš„èƒ½é‡ç‰¹è³ª</div>
        <div class="detail-text" id="energyText">-</div>
      </div>

      <div class="detail-section">
        <div class="detail-title">ğŸ’« çµ¦ä½ çš„è¨Šæ¯</div>
        <div class="detail-text" id="messageText">-</div>
      </div>

      <button class="copy-btn" onclick="copyResult()">ğŸ“‹ ä¸€éµè¤‡è£½çµæœ</button>

      <!-- CTAå€å¡Š -->
      <div class="cta-section">
        <h3>ğŸŒŸ æƒ³è¦æ›´æ·±å…¥çš„è§£è®€?</h3>
        <p>ç‘ªé›…æ›†åªæ˜¯é–‹å§‹ã€‚é¦¥éˆä¹‹é‘°130å¼µæ™ºæ…§ç‰Œå¡,çµåˆç”Ÿå‘½éˆæ•¸ã€å¡”ç¾…ã€èŠ³ç™‚,ç‚ºä½ æä¾›å®Œæ•´çš„æƒ…ç·’å°èˆªã€‚</p>
        <div class="cta-btns">
          <a href="draw-hl.html" class="cta-btn primary">ğŸ”® å…è²»æŠ½å–é¦¥éˆä¹‹é‘°ç‰Œå¡</a>
          <a href="consulting.html" class="cta-btn secondary">ğŸ’« é ç´„ä¸€å°ä¸€æ·±åº¦è§£è®€</a>
        </div>
      </div>
    </div>

    <a href="index-new.html" class="back-home">ğŸ  è¿”å›é¦–é </a>
  </div>

<script>
const totems = [
  {name:'ç´…é¾',icon:'ğŸ‰',desc:'ç”Ÿå‘½çš„æºé ­,æ»‹é¤Šèˆ‡èª•ç”Ÿçš„èƒ½é‡',energy:'ä½ æ“æœ‰å¼·å¤§çš„æ»‹é¤Šèƒ½é‡,å¤©ç”Ÿæ˜¯ç…§é¡§è€…å’Œå‰µé€ è€…ã€‚ä½ çš„å­˜åœ¨æœ¬èº«å°±æ˜¯ä¸€ç¨®ç¥ç¦,èƒ½å¤ å­•è‚²æ–°çš„å¯èƒ½æ€§ã€‚',message:'ç›¸ä¿¡ä½ å…§åœ¨çš„å‰µé€ åŠ›,ä½ æœ‰èƒ½åŠ›èª•ç”Ÿå…¨æ–°çš„è‡ªå·±ã€‚'},
  {name:'ç™½é¢¨',icon:'ğŸŒ¬ï¸',desc:'éˆæ€§çš„å‘¼å¸,æºé€šèˆ‡å‚³éçš„èƒ½é‡',energy:'ä½ æ˜¯éˆæ€§çš„ä¿¡ä½¿,å¤©ç”Ÿå–„æ–¼æºé€šå’Œå‚³éè¨Šæ¯ã€‚ä½ çš„è©±èªå……æ»¿åŠ›é‡,èƒ½å¤ å•Ÿç™¼ä»–äººã€‚',message:'èªªå‡ºä½ çš„çœŸå¯¦,è®“ä½ çš„è²éŸ³æˆç‚ºç™‚ç™’çš„é¢¨ã€‚'},
  {name:'è—å¤œ',icon:'ğŸŒ™',desc:'å¤¢æƒ³çš„å®ˆè­·è€…,è±ç››èˆ‡ç›´è¦ºçš„èƒ½é‡',energy:'ä½ æ“æœ‰è±å¯Œçš„å…§åœ¨ä¸–ç•Œå’Œå¼·å¤§çš„ç›´è¦º,å¤©ç”Ÿæ˜¯å¤¢æƒ³å®¶ã€‚ä½ çš„æƒ³åƒåŠ›èƒ½å¤ å‰µé€ å¥‡è¹Ÿã€‚',message:'ç›¸ä¿¡ä½ çš„å¤¢æƒ³,å®ƒå€‘æ˜¯å®‡å®™çµ¦ä½ çš„è—åœ–ã€‚'},
  {name:'é»ƒç¨®å­',icon:'ğŸŒ±',desc:'æ½›èƒ½çš„è¦ºé†’,æˆé•·èˆ‡é–‹èŠ±çš„èƒ½é‡',energy:'ä½ æ˜¯æ½›èƒ½çš„ç¨®å­,å¤©ç”Ÿå……æ»¿æˆé•·çš„å‹•åŠ›ã€‚ä½ çš„æ¯ä¸€æ­¥éƒ½åœ¨é–‹èŠ±çµæœã€‚',message:'è€å¿ƒç­‰å¾…ä½ çš„ç¶»æ”¾æ™‚åˆ»,ä½ æ­£åœ¨æˆç‚ºæœ€ç¾çš„è‡ªå·±ã€‚'},
  {name:'ç´…è›‡',icon:'ğŸ',desc:'ç”Ÿå‘½åŠ›çš„æµå‹•,è›»è®Šèˆ‡é‡ç”Ÿçš„èƒ½é‡',energy:'ä½ æ“æœ‰å¼·å¤§çš„ç”Ÿå‘½åŠ›å’Œè›»è®Šèƒ½åŠ›,å¤©ç”Ÿèƒ½å¤ é‡ç”Ÿã€‚ä½ çš„æ¯ä¸€æ¬¡è›»çš®éƒ½æ˜¯é€²åŒ–ã€‚',message:'æ“æŠ±æ”¹è®Š,æ¯ä¸€æ¬¡è›»è®Šéƒ½è®“ä½ æ›´æ¥è¿‘çœŸå¯¦çš„è‡ªå·±ã€‚'},
  {name:'ç™½ä¸–ç•Œæ©‹',icon:'ğŸŒ‰',desc:'é€£çµçš„æ©‹æ¨‘,æ­»äº¡èˆ‡é‡ç”Ÿçš„èƒ½é‡',energy:'ä½ æ˜¯é€£çµä¸åŒä¸–ç•Œçš„æ©‹æ¨‘,å¤©ç”Ÿèƒ½å¤ æ”¾ä¸‹å’Œé‡ç”Ÿã€‚ä½ çš„å­˜åœ¨å¹«åŠ©ä»–äººè·¨è¶Šã€‚',message:'å­¸æœƒæ”¾ä¸‹,æ¯ä¸€æ¬¡çµæŸéƒ½æ˜¯æ–°çš„é–‹å§‹ã€‚'},
  {name:'è—æ‰‹',icon:'âœ‹',desc:'ç™‚ç™’çš„é›™æ‰‹,å®Œæˆèˆ‡å¯¦ç¾çš„èƒ½é‡',energy:'ä½ æ“æœ‰ç™‚ç™’çš„é›™æ‰‹å’Œå¯¦ç¾çš„èƒ½åŠ›,å¤©ç”Ÿæ˜¯ç™‚ç™’å¸«å’Œå¯¦è¸å®¶ã€‚ä½ çš„è¡Œå‹•å……æ»¿åŠ›é‡ã€‚',message:'ç›¸ä¿¡ä½ çš„é›™æ‰‹,å®ƒå€‘èƒ½å¤ å‰µé€ å’Œç™‚ç™’ã€‚'},
  {name:'é»ƒæ˜Ÿæ˜Ÿ',icon:'â­',desc:'è—è¡“çš„ç¾æ„Ÿ,å’Œè«§èˆ‡å„ªé›…çš„èƒ½é‡',energy:'ä½ æ“æœ‰è—è¡“å®¶çš„éˆé­‚å’Œç¾å­¸çš„çœ¼å…‰,å¤©ç”Ÿè¿½æ±‚å’Œè«§èˆ‡ç¾ã€‚ä½ çš„å­˜åœ¨å°±æ˜¯è—è¡“ã€‚',message:'æ´»å‡ºä½ çš„ç¾,è®“ç”Ÿå‘½æˆç‚ºä¸€ä»¶è—è¡“å“ã€‚'},
  {name:'ç´…æœˆ',icon:'ğŸŒ•',desc:'æƒ…æ„Ÿçš„æµå‹•,æ·¨åŒ–èˆ‡é‡‹æ”¾çš„èƒ½é‡',energy:'ä½ æ“æœ‰æ·±åˆ»çš„æƒ…æ„Ÿå’Œæ·¨åŒ–çš„èƒ½åŠ›,å¤©ç”Ÿèƒ½å¤ é‡‹æ”¾å’Œç™‚ç™’ã€‚ä½ çš„æƒ…æ„Ÿæ˜¯ç¦®ç‰©ã€‚',message:'å…è¨±æƒ…æ„Ÿæµå‹•,æ¯ä¸€æ¬¡é‡‹æ”¾éƒ½æ˜¯ç™‚ç™’ã€‚'},
  {name:'ç™½ç‹—',icon:'ğŸ•',desc:'å¿ èª çš„æ„›,ç„¡æ¢ä»¶çš„æ„›èˆ‡å¿ èª ',energy:'ä½ æ“æœ‰ç´”ç²¹çš„æ„›å’Œå¿ èª çš„å¿ƒ,å¤©ç”Ÿæ˜¯æ„›çš„åŒ–èº«ã€‚ä½ çš„æ„›èƒ½å¤ ç™‚ç™’ä¸€åˆ‡ã€‚',message:'æ„›ä½ è‡ªå·±,å°±åƒä½ æ„›åˆ¥äººä¸€æ¨£ç„¡æ¢ä»¶ã€‚'},
  {name:'è—çŒ´',icon:'ğŸµ',desc:'éŠæˆ²çš„é­”æ³•,å–œæ‚…èˆ‡å‰µé€ çš„èƒ½é‡',energy:'ä½ æ“æœ‰ç©å¿ƒå’Œé­”æ³•,å¤©ç”Ÿå……æ»¿å–œæ‚…å’Œå‰µæ„ã€‚ä½ çš„å­˜åœ¨å°±æ˜¯éŠæˆ²ã€‚',message:'ä¸è¦å¤ªåš´è‚…,ç”Ÿå‘½æœ¬èº«å°±æ˜¯ä¸€å ´éŠæˆ²ã€‚'},
  {name:'é»ƒäºº',icon:'ğŸ§‘',desc:'è‡ªç”±æ„å¿—,æ™ºæ…§èˆ‡é¸æ“‡çš„èƒ½é‡',energy:'ä½ æ“æœ‰è‡ªç”±æ„å¿—å’Œæ™ºæ…§,å¤©ç”Ÿæ˜¯æ€è€ƒè€…å’Œé¸æ“‡è€…ã€‚ä½ çš„é¸æ“‡å‰µé€ ä½ çš„å¯¦ç›¸ã€‚',message:'è¨˜å¾—ä½ æ°¸é æœ‰é¸æ“‡,ä½ çš„è‡ªç”±æ˜¯ä½ çš„åŠ›é‡ã€‚'},
  {name:'ç´…å¤©è¡Œè€…',icon:'ğŸš¶',desc:'æ¢ç´¢çš„å‹‡æ°£,ç©ºé–“èˆ‡ç§»å‹•çš„èƒ½é‡',energy:'ä½ æ˜¯å¤©ç”Ÿçš„æ¢éšªå®¶,å……æ»¿å¥½å¥‡å¿ƒå’Œç§»å‹•çš„èƒ½é‡ã€‚ä½ çš„æ—…ç¨‹å°±æ˜¯ä½ çš„æˆé•·ã€‚',message:'å‹‡æ•¢æ¢ç´¢,ä¸–ç•Œåœ¨ç­‰å¾…ä½ å»ç™¼ç¾ã€‚'},
  {name:'ç™½å·«å¸«',icon:'ğŸ§™',desc:'é­”æ³•çš„åŠ›é‡,ç„¡æ™‚é–“æ€§èˆ‡æ¥æ”¶çš„èƒ½é‡',energy:'ä½ æ“æœ‰é­”æ³•èˆ¬çš„åŠ›é‡å’Œæ¥æ”¶çš„èƒ½åŠ›,å¤©ç”Ÿèƒ½å¤ è¶…è¶Šæ™‚é–“ã€‚ä½ æ˜¯é­”æ³•å¸«ã€‚',message:'ç›¸ä¿¡é­”æ³•,ä½ å°±æ˜¯é­”æ³•æœ¬èº«ã€‚'},
  {name:'è—é·¹',icon:'ğŸ¦…',desc:'é è¦‹çš„è¦–é‡,å¿ƒéˆèˆ‡é¡˜æ™¯çš„èƒ½é‡',energy:'ä½ æ“æœ‰é·¹çš„è¦–é‡å’Œé è¦‹,å¤©ç”Ÿèƒ½å¤ çœ‹è¦‹å…¨è²Œã€‚ä½ çš„æ´å¯ŸåŠ›æ˜¯ç¦®ç‰©ã€‚',message:'å¾æ›´é«˜çš„è¦–è§’çœ‹å¾…ç”Ÿå‘½,ä½ æœƒçœ‹è¦‹ä¸åŒçš„é¢¨æ™¯ã€‚'},
  {name:'é»ƒæˆ°å£«',icon:'âš”ï¸',desc:'å‹‡æ°£çš„åŠ›é‡,è³ªå•èˆ‡ç„¡æ‡¼çš„èƒ½é‡',energy:'ä½ æ˜¯å‹‡æ•¢çš„æˆ°å£«,å¤©ç”Ÿç„¡æ‡¼å’Œè³ªå•ã€‚ä½ çš„å‹‡æ°£èƒ½å¤ çªç ´ä¸€åˆ‡é™åˆ¶ã€‚',message:'å‹‡æ•¢é¢å°ææ‡¼,ä½ æ¯”ä½ æƒ³åƒçš„æ›´å¼·å¤§ã€‚'},
  {name:'ç´…åœ°çƒ',icon:'ğŸŒ',desc:'å°èˆªçš„æ™ºæ…§,å…±æ™‚æ€§èˆ‡é€²åŒ–çš„èƒ½é‡',energy:'ä½ æ“æœ‰åœ°çƒçš„æ™ºæ…§å’Œå°èˆªçš„èƒ½åŠ›,å¤©ç”Ÿèƒ½å¤ çœ‹è¦‹å…±æ™‚æ€§ã€‚ä½ æ˜¯é€²åŒ–çš„å¼•å°è€…ã€‚',message:'ç›¸ä¿¡å®‡å®™çš„å®‰æ’,ä¸€åˆ‡éƒ½åœ¨å®Œç¾çš„æ™‚é–“ç™¼ç”Ÿã€‚'},
  {name:'ç™½é¡',icon:'ğŸª',desc:'æ˜ ç…§çš„çœŸå¯¦,ç„¡ç›¡èˆ‡ç§©åºçš„èƒ½é‡',energy:'ä½ æ˜¯çœŸå¯¦çš„é¡å­,å¤©ç”Ÿèƒ½å¤ æ˜ ç…§çœŸç›¸ã€‚ä½ çš„å­˜åœ¨å¹«åŠ©ä»–äººçœ‹è¦‹è‡ªå·±ã€‚',message:'å‹‡æ•¢çœ‹è¦‹çœŸå¯¦çš„è‡ªå·±,é‚£è£¡æœ‰ä½ çš„åŠ›é‡ã€‚'},
  {name:'è—é¢¨æš´',icon:'â›ˆï¸',desc:'è½‰åŒ–çš„åŠ›é‡,è‡ªæˆ‘ç”¢ç”Ÿèˆ‡å‚¬åŒ–çš„èƒ½é‡',energy:'ä½ æ“æœ‰é¢¨æš´èˆ¬çš„è½‰åŒ–åŠ›é‡,å¤©ç”Ÿæ˜¯å‚¬åŒ–åŠ‘ã€‚ä½ çš„å­˜åœ¨å¸¶ä¾†æ”¹è®Šã€‚',message:'æ“æŠ±é¢¨æš´,å®ƒæœƒå¸¶ä½ åˆ°é”æ–°çš„å½¼å²¸ã€‚'},
  {name:'é»ƒå¤ªé™½',icon:'â˜€ï¸',desc:'å•Ÿè’™çš„å…‰èŠ’,æ™®ä¸–ä¹‹ç«èˆ‡ç”Ÿå‘½çš„èƒ½é‡',energy:'ä½ æ˜¯å¤ªé™½èˆ¬çš„å­˜åœ¨,å¤©ç”Ÿç™¼å…‰ç™¼ç†±ã€‚ä½ çš„å…‰èŠ’èƒ½å¤ ç…§äº®ä»–äººã€‚',message:'åšä½ è‡ªå·±,ä½ çš„å…‰èŠ’å°±æ˜¯ä½ çš„ç¦®ç‰©ã€‚'}
];

const tones = [
  {name:'ç£æ€§',desc:'å¸å¼•'},
  {name:'æœˆäº®',desc:'æŒ‘æˆ°'},
  {name:'é›»åŠ›',desc:'æœå‹™'},
  {name:'è‡ªæˆ‘å­˜åœ¨',desc:'å½¢å¼'},
  {name:'è¶…é »',desc:'è³¦æ¬Š'},
  {name:'éŸ»å¾‹',desc:'å¹³è¡¡'},
  {name:'å…±é³´',desc:'èª¿é »'},
  {name:'éŠ€æ²³',desc:'æ•´åˆ'},
  {name:'å¤ªé™½',desc:'æ„åœ–'},
  {name:'è¡Œæ˜Ÿ',desc:'é¡¯åŒ–'},
  {name:'å…‰è­œ',desc:'é‡‹æ”¾'},
  {name:'æ°´æ™¶',desc:'åˆä½œ'},
  {name:'å®‡å®™',desc:'è‡¨åœ¨'}
];

// Dreamspell 13æœˆäº®æ›†è¨ˆç®— (ä¸è¨ˆé–æ—¥)
function isLeapYear(year) {
  return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
}

function getDaysInMonth(year, month) {
  return new Date(year, month, 0).getDate();
}

function dreamspellDayCount(targetYear, targetMonth, targetDay) {
  const baseYear = 1987, baseMonth = 7, baseDay = 26;
  let totalDays = 0;
  
  if(targetYear > baseYear || (targetYear === baseYear && (targetMonth > baseMonth || (targetMonth === baseMonth && targetDay >= baseDay)))) {
    for(let y = baseYear; y <= targetYear; y++) {
      const startMonth = (y === baseYear) ? baseMonth : 1;
      const endMonth = (y === targetYear) ? targetMonth : 12;
      
      for(let m = startMonth; m <= endMonth; m++) {
        const startDay = (y === baseYear && m === baseMonth) ? baseDay : 1;
        const endDay = (y === targetYear && m === targetMonth) ? targetDay : getDaysInMonth(y, m);
        
        for(let d = startDay; d <= endDay; d++) {
          if(y === baseYear && m === baseMonth && d === baseDay) continue;
          if(m === 2 && d === 29 && isLeapYear(y)) continue;
          totalDays++;
        }
      }
    }
  } else {
    for(let y = targetYear; y <= baseYear; y++) {
      const startMonth = (y === targetYear) ? targetMonth : 1;
      const endMonth = (y === baseYear) ? baseMonth : 12;
      
      for(let m = startMonth; m <= endMonth; m++) {
        const startDay = (y === targetYear && m === targetMonth) ? targetDay : 1;
        const endDay = (y === baseYear && m === baseMonth) ? baseDay : getDaysInMonth(y, m);
        
        for(let d = startDay; d <= endDay; d++) {
          if(y === baseYear && m === baseMonth && d === baseDay) continue;
          if(m === 2 && d === 29 && isLeapYear(y)) continue;
          totalDays++;
        }
      }
    }
    totalDays = -totalDays;
  }
  
  return totalDays;
}

function calculateKIN(year, month, day){
  const baseKIN = 34;
  const dayDiff = dreamspellDayCount(year, month, day);
  let kin = baseKIN + (dayDiff % 260);
  while(kin > 260) kin -= 260;
  while(kin < 1) kin += 260;
  return kin;
}

function calculate(){
  const dateInput = document.getElementById('birthDate').value;
  if(!dateInput){
    alert('è«‹å…ˆè¼¸å…¥ä½ çš„å‡ºç”Ÿæ—¥æœŸ!');
    return;
  }

  const [year,month,day] = dateInput.split('-').map(Number);
  const kin = calculateKIN(year,month,day);

  const totemIndex = (kin - 1) % 20;
  const toneIndex = (kin - 1) % 13;
  const waveIndex = Math.floor((kin - 1) / 13) % 20;

  const totem = totems[totemIndex];
  const tone = tones[toneIndex];
  const wave = totems[waveIndex];

  const colors = ['ç´…','ç™½','è—','é»ƒ'];
  const colorIndex = totemIndex % 4;

  document.getElementById('kinNumber').textContent = `KIN ${kin}`;
  document.getElementById('totemIcon').textContent = totem.icon;
  document.getElementById('totemName').textContent = totem.name;
  document.getElementById('toneName').textContent = tone.name;
  document.getElementById('totemDesc').textContent = totem.desc;
  document.getElementById('waveSpell').textContent = wave.name;
  document.getElementById('toneValue').textContent = tone.desc;
  document.getElementById('colorValue').textContent = colors[colorIndex];
  document.getElementById('energyText').textContent = totem.energy;
  document.getElementById('messageText').textContent = totem.message;

  document.getElementById('resultSection').classList.add('show');

  window.currentResult = {
    date: dateInput,
    kin: kin,
    totem: totem.name,
    tone: tone.name,
    wave: wave.name,
    color: colors[colorIndex],
    desc: totem.desc,
    energy: totem.energy,
    message: totem.message
  };
}

function copyResult(){
  if(!window.currentResult) return;
  
  const r = window.currentResult;
  const text = `ğŸŒ€ ç‘ªé›…æ›†è¨ˆç®—çµæœ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å‡ºç”Ÿæ—¥æœŸ:${r.date}
KIN:${r.kin}
åœ–é¨°:${r.totem}
èª¿æ€§:${r.tone}
æ³¢ç¬¦:${r.wave}
é¡è‰²:${r.color}

æ ¸å¿ƒç‰¹è³ª:${r.desc}

èƒ½é‡ç‰¹è³ª:${r.energy}

çµ¦ä½ çš„è¨Šæ¯:${r.message}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‡¹ğŸ‡¼ æºè‡ªå°ç£ï½œé¦¥éˆä¹‹é‘°`;

  navigator.clipboard.writeText(text).then(()=>{
    const btn = event.target;
    btn.textContent = 'âœ… å·²è¤‡è£½!';
    btn.classList.add('copied');
    setTimeout(()=>{
      btn.textContent = 'ğŸ“‹ ä¸€éµè¤‡è£½çµæœ';
      btn.classList.remove('copied');
    },2000);
  }).catch(()=>{
    alert('è¤‡è£½å¤±æ•—,è«‹æ‰‹å‹•è¤‡è£½:\n\n'+text);
  });
}
</script>
</body>
</html>
