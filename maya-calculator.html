<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ç‘ªé›…æ›†è¨ˆç®—å™¨ï½œé¦¥éˆä¹‹é‘°</title>
<meta name="description" content="æ‰¾åˆ°ä½ çš„ç‘ªé›…åœ–é¨°ï¼Œè§£é–ä½ çš„å®‡å®™å°è¨˜ã€‚æºè‡ªå°ç£ï¼Œé¦¥éˆä¹‹é‘°ã€‚">
<link rel="icon" href="favicon.ico" />
<style>
  :root{
    /* é»‘é‡‘å®‡å®™ Ã— æŸ”å’Œå¥¶èŒ¶éæ¸¡ */
    --bg-deep:#05030a;
    --bg-soft:#14101b;
    --panel:#0f0a18;
    --panel-soft:rgba(18,13,28,0.94);

    --milk:#f9f5f0;
    --cocoa:#d9c7b2;
    --cocoa-deep:#b39a80;

    --rose:#e9c27d;
    --rose-dark:#cda86e;

    --ink-main:#f9f0e5;
    --ink-soft:#e2d3c4;
    --line:rgba(255,255,255,.12);

    --font-main:"Noto Sans TC","PingFang TC","Microsoft JhengHei",system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
    --font-display:"Noto Serif TC","Songti TC","PMingLiU",serif;

    --ease:cubic-bezier(0.4, 0, 0.2, 1);
  }

  *{box-sizing:border-box;margin:0;padding:0}
  html{scroll-behavior:smooth;}

  body{
    min-height:100vh;
    font-family:var(--font-main);
    color:var(--ink-main);
    padding:20px 16px 40px;
    background:
      radial-gradient(ellipse 120% 80% at 15% 0%,rgba(92,58,99,0.38) 0%,transparent 55%),
      radial-gradient(ellipse 90% 70% at 85% 100%,rgba(233,194,125,0.22) 0%,transparent 55%),
      linear-gradient(180deg,var(--bg-deep) 0%,var(--bg-soft) 100%);
    background-attachment:fixed;
  }

  .container{
    max-width:760px;
    margin:0 auto;
    background:var(--panel-soft);
    backdrop-filter:blur(18px) saturate(140%);
    border-radius:22px;
    padding:34px 26px 30px;
    box-shadow:0 16px 40px rgba(0,0,0,.6);
    border:1px solid var(--line);
  }

  h1{
    text-align:center;
    font-family:var(--font-display);
    color:var(--ink-main);
    font-size:clamp(1.8rem,4vw,2.3rem);
    margin-bottom:8px;
    font-weight:400;
    letter-spacing:.25em;
    text-indent:.25em;
    background:linear-gradient(135deg,var(--rose),#fff9eb,var(--rose-dark));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    text-shadow:0 4px 18px rgba(233,194,125,.25);
  }
  .subtitle{
    text-align:center;
    color:var(--ink-soft);
    font-size:0.9rem;
    margin-bottom:30px;
    letter-spacing:.18em;
    text-transform:uppercase;
  }

  /* è¼¸å…¥å€ */
  .input-section{
    background:rgba(18,13,28,.92);
    border-radius:18px;
    padding:22px 20px 24px;
    margin-bottom:24px;
    border:1px solid var(--line);
  }
  .input-label{
    font-size:0.95rem;
    font-weight:700;
    color:var(--cocoa);
    margin-bottom:10px;
    display:block;
    letter-spacing:.08em;
  }
  .date-input{
    width:100%;
    padding:13px 16px;
    border:1px solid var(--line);
    border-radius:12px;
    font-size:1rem;
    font-family:inherit;
    transition:.25s var(--ease);
    background:rgba(8,6,16,.9);
    color:var(--ink-main);
  }
  .date-input::placeholder{color:rgba(255,255,255,.35);}
  .date-input:focus{
    outline:none;
    border-color:var(--rose);
    box-shadow:0 0 0 2px rgba(233,194,125,.25);
  }

  .calc-btn{
    display:block;
    width:100%;
    background:linear-gradient(135deg,var(--rose),var(--rose-dark));
    color:#1a1a1a;
    border:none;
    padding:15px 22px;
    border-radius:999px;
    font-size:1rem;
    font-weight:800;
    cursor:pointer;
    box-shadow:0 8px 22px rgba(233,194,125,.45);
    transition:.25s var(--ease);
    margin-top:14px;
    letter-spacing:.12em;
    text-indent:.12em;
  }
  .calc-btn:hover{
    transform:translateY(-2px);
    box-shadow:0 10px 26px rgba(233,194,125,.6);
  }

  .result-section{
    display:none;
    margin-top:26px;
  }
  .result-section.show{
    display:block;
    animation:fadeIn 0.55s var(--ease);
  }
  @keyframes fadeIn{
    from{opacity:0;transform:translateY(18px)}
    to{opacity:1;transform:translateY(0)}
  }

  .maya-card{
    background:radial-gradient(circle at 0% 0%,rgba(233,194,125,.15) 0%,transparent 55%),
               radial-gradient(circle at 100% 100%,rgba(92,58,99,.25) 0%,transparent 60%),
               linear-gradient(135deg,rgba(10,8,20,.96),rgba(20,14,32,.96));
    border:1px solid rgba(233,194,125,.55);
    border-radius:18px;
    padding:26px 20px 24px;
    margin-bottom:22px;
    text-align:center;
    box-shadow:0 12px 32px rgba(0,0,0,.7);
  }
  .kin-number{
    font-size:0.9rem;
    color:var(--ink-soft);
    margin-bottom:6px;
    font-weight:600;
    letter-spacing:.2em;
    text-transform:uppercase;
  }
  .totem-icon{
    font-size:3.2rem;
    margin:10px 0;
  }
  .totem-name{
    font-size:1.6rem;
    font-weight:600;
    color:var(--milk);
    margin-bottom:6px;
    font-family:var(--font-display);
    letter-spacing:.08em;
  }
  .tone-name{
    font-size:1.1rem;
    color:var(--rose);
    font-weight:600;
    margin-bottom:12px;
    letter-spacing:.12em;
  }
  .totem-desc{
    font-size:0.98rem;
    color:var(--ink-soft);
    line-height:1.8;
  }

  .info-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
    gap:14px;
    margin-bottom:22px;
  }
  .info-card{
    background:rgba(10,8,20,.92);
    border:1px solid var(--line);
    border-radius:14px;
    padding:18px 14px;
    text-align:center;
  }
  .info-card-title{
    font-size:0.82rem;
    color:rgba(226,211,196,.85);
    margin-bottom:6px;
    font-weight:600;
    letter-spacing:.16em;
    text-transform:uppercase;
  }
  .info-card-value{
    font-size:1.05rem;
    font-weight:700;
    color:var(--milk);
  }

  .detail-section{
    background:rgba(18,13,28,.92);
    border-radius:14px;
    padding:18px 16px 18px;
    margin-bottom:16px;
    border:1px solid var(--line);
  }
  .detail-title{
    font-size:0.96rem;
    font-weight:700;
    color:var(--cocoa);
    margin-bottom:8px;
    letter-spacing:.08em;
  }
  .detail-text{
    font-size:0.9rem;
    color:var(--ink-soft);
    line-height:1.8;
  }

  .copy-btn{
    display:block;
    width:100%;
    background:transparent;
    border:1px solid var(--cocoa);
    color:var(--cocoa);
    padding:11px 18px;
    border-radius:999px;
    font-size:0.95rem;
    font-weight:700;
    cursor:pointer;
    transition:.25s var(--ease);
    margin:4px 0 18px;
    letter-spacing:.08em;
  }
  .copy-btn:hover{
    background:var(--cocoa);
    color:#1a1a1a;
    transform:translateY(-1px);
  }
  .copy-btn.copied{
    background:#4caf50;
    border-color:#4caf50;
    color:#fff;
  }

  /* CTAå€å¡Š */
  .cta-section{
    background:radial-gradient(circle at 0% 0%,rgba(233,194,125,.25) 0%,transparent 55%),
               linear-gradient(135deg,#251725,#1a111f);
    border-radius:16px;
    padding:24px 20px 26px;
    text-align:center;
    margin:22px 0 8px;
    border:1px solid rgba(233,194,125,.5);
    box-shadow:0 10px 30px rgba(0,0,0,.65);
  }
  .cta-section h3{
    color:var(--milk);
    font-size:1.2rem;
    font-weight:600;
    margin-bottom:10px;
    font-family:var(--font-display);
    letter-spacing:.12em;
  }
  .cta-section p{
    color:var(--ink-soft);
    font-size:0.9rem;
    line-height:1.8;
    margin-bottom:18px;
  }
  .cta-btns{
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .cta-btn{
    display:block;
    text-decoration:none;
    padding:12px 22px;
    border-radius:999px;
    font-weight:700;
    font-size:0.95rem;
    transition:.25s var(--ease);
    text-align:center;
    letter-spacing:.08em;
  }
  .cta-btn.primary{
    background:linear-gradient(135deg,var(--rose),var(--rose-dark));
    color:#1a1a1a;
    border:1px solid rgba(255,255,255,.9);
    box-shadow:0 8px 24px rgba(233,194,125,.55);
  }
  .cta-btn.primary:hover{
    transform:translateY(-2px);
    box-shadow:0 10px 30px rgba(233,194,125,.7);
  }
  .cta-btn.secondary{
    background:transparent;
    color:var(--milk);
    border:1px solid var(--cocoa);
  }
  .cta-btn.secondary:hover{
    background:var(--cocoa);
    color:#1a1a1a;
    transform:translateY(-2px);
  }

  .back-home{
    display:block;
    text-align:center;
    margin-top:22px;
    color:var(--rose);
    text-decoration:none;
    font-weight:700;
    font-size:0.88rem;
    letter-spacing:.08em;
    transition:.25s var(--ease);
  }
  .back-home:hover{
    color:var(--rose-dark);
    text-decoration:underline;
  }

  @media(max-width:600px){
    .container{padding:26px 18px}
    .totem-icon{font-size:2.6rem}
    .totem-name{font-size:1.4rem}
  }
</style>
</head>
<body>
  <div class="container">
    <h1>ç‘ªé›…æ›†è¨ˆç®—å™¨</h1>
    <p class="subtitle">æºè‡ªå°ç£ãƒ»é¦¥éˆä¹‹é‘°</p>

    <div class="input-section">
      <label class="input-label">è«‹è¼¸å…¥ä½ çš„å‡ºç”Ÿæ—¥æœŸ</label>
      <input type="date" class="date-input" id="birthDate" min="1900-01-01" max="2100-12-31">
      <button class="calc-btn" onclick="calculate()">æŸ¥è©¢æˆ‘çš„ç‘ªé›…å°è¨˜</button>
    </div>

    <div class="result-section" id="resultSection">
      <div class="maya-card">
        <div class="kin-number" id="kinNumber">KIN -</div>
        <div class="totem-icon" id="totemIcon">-</div>
        <div class="totem-name" id="totemName">-</div>
        <div class="tone-name" id="toneName">-</div>
        <div class="totem-desc" id="totemDesc">-</div>
      </div>

      <div class="info-grid">
        <div class="info-card">
          <div class="info-card-title">æ³¢ç¬¦</div>
          <div class="info-card-value" id="waveSpell">-</div>
        </div>
        <div class="info-card">
          <div class="info-card-title">èª¿æ€§</div>
          <div class="info-card-value" id="toneValue">-</div>
        </div>
        <div class="info-card">
          <div class="info-card-title">é¡è‰²</div>
          <div class="info-card-value" id="colorValue">-</div>
        </div>
      </div>

      <div class="detail-section">
        <div class="detail-title">ä½ çš„èƒ½é‡ç‰¹è³ª</div>
        <div class="detail-text" id="energyText">-</div>
      </div>

      <div class="detail-section">
        <div class="detail-title">çµ¦ä½ çš„å°æé†’</div>
        <div class="detail-text" id="messageText">-</div>
      </div>

      <button class="copy-btn" onclick="copyResult()" id="copyBtn">ä¸€éµè¤‡è£½çµæœ</button>

      <!-- CTAå€å¡Š -->
      <div class="cta-section">
        <h3>æƒ³æŠŠé€™å€‹å°è¨˜ï¼Œæ”¾é€²å¦³çš„äººç”Ÿè—åœ–è£¡ï¼Ÿ</h3>
        <p>ç‘ªé›…æ›†åªæ˜¯å…¥å£ã€‚é¦¥éˆä¹‹é‘°æ•´åˆäº†ç‰Œå¡ã€æ•¸å­—ã€èŠ³é¦™èˆ‡æƒ…ç·’ç¯€å¥ï¼Œè®“é€™å€‹å°è¨˜ä¸åªæ˜¯å¥½ç©ï¼Œè€Œæ˜¯èƒ½ç”¨åœ¨å¦³æ¥ä¸‹ä¾†çš„é¸æ“‡èˆ‡è¡Œå‹•è£¡ã€‚</p>
        <div class="cta-btns">
          <a href="draw-hl.html" class="cta-btn primary">å…è²»æŠ½å–é¦¥éˆä¹‹é‘°ç‰Œå¡</a>
          <a href="consulting.html" class="cta-btn secondary">é ç´„ä¸€å°ä¸€æ·±åº¦è§£è®€</a>
        </div>
      </div>
    </div>

    <a href="index-new.html" class="back-home">è¿”å›é¦–é </a>
  </div>

<script>
const totems = [
  {name:'ç´…é¾',icon:'ğŸ‰',desc:'ç”Ÿå‘½çš„æºé ­ï¼Œæ»‹é¤Šèˆ‡èª•ç”Ÿçš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰å¼·å¤§çš„æ»‹é¤Šèƒ½é‡ï¼Œå¤©ç”Ÿæ˜¯ç…§é¡§è€…å’Œå‰µé€ è€…ã€‚ä½ çš„å­˜åœ¨æœ¬èº«å°±æ˜¯ä¸€ç¨®ç¥ç¦ï¼Œèƒ½å­•è‚²æ–°çš„å¯èƒ½æ€§ã€‚',message:'ç›¸ä¿¡ä½ å…§åœ¨çš„å‰µé€ åŠ›ï¼Œä½ æœ‰èƒ½åŠ›èª•ç”Ÿå…¨æ–°çš„è‡ªå·±ã€‚'},
  {name:'ç™½é¢¨',icon:'ğŸŒ¬ï¸',desc:'å…§åœ¨å‘¼å¸ï¼Œæºé€šèˆ‡å‚³éçš„èƒ½é‡ã€‚',energy:'ä½ æ˜¯è¨Šæ¯çš„æ©‹æ¨‘ï¼Œå¤©ç”Ÿå–„æ–¼æºé€šèˆ‡è¡¨é”ã€‚ä½ çš„è©±èªèƒ½å¸¶ä¾†å®‰å®šèˆ‡æ¸…æ˜ã€‚',message:'èªªå‡ºä½ çš„çœŸå¯¦ï¼Œè®“ä½ çš„è²éŸ³æˆç‚ºè®“äººå®‰å¿ƒçš„é¢¨ã€‚'},
  {name:'è—å¤œ',icon:'ğŸŒ™',desc:'å¤¢æƒ³çš„å®ˆè­·è€…ï¼Œè±ç››èˆ‡ç›´è¦ºçš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰è±å¯Œçš„å…§åœ¨ä¸–ç•Œèˆ‡æ•éŠ³ç›´è¦ºï¼Œå¤©ç”Ÿæ˜¯å¤¢æƒ³å®¶ã€‚ä½ çš„æƒ³åƒåŠ›èƒ½å‰µé€ å‡ºæ„æƒ³ä¸åˆ°çš„å¯èƒ½ã€‚',message:'ç›¸ä¿¡ä½ çš„å¤¢èˆ‡éˆæ„Ÿï¼Œå®ƒå€‘æ˜¯å®‡å®™çµ¦ä½ çš„è—åœ–ã€‚'},
  {name:'é»ƒç¨®å­',icon:'ğŸŒ±',desc:'æ½›èƒ½è¦ºé†’ï¼Œæˆé•·èˆ‡é–‹èŠ±çš„èƒ½é‡ã€‚',energy:'ä½ æ˜¯æ½›èƒ½çš„ç¨®å­ï¼Œå¤©ç”Ÿå¸¶è‘—æˆé•·çš„å‹•åŠ›ã€‚ä½ çš„æ¯ä¸€æ­¥éƒ½åœ¨ç‚ºæœªä¾†çš„ç¶»æ”¾é‹ªè·¯ã€‚',message:'è€å¿ƒç…§é¡§è‡ªå·±ï¼Œä½ æ­£åœ¨å¾€æ›´å®Œæ•´çš„è‡ªå·±é è¿‘ã€‚'},
  {name:'ç´…è›‡',icon:'ğŸ',desc:'ç”Ÿå‘½åŠ›æµå‹•ï¼Œè›»è®Šèˆ‡é‡ç”Ÿçš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰å¼·å‹çš„ç”Ÿå‘½åŠ›èˆ‡é‡ç”Ÿèƒ½åŠ›ï¼Œå¤©ç”Ÿæ‡‚å¾—åœ¨ä½æ½®ä¸­è½‰èº«ã€‚ä½ çš„æ¯ä¸€æ¬¡è›»çš®ï¼Œéƒ½æ˜¯ä¸€æ¬¡å‡ç´šã€‚',message:'æ“æŠ±æ”¹è®Šï¼Œæ¯ä¸€æ¬¡è›»è®Šéƒ½è®“ä½ æ›´æ¥è¿‘çœŸå¯¦çš„è‡ªå·±ã€‚'},
  {name:'ç™½ä¸–ç•Œæ©‹',icon:'ğŸŒ‰',desc:'é€£çµæ©‹æ¨‘ï¼Œæ”¾ä¸‹èˆ‡æ›´æ–°çš„èƒ½é‡ã€‚',energy:'ä½ æ˜¯é€£çµä¸åŒä¸–ç•Œçš„æ©‹æ¨‘ï¼Œå¤©ç”Ÿèƒ½åœ¨å·®ç•°ä¹‹é–“æ‰¾åˆ°å…±é€šé»ã€‚ä½ çš„å­˜åœ¨å¹«åŠ©ä»–äººè·¨è¶Šã€‚',message:'ç·´ç¿’æ”¾ä¸‹ï¼Œç©ºå‡ºä¾†çš„ä½ç½®è‡ªç„¶æœƒè¿ä¾†æ–°çš„é–‹å§‹ã€‚'},
  {name:'è—æ‰‹',icon:'âœ‹',desc:'å¯¦ä½œçš„é›™æ‰‹ï¼Œå®Œæˆèˆ‡å¯¦ç¾çš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰å®‰æ’«äººå¿ƒçš„é›™æ‰‹èˆ‡å¯¦ç¾äº‹ç‰©çš„èƒ½åŠ›ï¼Œå¤©ç”Ÿæ˜¯å¯¦è¸å®¶èˆ‡ç…§é¡§è€…ã€‚ä½ çš„è¡Œå‹•å……æ»¿ç©©å®šçš„åŠ›é‡ã€‚',message:'ç›¸ä¿¡ä½ çš„é›™æ‰‹ï¼Œå®ƒå€‘èƒ½æŠŠæƒ³åƒè®Šæˆå…·é«”ï¼Œä¹Ÿèƒ½è®“äººå¿ƒå®‰ã€‚'},
  {name:'é»ƒæ˜Ÿæ˜Ÿ',icon:'â­',desc:'è—è¡“ç¾æ„Ÿï¼Œå’Œè«§èˆ‡å„ªé›…çš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰è—è¡“å®¶çš„éˆé­‚èˆ‡æ•éŠ³çš„ç¾æ„Ÿï¼Œå¤©ç”Ÿè¿½æ±‚å’Œè«§èˆ‡ç²¾ç·»ã€‚ä½ çš„å­˜åœ¨æœ¬èº«å°±æ˜¯ä¸€ç¨®é¢¨æ™¯ã€‚',message:'æ´»å‡ºä½ çš„ç¾æ„Ÿæ¨™æº–ï¼Œè®“ç”Ÿæ´»æˆç‚ºä¸€ä»¶ä½œå“ã€‚'},
  {name:'ç´…æœˆ',icon:'ğŸŒ•',desc:'æƒ…æ„Ÿæµå‹•ï¼Œæ·¨åŒ–èˆ‡é‡‹æ”¾çš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰æ·±åˆ»æƒ…æ„Ÿèˆ‡æ•´ç†èƒ½é‡çš„èƒ½åŠ›ï¼Œå¤©ç”Ÿé©åˆé™ªä¼´é‡‹æ”¾ã€‚ä½ çš„æ•æ„Ÿæ˜¯ä¸€ç¨®å¤©è³¦ã€‚',message:'å…è¨±æƒ…ç·’æµå‹•ï¼Œæ¯ä¸€æ¬¡é‡‹æ”¾éƒ½æ˜¯ä¸€æ¬¡èª¿é »ã€‚'},
  {name:'ç™½ç‹—',icon:'ğŸ•',desc:'çœŸå¿ƒçš„æ„›ï¼Œç©©å®šèˆ‡é™ªä¼´çš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰ç´”ç²¹çš„çœŸå¿ƒèˆ‡ç©©å®šçš„é™ªä¼´åŠ›ï¼Œå¤©ç”Ÿé©åˆæˆç‚ºä»–äººçš„æ”¯æŸ±ã€‚ä½ çš„æº«åº¦èƒ½è»ŸåŒ–å¾ˆå¤šå …ç¡¬ã€‚',message:'è¨˜å¾—æŠŠé‚£ä»½çœŸå¿ƒä¹Ÿç•™çµ¦è‡ªå·±ï¼Œä½ å€¼å¾—åŒæ¨£çš„åœ¨ä¹èˆ‡æº«æŸ”ã€‚'},
  {name:'è—çŒ´',icon:'ğŸµ',desc:'éŠæˆ²çš„é­”æ³•ï¼Œå–œæ‚…èˆ‡å‰µé€ çš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰ç©å¿ƒèˆ‡å‰µæ„ï¼Œå¤©ç”Ÿå¸¶è‘—èª¿ç¯€æ°£æ°›çš„èƒ½åŠ›ã€‚ä½ çš„å¹½é»˜èˆ‡éˆæ„Ÿèƒ½è®“ç©ºæ°£è®Šè¼•ã€‚',message:'ä¸è¦æŠŠäººç”Ÿéå¾—å¤ªåƒè€ƒè©¦ï¼Œå…è¨±è‡ªå·±å¶çˆ¾ã€Œç©ä¸€ä¸‹ã€æ‰æœ‰ç©ºé–“é•·å‡ºæ–°é»å­ã€‚'},
  {name:'é»ƒäºº',icon:'ğŸ§‘',desc:'è‡ªç”±æ„å¿—ï¼Œæ™ºæ…§èˆ‡é¸æ“‡çš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰æ¸…æ™°çš„æ€è€ƒåŠ›èˆ‡é¸æ“‡åŠ›ï¼Œå¤©ç”Ÿæ˜¯æ±ºç­–è€…èˆ‡å”èª¿è€…ã€‚ä½ çš„é¸æ“‡æœƒæ…¢æ…¢é•·æˆä½ çš„äººç”Ÿæ¨£å­ã€‚',message:'è¨˜å¾—ï¼Œä½ æ°¸é æœ‰é¸æ“‡æ¬Šã€‚ä¸è¦æŠŠè‡ªå·±é—œåœ¨ã€Œåªèƒ½é€™æ¨£ã€è£¡ã€‚'},
  {name:'ç´…å¤©è¡Œè€…',icon:'ğŸš¶',desc:'æ¢ç´¢å‹‡æ°£ï¼Œç©ºé–“èˆ‡ç§»å‹•çš„èƒ½é‡ã€‚',energy:'ä½ æ˜¯å¤©ç”Ÿçš„æ¢ç´¢è€…ï¼Œå°ä¸–ç•Œèˆ‡å…§åœ¨éƒ½å……æ»¿å¥½å¥‡ã€‚ä½ çš„è·¯ï¼Œä¸æœƒåªåœåœ¨ä¸€å€‹åœ°æ–¹ã€‚',message:'æ•¢èµ°å‡ºå»ï¼Œç­”æ¡ˆå¤šåŠä¸åœ¨åŸåœ°ï¼Œè€Œåœ¨ä½ é¡˜æ„è¸å‡ºçš„é‚£ä¸€æ­¥ä¹‹å¾Œã€‚'},
  {name:'ç™½å·«å¸«',icon:'ğŸ§™',desc:'å°ˆæ³¨çš„é­”æ³•ï¼Œè‡¨åœ¨èˆ‡æ¥æ”¶çš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰å°ˆæ³¨èˆ‡æ„Ÿæ‡‰çš„èƒ½åŠ›ï¼Œå¤©ç”Ÿé©åˆå®‰éœåœ°ã€Œè½è¦‹æ²’èªªå‡ºå£çš„æ±è¥¿ã€ã€‚ä½ çš„å­˜åœ¨ï¼Œè®“ç©ºé–“è®Šå¾—æ¯”è¼ƒæœ‰æ„è­˜ã€‚',message:'ç•¶ä½ æŠŠå¿ƒæ”¶å›ä¾†ï¼Œå¾ˆå¤šç­”æ¡ˆæœƒè‡ªå·±æµ®ä¸Šä¾†ã€‚å®‰éœæ˜¯ä¸€ç¨®åŠ›é‡ã€‚'},
  {name:'è—é·¹',icon:'ğŸ¦…',desc:'é è¦‹è¦–é‡ï¼Œå¿ƒéˆèˆ‡é¡˜æ™¯çš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰åƒé·¹ä¸€æ¨£çš„é«˜åº¦è¦–è§’ï¼Œå¤©ç”Ÿèƒ½çœ‹è¦‹äº‹æƒ…çš„å…¨è²Œã€‚ä½ çš„æ´å¯ŸåŠ›å°å¾ˆå¤šäººä¾†èªªéƒ½æ˜¯é—œéµæé†’ã€‚',message:'ä¸è¦åªç›¯è‘—çœ¼å‰çš„ä¸€é»ï¼Œä½ çœ‹å¾—è¦‹çš„ï¼Œå…¶å¯¦æ¯”ä½ ä»¥ç‚ºçš„æ›´é æ›´å»£ã€‚'},
  {name:'é»ƒæˆ°å£«',icon:'âš”ï¸',desc:'å‹‡æ°£åŠ›é‡ï¼Œè³ªå•èˆ‡ç„¡æ‡¼çš„èƒ½é‡ã€‚',energy:'ä½ æ˜¯å¤©ç”Ÿçš„æå•è€…ï¼Œæ•¢æ–¼ç›´è¦–ä¸èˆ’æœçš„åœ°æ–¹ã€‚ä½ çš„å‹‡æ°£å¯ä»¥æ‰“é–‹å¾ˆå¤šè¢«å¡ä½çš„å±€ã€‚',message:'ç¹¼çºŒå•å°çš„å•é¡Œï¼Œä¸æ˜¯ç‚ºäº†æŒ‘æˆ°ï¼Œè€Œæ˜¯ç‚ºäº†æ›´é è¿‘çœŸç›¸ã€‚'},
  {name:'ç´…åœ°çƒ',icon:'ğŸŒ',desc:'å°èˆªæ™ºæ…§ï¼Œå…±æ™‚èˆ‡é€²åŒ–çš„èƒ½é‡ã€‚',energy:'ä½ æ“æœ‰å¾ˆå¼·çš„æ–¹å‘æ„Ÿï¼Œå°ã€Œæ™‚æ©Ÿã€ç‰¹åˆ¥æ•éŠ³ã€‚å¾ˆå¤šäº‹æƒ…åœ¨ä½ èº«ä¸Šæœƒå‰›å¥½å°é»ã€‚',message:'ç›¸ä¿¡é‚£äº›çœ‹ä¼¼å·§åˆçš„å®‰æ’ï¼Œé‚£æ˜¯å®‡å®™åœ¨å°ä½ çœ¨çœ¼ã€‚'},
  {name:'ç™½é¡',icon:'ğŸª',desc:'æ˜ ç…§çœŸå¯¦ï¼Œæ¸…æ™°èˆ‡ç§©åºçš„èƒ½é‡ã€‚',energy:'ä½ åƒä¸€é¢é¡å­ï¼Œå¤©ç”Ÿæœƒè®“äººçœ‹è¦‹è‡ªå·±çœŸæ­£çš„æ¨£å­ã€‚ä½ çš„æ¸…æ™°ï¼Œå°å¾ˆå¤šäººä¾†èªªæ—¢èª å¯¦åˆé‡è¦ã€‚',message:'å…ˆå…è¨±è‡ªå·±èª å¯¦ï¼Œä¸–ç•Œæ‰æœ‰æ©Ÿæœƒå°ä½ èª å¯¦ã€‚'},
  {name:'è—é¢¨æš´',icon:'â›ˆï¸',desc:'è½‰åŒ–åŠ›é‡ï¼Œå‚¬åŒ–èˆ‡æ›´æ–°çš„èƒ½é‡ã€‚',energy:'ä½ å¸¶è‘—å¼·çƒˆçš„è®Šå‹•èƒ½é‡ï¼Œå¸¸å¸¸æ˜¯æ”¹è®Šçš„å¼•çˆ†é»ã€‚é›–ç„¶å¸¸è¢«æ²é€²é¢¨æš´ï¼Œä½†ä½ å…¶å¯¦ä¹Ÿåœ¨é‡çµ„æ ¼å±€ã€‚',message:'ä¸æ˜¯æ¯ä¸€å ´é¢¨æš´éƒ½è¦æŠµæŠ—ï¼Œæœ‰äº›æ˜¯ä¾†å¹«ä½ æŠŠèˆŠçš„æ±è¥¿æ¬èµ°ã€‚'},
  {name:'é»ƒå¤ªé™½',icon:'â˜€ï¸',desc:'å•Ÿè’™å…‰èŠ’ï¼Œæ™®ç…§èˆ‡ç”Ÿå‘½çš„èƒ½é‡ã€‚',energy:'ä½ å¤©ç”Ÿå¸¶å…‰ï¼Œèµ°åˆ°å“ªè£¡éƒ½æœƒè¢«çœ‹è¦‹ã€‚ä½ çš„æº«åº¦å’Œå­˜åœ¨æ„Ÿï¼Œå°ä¸–ç•Œä¾†èªªæ˜¯ä¸€ä»½ç¦®ç‰©ã€‚',message:'ä¸è¦åˆ»æ„æŠŠè‡ªå·±èª¿æš—ï¼Œä¸–ç•Œéœ€è¦ä½ é€™æ¨£çš„äº®åº¦ã€‚'}
];

const tones = [
  {name:'ç£æ€§',desc:'å¸å¼•'},
  {name:'æœˆäº®',desc:'æŒ‘æˆ°'},
  {name:'é›»åŠ›',desc:'æœå‹™'},
  {name:'è‡ªæˆ‘å­˜åœ¨',desc:'å½¢å¼'},
  {name:'è¶…é »',desc:'è³¦æ¬Š'},
  {name:'éŸ»å¾‹',desc:'å¹³è¡¡'},
  {name:'å…±é³´',desc:'èª¿é »'},
  {name:'éŠ€æ²³',desc:'æ•´åˆ'},
  {name:'å¤ªé™½',desc:'æ„åœ–'},
  {name:'è¡Œæ˜Ÿ',desc:'é¡¯åŒ–'},
  {name:'å…‰è­œ',desc:'é‡‹æ”¾'},
  {name:'æ°´æ™¶',desc:'åˆä½œ'},
  {name:'å®‡å®™',desc:'è‡¨åœ¨'}
];

// Dreamspell 13æœˆäº®æ›†è¨ˆç®— (ä¸è¨ˆé–æ—¥)
function isLeapYear(year) {
  return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
}

function getDaysInMonth(year, month) {
  return new Date(year, month, 0).getDate();
}

function dreamspellDayCount(targetYear, targetMonth, targetDay) {
  const baseYear = 1987, baseMonth = 7, baseDay = 26;
  let totalDays = 0;
  
  if(targetYear > baseYear || (targetYear === baseYear && (targetMonth > baseMonth || (targetMonth === baseMonth && targetDay >= baseDay)))) {
    for(let y = baseYear; y <= targetYear; y++) {
      const startMonth = (y === baseYear) ? baseMonth : 1;
      const endMonth = (y === targetYear) ? targetMonth : 12;
      
      for(let m = startMonth; m <= endMonth; m++) {
        const startDay = (y === baseYear && m === baseMonth) ? baseDay : 1;
        const endDay = (y === targetYear && m === targetMonth) ? targetDay : getDaysInMonth(y, m);
        
        for(let d = startDay; d <= endDay; d++) {
          if(y === baseYear && m === baseMonth && d === baseDay) continue;
          if(m === 2 && d === 29 && isLeapYear(y)) continue;
          totalDays++;
        }
      }
    }
  } else {
    for(let y = targetYear; y <= baseYear; y++) {
      const startMonth = (y === targetYear) ? targetMonth : 1;
      const endMonth = (y === baseYear) ? baseMonth : 12;
      
      for(let m = startMonth; m <= endMonth; m++) {
        const startDay = (y === targetYear && m === targetMonth) ? targetDay : 1;
        const endDay = (y === baseYear && m === baseMonth) ? baseDay : getDaysInMonth(y, m);
        
        for(let d = startDay; d <= endDay; d++) {
          if(y === baseYear && m === baseMonth && d === baseDay) continue;
          if(m === 2 && d === 29 && isLeapYear(y)) continue;
          totalDays++;
        }
      }
    }
    totalDays = -totalDays;
  }
  
  return totalDays;
}

function calculateKIN(year, month, day){
  const baseKIN = 34;
  const dayDiff = dreamspellDayCount(year, month, day);
  let kin = baseKIN + (dayDiff % 260);
  while(kin > 260) kin -= 260;
  while(kin < 1) kin += 260;
  return kin;
}

function calculate(){
  const dateInput = document.getElementById('birthDate').value;
  if(!dateInput){
    alert('è«‹å…ˆè¼¸å…¥ä½ çš„å‡ºç”Ÿæ—¥æœŸ');
    return;
  }

  const [year,month,day] = dateInput.split('-').map(Number);
  const kin = calculateKIN(year,month,day);

  const totemIndex = (kin - 1) % 20;
  const toneIndex = (kin - 1) % 13;
  const waveIndex = Math.floor((kin - 1) / 13) % 20;

  const totem = totems[totemIndex];
  const tone = tones[toneIndex];
  const wave = totems[waveIndex];

  const colors = ['ç´…','ç™½','è—','é»ƒ'];
  const colorIndex = totemIndex % 4;

  document.getElementById('kinNumber').textContent = `KIN ${kin}`;
  document.getElementById('totemIcon').textContent = totem.icon;
  document.getElementById('totemName').textContent = totem.name;
  document.getElementById('toneName').textContent = tone.name;
  document.getElementById('totemDesc').textContent = totem.desc;
  document.getElementById('waveSpell').textContent = wave.name;
  document.getElementById('toneValue').textContent = tone.desc;
  document.getElementById('colorValue').textContent = colors[colorIndex];
  document.getElementById('energyText').textContent = totem.energy;
  document.getElementById('messageText').textContent = totem.message;

  document.getElementById('resultSection').classList.add('show');

  window.currentResult = {
    date: dateInput,
    kin: kin,
    totem: totem.name,
    tone: tone.name,
    wave: wave.name,
    color: colors[colorIndex],
    desc: totem.desc,
    energy: totem.energy,
    message: totem.message
  };
}

function copyResult(){
  if(!window.currentResult) return;
  const btn = document.getElementById('copyBtn');
  const r = window.currentResult;
  const text = 
`ç‘ªé›…æ›†è¨ˆç®—çµæœ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å‡ºç”Ÿæ—¥æœŸï¼š${r.date}
KINï¼š${r.kin}
åœ–é¨°ï¼š${r.totem}
èª¿æ€§ï¼š${r.tone}
æ³¢ç¬¦ï¼š${r.wave}
é¡è‰²ï¼š${r.color}

æ ¸å¿ƒç‰¹è³ªï¼š${r.desc}

èƒ½é‡ç‰¹è³ªï¼š${r.energy}

çµ¦ä½ çš„æé†’ï¼š${r.message}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æºè‡ªå°ç£ï½œé¦¥éˆä¹‹é‘°`;

  navigator.clipboard.writeText(text).then(()=>{
    btn.textContent = 'å·²è¤‡è£½';
    btn.classList.add('copied');
    setTimeout(()=>{
      btn.textContent = 'ä¸€éµè¤‡è£½çµæœ';
      btn.classList.remove('copied');
    },2000);
  }).catch(()=>{
    alert('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½ï¼š\n\n'+text);
  });
}
</script>
</body>
</html>
