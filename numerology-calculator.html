<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="馥靈意識導航™ 數字解析計算機｜輸入生日，解讀您的三角星位、九宮格命盤、五行平衡與能量連線。">
  <title>馥靈意識導航™ - 數字解析計算機</title>
  <link rel="icon" href="favicon.ico" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    body { font-family: "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", "Arial", sans-serif; background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); color: #2a2a2a; line-height: 1.6; overflow-x: hidden; }
    .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
    .page-header { text-align: center; margin-bottom: 50px; color: #fff; }
    .page-header h1 { font-size: 2.5rem; margin-bottom: 10px; font-weight: 700; letter-spacing: 1px; }
    .page-header p { font-size: 1.1rem; color: rgba(255, 255, 255, 0.8); max-width: 600px; margin: 0 auto; }
    .input-section { background: rgba(255, 255, 255, 0.95); border-radius: 16px; padding: 40px; margin-bottom: 40px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); }
    .input-section h2 { font-size: 1.5rem; color: #2a2a2a; margin-bottom: 30px; text-align: center; }
    .input-group { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .input-item { display: flex; flex-direction: column; }
    .input-item label { font-weight: 600; color: #4b392d; margin-bottom: 8px; font-size: 0.95rem; }
    .input-item input { padding: 12px 16px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; color: #2a2a2a; transition: all 0.3s ease; font-family: "Noto Sans TC", sans-serif; }
    .input-item input:focus { outline: none; border-color: #cda86e; box-shadow: 0 0 0 3px rgba(205, 168, 110, 0.1); }
    .button-group { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
    .btn { padding: 14px 40px; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-family: "Noto Sans TC", sans-serif; letter-spacing: 0.5px; }
    .btn-primary { background: linear-gradient(135deg, #cda86e 0%, #a88257 100%); color: #fff; box-shadow: 0 4px 15px rgba(205, 168, 110, 0.3); }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(205, 168, 110, 0.4); }
    .btn-secondary { background: #f0f0f0; color: #2a2a2a; border: 2px solid #e0e0e0; }
    .btn-secondary:hover { background: #e8e8e8; border-color: #cda86e; }
    .results-section { display: none; }
    .results-section.show { display: block; }
    .result-card { background: rgba(255, 255, 255, 0.95); border-radius: 16px; padding: 40px; margin-bottom: 30px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); }
    .result-card h3 { font-size: 1.5rem; color: #2a2a2a; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 3px solid #cda86e; }
    .triangle-container { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 20px; }
    .triangle { display: flex; flex-direction: column; align-items: center; justify-content: center; }
    .triangle h4 { color: #4b392d; margin-bottom: 20px; font-size: 1.1rem; }
    .triangle-svg { width: 100%; max-width: 300px; height: auto; margin-bottom: 20px; }
    .triangle-info { width: 100%; background: #f9f5f0; border-radius: 8px; padding: 15px; text-align: center; color: #2a2a2a; font-size: 0.95rem; }
    .grid-9 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px; max-width: 400px; margin-left: auto; margin-right: auto; }
    .grid-cell { aspect-ratio: 1; border: 2px solid #cda86e; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-direction: column; background: #f9f5f0; font-weight: 600; color: #2a2a2a; position: relative; min-height: 80px; }
    .grid-cell.marked { background: #cda86e; color: #fff; }
    .grid-number { font-size: 1.2rem; font-weight: 700; }
    .grid-count { font-size: 0.8rem; color: rgba(0, 0, 0, 0.6); margin-top: 4px; }
    .grid-cell.marked .grid-count { color: rgba(255, 255, 255, 0.8); }
    .five-elements { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 20px; }
    .element-card { background: #f9f5f0; border-radius: 8px; padding: 20px; text-align: center; border-left: 4px solid #cda86e; }
    .element-name { font-weight: 700; color: #2a2a2a; margin-bottom: 10px; font-size: 1.1rem; }
    .element-count { font-size: 2rem; color: #cda86e; font-weight: 700; margin-bottom: 10px; }
    .element-status { font-size: 0.9rem; color: #666; }
    .energy-lines { margin-top: 20px; }
    .line-item { background: #f9f5f0; border-radius: 8px; padding: 15px; margin-bottom: 10px; border-left: 4px solid #cda86e; }
    .line-name { font-weight: 700; color: #2a2a2a; margin-bottom: 5px; }
    .line-meaning { color: #666; font-size: 0.95rem; }
    .email-section { background: rgba(255, 255, 255, 0.95); border-radius: 16px; padding: 40px; margin-top: 40px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); text-align: center; }
    .email-section h3 { color: #2a2a2a; margin-bottom: 15px; font-size: 1.3rem; }
    .email-section p { color: #666; margin-bottom: 20px; max-width: 500px; margin-left: auto; margin-right: auto; }
    .email-input-group { display: flex; gap: 10px; max-width: 500px; margin: 0 auto; flex-wrap: wrap; justify-content: center; }
    .email-input-group input { flex: 1; min-width: 250px; padding: 12px 16px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; color: #2a2a2a; font-family: "Noto Sans TC", sans-serif; }
    .email-input-group input:focus { outline: none; border-color: #cda86e; box-shadow: 0 0 0 3px rgba(205, 168, 110, 0.1); }
    @media (max-width: 768px) {
      .page-header h1 { font-size: 1.8rem; }
      .input-section, .result-card, .email-section { padding: 25px; }
      .triangle-container { grid-template-columns: 1fr; gap: 30px; }
      .input-group { grid-template-columns: 1fr; }
      .button-group { flex-direction: column; }
      .btn { width: 100%; }
      .email-input-group { flex-direction: column; }
      .email-input-group input { min-width: unset; }
    }
    .success-message { background: #d4edda; color: #155724; padding: 15px; border-radius: 8px; margin-bottom: 20px; display: none; }
    .success-message.show { display: block; }
  </style>
</head>
<body>
  <div class="container">
    <div class="page-header">
      <h1>馥靈意識導航™</h1>
      <p>輸入您的出生日期，解讀您的三角星位、九宮格命盤、五行平衡與能量連線</p>
    </div>

    <div class="input-section">
      <h2>輸入您的出生日期</h2>
      <div class="input-group">
        <div class="input-item">
          <label for="birthYear">西元年份</label>
          <input type="number" id="birthYear" placeholder="例：1990" min="1900" max="2024">
        </div>
        <div class="input-item">
          <label for="birthMonth">月份</label>
          <input type="number" id="birthMonth" placeholder="例：5" min="1" max="12">
        </div>
        <div class="input-item">
          <label for="birthDay">日期</label>
          <input type="number" id="birthDay" placeholder="例：15" min="1" max="31">
        </div>
      </div>
      <div class="button-group">
        <button class="btn btn-primary" onclick="calculateNumerology()">開始解析</button>
        <button class="btn btn-secondary" onclick="resetForm()">重新輸入</button>
      </div>
    </div>

    <div class="results-section" id="resultsSection">
      <div class="result-card">
        <h3>三角星位法 - 您的內在與外在人格</h3>
        <div class="triangle-container">
          <div class="triangle">
            <h4>內部三角（內在真實的自我）</h4>
            <svg class="triangle-svg" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
              <polygon points="150,50 250,250 50,250" fill="none" stroke="#cda86e" stroke-width="2"/>
              <circle cx="150" cy="80" r="25" fill="#f9f5f0" stroke="#cda86e" stroke-width="2"/>
              <text x="150" y="90" text-anchor="middle" font-size="20" font-weight="bold" fill="#2a2a2a" id="innerCore">-</text>
              <circle cx="80" cy="220" r="25" fill="#f9f5f0" stroke="#cda86e" stroke-width="2"/>
              <text x="80" y="230" text-anchor="middle" font-size="20" font-weight="bold" fill="#2a2a2a" id="innerLeft">-</text>
              <circle cx="220" cy="220" r="25" fill="#f9f5f0" stroke="#cda86e" stroke-width="2"/>
              <text x="220" y="230" text-anchor="middle" font-size="20" font-weight="bold" fill="#2a2a2a" id="innerRight">-</text>
            </svg>
            <div class="triangle-info" id="innerInfo">輸入日期後顯示</div>
          </div>

          <div class="triangle">
            <h4>外部三角（不同人生階段的外在人格）</h4>
            <svg class="triangle-svg" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
              <polygon points="150,50 250,250 50,250" fill="none" stroke="#cda86e" stroke-width="2"/>
              <circle cx="150" cy="80" r="25" fill="#f9f5f0" stroke="#cda86e" stroke-width="2"/>
              <text x="150" y="90" text-anchor="middle" font-size="20" font-weight="bold" fill="#2a2a2a" id="outerTop">-</text>
              <circle cx="80" cy="220" r="25" fill="#f9f5f0" stroke="#cda86e" stroke-width="2"/>
              <text x="80" y="230" text-anchor="middle" font-size="20" font-weight="bold" fill="#2a2a2a" id="outerLeft">-</text>
              <circle cx="220" cy="220" r="25" fill="#f9f5f0" stroke="#cda86e" stroke-width="2"/>
              <text x="220" y="230" text-anchor="middle" font-size="20" font-weight="bold" fill="#2a2a2a" id="outerRight">-</text>
            </svg>
            <div class="triangle-info" id="outerInfo">輸入日期後顯示</div>
          </div>
        </div>
      </div>

      <div class="result-card">
        <h3>九宮格命盤 - 您的能量分布</h3>
        <div class="grid-9" id="grid9"></div>
        <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
          <h4 style="color: #2a2a2a; margin-bottom: 15px;">命盤解讀</h4>
          <div id="gridInterpretation" style="color: #666; line-height: 1.8;"></div>
        </div>
      </div>

      <div class="result-card">
        <h3>五行能量平衡分析</h3>
        <div class="five-elements" id="fiveElements"></div>
        <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
          <h4 style="color: #2a2a2a; margin-bottom: 15px;">調頻建議</h4>
          <div id="frequencyAdvice" style="color: #666; line-height: 1.8;"></div>
        </div>
      </div>

      <div class="result-card">
        <h3>能量連線判讀 - 您的天賦潛能</h3>
        <div class="energy-lines" id="energyLines"></div>
      </div>

      <div class="email-section">
        <h3>獲取您的個性化推薦</h3>
        <p>輸入您的電子郵件，我們將根據您的數字解析結果，推薦最適合您的馥靈之鑰卡牌和精油調頻方案。</p>
        <div class="success-message" id="successMessage">✓ 感謝您的訂閱！我們將很快發送個性化推薦給您。</div>
        <div class="email-input-group">
          <input type="email" id="emailInput" placeholder="輸入您的電子郵件" required>
          <button class="btn btn-primary" onclick="submitEmail()">訂閱推薦</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    function reduceToSingle(num) {
      while (num > 9) {
        num = Math.floor(num / 10) + (num % 10);
      }
      return Math.max(1, num);
    }

    function calculateNumerology() {
      const year = parseInt(document.getElementById('birthYear').value);
      const month = parseInt(document.getElementById('birthMonth').value);
      const day = parseInt(document.getElementById('birthDay').value);

      if (!year || !month || !day) {
        alert('請輸入完整的出生日期');
        return;
      }

      const dayNum = reduceToSingle(day);
      const monthNum = reduceToSingle(month);
      const yearFirst = reduceToSingle(Math.floor(year / 100));
      const yearLast = year % 100 === 0 ? 5 : reduceToSingle(year % 100);

      const innerLeft = reduceToSingle(dayNum + monthNum);
      const innerRight = reduceToSingle(yearFirst + yearLast);
      const innerCore = reduceToSingle(innerLeft + innerRight);

      const outerTop = reduceToSingle(innerLeft + innerRight);
      const outerLeft = reduceToSingle(monthNum + innerLeft);
      const outerRight = reduceToSingle(yearFirst + innerRight);

      document.getElementById('innerCore').textContent = innerCore;
      document.getElementById('innerLeft').textContent = innerLeft;
      document.getElementById('innerRight').textContent = innerRight;
      document.getElementById('outerTop').textContent = outerTop;
      document.getElementById('outerLeft').textContent = outerLeft;
      document.getElementById('outerRight').textContent = outerRight;

      document.getElementById('innerInfo').innerHTML = `<strong>內在核心：${innerCore}</strong><br>您的靈魂本質與核心驅動力`;
      document.getElementById('outerInfo').innerHTML = `<strong>外在人格：${outerTop}</strong><br>您在世界中展現的樣貌`;

      drawGrid9(dayNum, monthNum, yearFirst, yearLast, innerLeft, innerRight, innerCore);
      analyzeFiveElements(dayNum, monthNum, yearFirst, yearLast, innerLeft, innerRight, innerCore);
      analyzeEnergyLines(dayNum, monthNum, yearFirst, yearLast, innerLeft, innerRight, innerCore);

      document.getElementById('resultsSection').classList.add('show');
      window.scrollTo({ top: document.getElementById('resultsSection').offsetTop - 100, behavior: 'smooth' });
    }

    function drawGrid9(day, month, yearFirst, yearLast, innerLeft, innerRight, innerCore) {
      const numbers = [day, month, yearFirst, yearLast, innerLeft, innerRight, innerCore];
      const counts = {};
      
      numbers.forEach(n => {
        counts[n] = (counts[n] || 0) + 1;
      });

      const grid = document.getElementById('grid9');
      grid.innerHTML = '';

      for (let i = 1; i <= 9; i++) {
        const cell = document.createElement('div');
        cell.className = 'grid-cell';
        if (counts[i]) {
          cell.classList.add('marked');
        }
        cell.innerHTML = `
          <div class="grid-number">${i}</div>
          ${counts[i] ? `<div class="grid-count">×${counts[i]}</div>` : ''}
        `;
        grid.appendChild(cell);
      }

      const missingNumbers = [];
      for (let i = 1; i <= 9; i++) {
        if (!counts[i]) missingNumbers.push(i);
      }

      let interpretation = `<strong>您的命盤特點：</strong><br>`;
      interpretation += `出現最多的數字：${Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b)}<br>`;
      if (missingNumbers.length > 0) {
        interpretation += `缺乏的數字：${missingNumbers.join('、')}<br>`;
      }
      interpretation += `<br>這反映了您的能量分布和需要調頻的方向。`;

      document.getElementById('gridInterpretation').innerHTML = interpretation;
    }

    function analyzeFiveElements(day, month, yearFirst, yearLast, innerLeft, innerRight, innerCore) {
      const elements = {
        1: "小木", 2: "小水", 3: "小火", 4: "小金", 5: "中央土",
        6: "大金", 7: "大水", 8: "大火", 9: "大木"
      };

      const numbers = [day, month, yearFirst, yearLast, innerLeft, innerRight, innerCore];
      const elementCounts = {};

      numbers.forEach(n => {
        const elem = elements[n];
        elementCounts[elem] = (elementCounts[elem] || 0) + 1;
      });

      const container = document.getElementById('fiveElements');
      container.innerHTML = '';

      const allElements = ["小木", "小水", "小火", "小金", "中央土", "大金", "大水", "大火", "大木"];
      allElements.forEach(elem => {
        const count = elementCounts[elem] || 0;
        const status = count === 0 ? "缺乏" : count === 1 ? "平衡" : "過旺";
        const card = document.createElement('div');
        card.className = 'element-card';
        card.innerHTML = `
          <div class="element-name">${elem}</div>
          <div class="element-count">${count}</div>
          <div class="element-status">${status}</div>
        `;
        container.appendChild(card);
      });

      let advice = `<strong>調頻建議：</strong><br>`;
      const overElements = Object.entries(elementCounts).filter(([_, c]) => c > 1).map(([e]) => e);
      const lackingElements = allElements.filter(e => !elementCounts[e]);

      if (overElements.length > 0) {
        advice += `${overElements.join('、')}過旺，建議用相剋的五行調頻。<br>`;
      }
      if (lackingElements.length > 0) {
        advice += `缺乏${lackingElements.slice(0, 3).join('、')}，可透過精油和冥想補充。`;
      }

      document.getElementById('frequencyAdvice').innerHTML = advice;
    }

    function analyzeEnergyLines(day, month, yearFirst, yearLast, innerLeft, innerRight, innerCore) {
      const numbers = [day, month, yearFirst, yearLast, innerLeft, innerRight, innerCore];
      const container = document.getElementById('energyLines');
      container.innerHTML = '';

      const energyLines = {
        "1-2-3": { name: "藝術線/獨立線", meaning: "有主見、創作天分、領導能力強" },
        "4-5-6": { name: "秩序線/治療線", meaning: "穩定務實、解決問題、條理清晰" },
        "7-8-9": { name: "權力線/貴人線", meaning: "智慧人道、權威影響力" },
        "1-4-7": { name: "安全線/錢財線", meaning: "追求穩定、金錢安全感、財富累積" },
        "2-5-8": { name: "感情線/表達線", meaning: "溝通表達、情緒敏感、坦誠相待" },
        "3-6-9": { name: "創意線/想象線", meaning: "想象力豐富、理想化、夢想家" },
        "1-5-9": { name: "事業線/自由線", meaning: "企圖心強、獨立創業、工作狂" },
        "3-5-7": { name: "人緣線/表達線", meaning: "看穿人心、銷售天才、社交高手" }
      };

      let foundLines = false;

      for (const [lineNumbers, lineInfo] of Object.entries(energyLines)) {
        const nums = lineNumbers.split('-').map(Number);
        const hasAllNumbers = nums.every(n => numbers.includes(n));

        if (hasAllNumbers) {
          foundLines = true;
          const item = document.createElement('div');
          item.className = 'line-item';
          item.innerHTML = `
            <div class="line-name">✓ ${lineInfo.name}</div>
            <div class="line-meaning">${lineInfo.meaning}</div>
          `;
          container.appendChild(item);
        }
      }

      if (!foundLines) {
        container.innerHTML = '<div class="line-item"><div class="line-name">暫無完整能量連線</div><div class="line-meaning">這表示您的能量分散在多個方向，需要透過修行來整合。</div></div>';
      }
    }

    function submitEmail() {
      const email = document.getElementById('emailInput').value;
      if (!email) {
        alert('請輸入電子郵件');
        return;
      }

      const successMsg = document.getElementById('successMessage');
      successMsg.classList.add('show');
      document.getElementById('emailInput').value = '';

      setTimeout(() => {
        successMsg.classList.remove('show');
      }, 3000);
    }

    function resetForm() {
      document.getElementById('birthYear').value = '';
      document.getElementById('birthMonth').value = '';
      document.getElementById('birthDay').value = '';
      document.getElementById('resultsSection').classList.remove('show');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>
</body>
</html>
