<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>æ•¸å­—èƒ½é‡åˆ†æå™¨ï½œèº«åˆ†è­‰ Ã— æ‰‹æ©Ÿ Ã— äº”è¡Œï½œé¦¥éˆä¹‹é‘°</title>
<meta name="description" content="æ•¸å­—ç³»çµ± - åˆ†æèº«åˆ†è­‰ã€æ‰‹æ©Ÿè™Ÿç¢¼ã€äº”è¡Œæµå‹•ã€èº«å¿ƒéˆ">
<link rel="icon" href="favicon.ico" />
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
/* ==============================
   é¦¥éˆä¹‹é‘° æ•¸å­—å¦èƒ½é‡åˆ†æå™¨
   é»‘åº•æ˜Ÿç©ºä¸»é¡Œ - é«˜è³ªæ„Ÿè¨­è¨ˆ
   ============================== */

:root {
  --hl-font-main: "Noto Sans TC","PingFang TC","Microsoft JhengHei",system-ui,-apple-system,BlinkMacSystemFont,sans-serif;

  /* æ˜Ÿç©ºç³» */
  --hl-v3-bg-deep: #0a0514;
  --hl-v3-bg-soft: #1a1428;
  --hl-v3-bg-panel: rgba(15,10,25,0.98);
  --hl-v3-ink-main: #f5f0eb;
  --hl-v3-ink-soft: #d4cac1;

  /* æ˜Ÿå…‰è‰²ç³» */
  --hl-v3-gold: #e9c27d;
  --hl-v3-gold-deep: #cda86e;
  --hl-v3-purple: #8b7fbf;
  --hl-v3-cyan: #6dd5ed;
  --hl-v3-rose: #f0b5b3;

  --hl-v3-border-soft: rgba(255,255,255,0.08);
  --hl-v3-shadow-md: 0 15px 40px rgba(0,0,0,0.7);
  --hl-v3-glow: 0 0 20px rgba(233,194,125,0.2);

  --hl-v3-ease: cubic-bezier(0.4, 0, 0.2, 1);

  /* äº”è¡Œè‰²ç³» */
  --element-metal: #e9c27d;
  --element-water: #6dd5ed;
  --element-wood: #7dd3a0;
  --element-fire: #f0b5b3;
  --element-earth: #d4a574;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body {
  min-height: 100vh;
  font-family: var(--hl-font-main);
  color: var(--hl-v3-ink-main);
  line-height: 1.8;
  padding: 24px 16px 48px;
  background:
    radial-gradient(circle at 20% 50%, rgba(139,127,191,0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(109,213,237,0.1) 0%, transparent 40%),
    radial-gradient(circle at 50% 100%, rgba(233,194,125,0.08) 0%, transparent 60%),
    linear-gradient(135deg, var(--hl-v3-bg-deep) 0%, var(--hl-v3-bg-soft) 100%);
  background-attachment: fixed;
  position: relative;
  overflow-x: hidden;
}

/* æ˜Ÿç©ºèƒŒæ™¯å‹•ç•« */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,0.15), rgba(0,0,0,0)),
    radial-gradient(2px 2px at 60px 70px, rgba(255,255,255,0.1), rgba(0,0,0,0)),
    radial-gradient(1px 1px at 50px 50px, rgba(255,255,255,0.2), rgba(0,0,0,0)),
    radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.12), rgba(0,0,0,0)),
    radial-gradient(2px 2px at 90px 10px, rgba(255,255,255,0.14), rgba(0,0,0,0));
  background-repeat: repeat;
  background-size: 200px 200px;
  pointer-events: none;
  z-index: 0;
  opacity: 0.5;
}

.container {
  position: relative;
  z-index: 1;
  max-width: 1000px;
  margin: 0 auto;
  background: var(--hl-v3-bg-panel);
  backdrop-filter: blur(20px) saturate(150%);
  border-radius: 24px;
  padding: 48px 40px;
  box-shadow: var(--hl-v3-shadow-md), var(--hl-v3-glow);
  border: 1px solid var(--hl-v3-border-soft);
}

/* æ¨™é¡Œ */
h1 {
  text-align: center;
  font-size: clamp(2rem, 5vw, 2.8rem);
  margin-bottom: 12px;
  font-weight: 900;
  background: linear-gradient(135deg, var(--hl-v3-gold), #fff8e7, var(--hl-v3-purple));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: -0.5px;
}

.subtitle {
  text-align: center;
  color: var(--hl-v3-ink-soft);
  font-size: 0.95rem;
  margin-bottom: 40px;
  line-height: 1.8;
}

/* è¼¸å…¥å€ */
.input-section {
  background: linear-gradient(135deg, rgba(139,127,191,0.08), rgba(109,213,237,0.06));
  border: 1px solid var(--hl-v3-border-soft);
  border-radius: 18px;
  padding: 36px;
  margin-bottom: 32px;
  backdrop-filter: blur(10px);
}

.input-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 24px;
}

.input-row.full {
  grid-template-columns: 1fr;
}

.input-group {
  display: flex;
  flex-direction: column;
}

.input-label {
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--hl-v3-gold);
  margin-bottom: 10px;
  display: block;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.input-label .required {
  color: var(--hl-v3-rose);
  margin-left: 4px;
}

.input-field {
  width: 100%;
  padding: 14px 16px;
  border: 1px solid var(--hl-v3-border-soft);
  border-radius: 12px;
  font-size: 1rem;
  font-family: inherit;
  transition: all 0.3s var(--hl-v3-ease);
  background: rgba(255,255,255,0.04);
  color: var(--hl-v3-ink-main);
}

.input-field:focus {
  outline: none;
  border-color: var(--hl-v3-gold);
  box-shadow: 0 0 0 3px rgba(233,194,125,0.2), inset 0 0 0 1px rgba(233,194,125,0.1);
  background: rgba(255,255,255,0.06);
}

.input-field::placeholder {
  color: var(--hl-v3-ink-soft);
  opacity: 0.5;
}

.input-field[type="date"] {
  color-scheme: dark;
}

.input-hint {
  font-size: 0.8rem;
  color: var(--hl-v3-ink-soft);
  margin-top: 8px;
  opacity: 0.7;
}

/* åˆ†ææŒ‰éˆ• */
.analyze-btn {
  display: block;
  width: 100%;
  background: linear-gradient(135deg, var(--hl-v3-gold), var(--hl-v3-gold-deep));
  color: #0a0514;
  border: none;
  padding: 16px 24px;
  border-radius: 14px;
  font-size: 1.1rem;
  font-weight: 900;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(233,194,125,0.35);
  transition: all 0.3s var(--hl-v3-ease);
  margin-top: 24px;
  font-family: inherit;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.analyze-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 32px rgba(233,194,125,0.5);
}

.analyze-btn:active {
  transform: translateY(-1px);
}

/* çµæœå€ */
.result-section {
  display: none;
  animation: fadeIn 0.6s var(--hl-v3-ease);
}

.result-section.show {
  display: block;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* å¦è±¡å¡ç‰‡ */
.gua-card {
  background: linear-gradient(135deg, rgba(233,194,125,0.1), rgba(139,127,191,0.08));
  border: 1px solid var(--hl-v3-border-soft);
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
  backdrop-filter: blur(10px);
}

.gua-title {
  font-size: 1.3rem;
  font-weight: 900;
  color: var(--hl-v3-gold);
  margin-bottom: 20px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--hl-v3-border-soft);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.gua-content {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
}

.gua-item {
  background: rgba(255,255,255,0.03);
  border: 1px solid var(--hl-v3-border-soft);
  border-radius: 12px;
  padding: 16px;
  text-align: center;
  transition: all 0.3s var(--hl-v3-ease);
}

.gua-item:hover {
  background: rgba(255,255,255,0.06);
  border-color: var(--hl-v3-gold);
  transform: translateY(-2px);
}

.gua-name {
  font-size: 1.4rem;
  font-weight: 900;
  color: var(--hl-v3-gold);
  margin-bottom: 8px;
}

.gua-element {
  font-size: 0.85rem;
  color: var(--hl-v3-ink-soft);
  margin-bottom: 10px;
  opacity: 0.8;
}

.gua-meaning {
  font-size: 0.9rem;
  color: var(--hl-v3-ink-soft);
  line-height: 1.6;
}

/* äº”è¡Œæµå‹• */
.five-elements-flow {
  background: linear-gradient(135deg, rgba(109,213,237,0.1), rgba(125,211,160,0.08));
  border: 1px solid var(--hl-v3-border-soft);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  backdrop-filter: blur(10px);
}

.flow-title {
  font-size: 1.1rem;
  font-weight: 900;
  color: var(--hl-v3-cyan);
  margin-bottom: 16px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.flow-sequence {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

.flow-item {
  background: rgba(255,255,255,0.05);
  border: 1px solid var(--hl-v3-border-soft);
  border-radius: 10px;
  padding: 12px 16px;
  font-weight: 700;
  color: var(--hl-v3-ink-main);
  min-width: 80px;
  text-align: center;
}

.flow-arrow {
  font-size: 1.4rem;
  color: var(--hl-v3-cyan);
  opacity: 0.7;
}

.flow-analysis {
  font-size: 0.95rem;
  color: var(--hl-v3-ink-soft);
  line-height: 1.7;
  padding: 12px 16px;
  background: rgba(255,255,255,0.02);
  border-left: 3px solid var(--hl-v3-cyan);
  border-radius: 8px;
}

/* ç›¸å®¹æ€§å¡ç‰‡ */
.compatibility-card {
  background: linear-gradient(135deg, rgba(240,181,179,0.1), rgba(139,127,191,0.08));
  border: 1px solid var(--hl-v3-border-soft);
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
  backdrop-filter: blur(10px);
}

.compatibility-title {
  font-size: 1.3rem;
  font-weight: 900;
  color: var(--hl-v3-rose);
  margin-bottom: 20px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.compatibility-score {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: rgba(255,255,255,0.03);
  border: 1px solid var(--hl-v3-border-soft);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 16px;
}

.score-label {
  font-weight: 700;
  color: var(--hl-v3-ink-soft);
}

.score-value {
  font-size: 2rem;
  font-weight: 900;
  background: linear-gradient(135deg, var(--hl-v3-gold), var(--hl-v3-purple));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.compatibility-analysis {
  font-size: 0.95rem;
  color: var(--hl-v3-ink-soft);
  line-height: 1.7;
  padding: 16px;
  background: rgba(255,255,255,0.02);
  border-left: 3px solid var(--hl-v3-rose);
  border-radius: 8px;
}

/* è§£è®€æ–‡æœ¬ */
.interpretation {
  background: rgba(255,255,255,0.03);
  border: 1px solid var(--hl-v3-border-soft);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  line-height: 1.8;
  color: var(--hl-v3-ink-soft);
}

.interpretation-title {
  font-weight: 900;
  color: var(--hl-v3-gold);
  margin-bottom: 12px;
  font-size: 1.05rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.interpretation p {
  margin-bottom: 12px;
}

.interpretation p:last-child {
  margin-bottom: 0;
}

/* åœ–è¡¨å®¹å™¨ */
.chart-wrapper {
  max-width: 500px;
  margin: 0 auto;
  padding: 20px 0;
}

/* CTA å€ */
.cta-section {
  background: linear-gradient(135deg, var(--hl-v3-purple), rgba(139,127,191,0.8));
  border: 1px solid var(--hl-v3-border-soft);
  color: var(--hl-v3-ink-main);
  border-radius: 16px;
  padding: 36px;
  text-align: center;
  margin-top: 32px;
}

.cta-title {
  font-size: 1.4rem;
  font-weight: 900;
  margin-bottom: 16px;
  background: linear-gradient(135deg, var(--hl-v3-gold), #fff8e7);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.cta-btn {
  display: inline-block;
  padding: 14px 28px;
  border-radius: 999px;
  font-weight: 800;
  text-decoration: none;
  transition: all 0.3s var(--hl-v3-ease);
  margin: 8px;
  font-size: 0.95rem;
  border: none;
  cursor: pointer;
}

.cta-btn-primary {
  background: linear-gradient(135deg, var(--hl-v3-gold), var(--hl-v3-gold-deep));
  color: #0a0514;
  box-shadow: 0 6px 20px rgba(233,194,125,0.3);
}

.cta-btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 28px rgba(233,194,125,0.45);
}

/* è¿”å›é€£çµ */
.back-section {
  text-align: center;
  margin-top: 32px;
}

.back-link {
  display: inline-block;
  background: linear-gradient(135deg, var(--hl-v3-gold), var(--hl-v3-gold-deep));
  color: #0a0514;
  font-weight: 800;
  padding: 12px 24px;
  border-radius: 999px;
  text-decoration: none;
  box-shadow: 0 4px 14px rgba(233,194,125,0.3);
  transition: all 0.3s var(--hl-v3-ease);
}

.back-link:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(233,194,125,0.45);
}

/* éŒ¯èª¤æç¤º */
.error-message {
  background: rgba(240,181,179,0.15);
  border: 1px solid var(--hl-v3-rose);
  border-radius: 12px;
  padding: 16px;
  color: var(--hl-v3-rose);
  margin-bottom: 16px;
  font-size: 0.95rem;
}

/* RWD */
@media(max-width:768px) {
  .container {
    padding: 32px 24px;
  }

  .input-row {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .gua-content {
    grid-template-columns: 1fr;
  }

  .flow-sequence {
    gap: 8px;
  }

  .flow-item {
    min-width: 60px;
    font-size: 0.9rem;
    padding: 10px 12px;
  }

  .compatibility-score {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .score-value {
    font-size: 1.8rem;
  }
}

@media(max-width:600px) {
  .container {
    padding: 24px 16px;
    border-radius: 16px;
  }

  h1 {
    font-size: 1.6rem;
  }

  .gua-item {
    padding: 12px;
  }

  .gua-name {
    font-size: 1.1rem;
  }

  .cta-section {
    padding: 24px 16px;
  }
}
</style>
</head>

<body>
<div class="container">
  <h1>âœ¨ æ•¸å­—èƒ½é‡åˆ†æå™¨</h1>
  <p class="subtitle">
    æ•¸å­—ç³»çµ±ï½œèº«åˆ†è­‰ Ã— æ‰‹æ©Ÿ Ã— äº”è¡Œ
  </p>

  <!-- è¼¸å…¥å€ -->
  <div class="input-section">
    <div class="input-row">
      <div class="input-group">
        <label class="input-label">
          èº«åˆ†è­‰è™Ÿç¢¼<span class="required">*</span>
        </label>
        <input type="text" id="idInput" class="input-field" placeholder="ä¾‹å¦‚ï¼šH224326529" maxlength="10">
        <div class="input-hint">å°ç£èº«åˆ†è­‰è™Ÿç¢¼ï¼ˆ1ç¢¼è‹±æ–‡+9ç¢¼æ•¸å­—ï¼‰</div>
      </div>
      <div class="input-group">
        <label class="input-label">
          æ‰‹æ©Ÿè™Ÿç¢¼<span class="required">*</span>
        </label>
        <input type="tel" id="phoneInput" class="input-field" placeholder="ä¾‹å¦‚ï¼š0905723595 æˆ– 15601853595">
        <div class="input-hint">æ‰‹æ©Ÿ</div>
      </div>
    </div>
    <div class="input-row">
      <div class="input-group">
        <label class="input-label">
          å‡ºç”Ÿæ—¥æœŸ<span class="required">*</span>
        </label>
        <input type="date" id="birthInput" class="input-field" min="1900-01-01" max="2025-12-31">
        <div class="input-hint">ç”¨æ–¼è¨ˆç®—ç”Ÿå‘½éˆæ•¸å’Œæµå¹´é‹å‹¢</div>
      </div>
    </div>
    <button class="analyze-btn" onclick="analyzeEnergy()">ğŸ”® é–‹å§‹åˆ†æèƒ½é‡</button>
  </div>

  <!-- çµæœå€ -->
  <div id="resultSection" class="result-section">
    <!-- èº«åˆ†è­‰ -->
    <div class="gua-card">
      <div class="gua-title">ğŸ“‹ èº«åˆ†è­‰</div>
      <div id="idGuaContainer"></div>
    </div>

    <!-- æœ¬å‘½è§£è®€ -->
    <div class="interpretation">
      <div class="interpretation-title">ğŸŒŸ æœ¬å‘½è§£è®€</div>
      <div id="idGuaInterpretation"></div>
    </div>

    <!-- æ‰‹æ©Ÿ -->
    <div class="gua-card">
      <div class="gua-title">ğŸ“± æ‰‹æ©Ÿåºåˆ—</div>
      <div id="phoneGuaContainer"></div>
    </div>

    <!-- äº”è¡Œæµå‹• -->
    <div class="five-elements-flow">
      <div class="flow-title">ğŸŒŠ äº”è¡Œæµå‹•åˆ†æ</div>
      <div id="flowContainer"></div>
    </div>

    <!-- æ‰‹æ©Ÿè™Ÿè§£è®€ -->
    <div class="interpretation">
      <div class="interpretation-title">ğŸ“Š æ‰‹æ©Ÿè§£è®€</div>
      <div id="phoneGuaInterpretation"></div>
    </div>

    <!-- ç›¸å®¹æ€§åˆ†æ -->
    <div class="compatibility-card">
      <div class="compatibility-title">ğŸ’« èº«åˆ†è­‰èˆ‡æ‰‹æ©Ÿæ­é…åˆ†æ</div>
      <div id="compatibilityContainer"></div>
    </div>

    <!-- æ­é…å»ºè­° -->
    <div class="interpretation">
      <div class="interpretation-title">âœ¨ èƒ½é‡èª¿é »å»ºè­°</div>
      <div id="recommendationContainer"></div>
    </div>

    <!-- CTA -->
    <div class="cta-section">
      <div class="cta-title">æƒ³è¦æ›´æ·±å…¥çš„èƒ½é‡èª¿é »ï¼Ÿ</div>
      <p style="color:var(--hl-v3-ink-soft);margin-bottom:16px;font-size:0.95rem;">
        è®“å°ˆæ¥­èª¿é »å¸«ç‚ºä½ è§£è®€æ›´æ·±å±¤çš„æ•¸å­—è¨Šæ¯
      </p>
      <a href="https://lin.ee/vpbLhNjF" target="_blank" rel="noopener" class="cta-btn cta-btn-primary">ğŸ’¬ LINE @hourlight</a>
    </div>
  </div>

  <div class="back-section">
    <a href="index.html" class="back-link">ğŸ  è¿”å›é¦–é </a>
  </div>
</div>

<script>
// ========== æ¹›å¯‚å¸«çˆ¶æ•¸å­—å¦ç³»çµ± ==========

// å…«å¦å°æ‡‰è¡¨
const GUA_MAP = {
  1: {name: "ä¹¾", element: "é‡‘", meaning: "å¤©ã€å‰µé€ ã€é ˜å°ã€æ¬ŠåŠ›ã€å…‰æ˜"},
  2: {name: "å…Œ", element: "é‡‘", meaning: "å–œæ‚…ã€äº¤è«‡ã€å°‘å¥³ã€é–‹æ”¾ã€æºé€š"},
  3: {name: "é›¢", element: "ç«", meaning: "å…‰æ˜ã€åè²ã€æ–‡æ˜ã€è°æ…§ã€ç¾éº—"},
  4: {name: "éœ‡", element: "æœ¨", meaning: "å‹•åŠ›ã€è®ŠåŒ–ã€è¡Œå‹•ã€é›·é›»ã€æˆé•·"},
  5: {name: "å·½", element: "æœ¨", meaning: "é¢¨ã€é †å¾ã€é€²å…¥ã€æŸ”å’Œã€æµå‹•"},
  6: {name: "å", element: "æ°´", meaning: "æ°´ã€è°æ…§ã€æµå‹•ã€æ·±åº¦ã€æ™ºæ…§"},
  7: {name: "è‰®", element: "åœŸ", meaning: "å±±ã€åœæ­¢ã€ç©©å®šã€å¯é ã€æ²‰è‘—"},
  8: {name: "å¤", element: "åœŸ", meaning: "åœ°ã€åŒ…å®¹ã€æ¯è¦ªã€ç©©å®šã€åšé‡"}
};

// äº”è¡Œç›¸ç”Ÿç›¸å‰‹
const FIVE_ELEMENTS_GENERATION = {
  "é‡‘": "æ°´", "æ°´": "æœ¨", "æœ¨": "ç«", "ç«": "åœŸ", "åœŸ": "é‡‘"
};

const FIVE_ELEMENTS_RESTRAINT = {
  "é‡‘": "æœ¨", "æœ¨": "åœŸ", "åœŸ": "æ°´", "æ°´": "ç«", "ç«": "é‡‘"
};

// æœ¬å‘½å¦çµ„åˆ
const MING_GUA_MAP = {
  "å¤å": "åœ°æ°´å¸«å¦ - æ™ºæ…§çš„é ˜å°è€…ï¼Œç©©å®šä¸­å¸¶æœ‰æ·±åº¦æ€è€ƒ",
  "å¤è‰®": "åœ°å±±è¬™å¦ - è¬™è™›ç©©é‡ï¼Œå…§æ–‚è€Œæœ‰åŠ›é‡",
  "å¤é›¢": "åœ°ç«æ˜å¤·å¦ - å…‰æ˜ä¸­å¸¶æœ‰æ²‰è‘—ï¼Œè°æ…§è€Œç©©å®š",
  "å¤éœ‡": "åœ°é›·å¾©å¦ - å¾ªç’°å¾€å¾©ï¼Œç”Ÿç”Ÿä¸æ¯çš„èƒ½é‡",
  "å¤å·½": "åœ°é¢¨å‡å¦ - ç©©ä¸­æ±‚é€²ï¼Œå¾ªåºæ¼¸é€²çš„æˆé•·",
  "å¤å…Œ": "åœ°æ¾¤è‡¨å¦ - è¦ªå’ŒåŠ›å¼·ï¼ŒåŒ…å®¹è€Œé–‹æ”¾",
  "å¤å¤": "å¤ç‚ºåœ°å¦ - æ¥µåº¦ç©©å®šï¼Œåšå¾·è¼‰ç‰©",
  "å¤ä¹¾": "åœ°å¤©æ³°å¦ - é™°é™½å’Œè«§ï¼Œäº‹æ¥­é †åˆ©",
  "è‰®å": "å±±æ°´è’™å¦ - æ™ºæ…§å•Ÿè’™ï¼Œç©©å®šä¸­æ±‚ç™¼å±•",
  "è‰®è‰®": "è‰®ç‚ºå±±å¦ - ç©©å¦‚ç£çŸ³ï¼Œå …å®šä¸ç§»",
  "è‰®é›¢": "å±±ç«è³å¦ - æ–‡é‡‡æ–ç„¶ï¼Œå…§å¤–å…¼ä¿®",
  "è‰®éœ‡": "å±±é›·é ¤å¦ - é¤Šè­·ç”Ÿå‘½ï¼Œå…§æ–‚è€Œæœ‰åŠ›",
  "è‰®å·½": "å±±é¢¨è›Šå¦ - é©æ–°è®ŠåŒ–ï¼Œç©©ä¸­æ±‚æ–°",
  "è‰®å…Œ": "å±±æ¾¤æå¦ - èˆå¾—ä¹‹é“ï¼ŒçŸ¥è¶³å¸¸æ¨‚",
  "è‰®å¤": "å±±åœ°å‰å¦ - å¾ªåºæ¼¸é€²ï¼Œåšç©è–„ç™¼",
  "è‰®ä¹¾": "å±±å¤©å¤§ç•œå¦ - è“„å‹¢å¾…ç™¼ï¼Œå¤§å™¨æ™šæˆ",
  "é›¢å": "ç«æ°´æœªæ¿Ÿå¦ - ç›¸äº’è£œå……ï¼Œå‹•éœçµåˆ",
  "é›¢è‰®": "ç«å±±æ—…å¦ - è¡Œå‹•åŠ›å¼·ï¼Œè¦‹å¤šè­˜å»£",
  "é›¢é›¢": "é›¢ç‚ºç«å¦ - å…‰èŠ’å››å°„ï¼Œè²åé æ’­",
  "é›¢éœ‡": "ç«é›·å™¬å—‘å¦ - æ±ºæ–·åŠ›å¼·ï¼Œè¡Œå‹•è¿…é€Ÿ",
  "é›¢å·½": "ç«é¢¨é¼å¦ - å‰µæ–°ç™¼å±•ï¼Œäº‹æ¥­é¨°é£›",
  "é›¢å…Œ": "ç«æ¾¤ç½å¦ - ç¨ç‰¹è¦–è§’ï¼Œå‰µæ„åè¶³",
  "é›¢å¤": "ç«åœ°æ™‰å¦ - ä¸Šå‡ä¹‹å‹¢ï¼Œå‰æ™¯å…‰æ˜",
  "é›¢ä¹¾": "ç«å¤©å¤§æœ‰å¦ - è±æ”¶åœ¨å³ï¼Œè²¡é‹äº¨é€š",
  "éœ‡å": "é›·æ°´è§£å¦ - åŒ–è§£å›°é›£ï¼ŒæŸ³æš—èŠ±æ˜",
  "éœ‡è‰®": "é›·å±±å°éå¦ - è¬¹æ…è¡Œå‹•ï¼Œç´°ç¯€æ±ºå®šæˆæ•—",
  "éœ‡é›¢": "é›·ç«è±å¦ - äº‹æ¥­é«˜å³°ï¼Œæˆå°±éå‡¡",
  "éœ‡éœ‡": "éœ‡ç‚ºé›·å¦ - å‹•åŠ›åè¶³ï¼Œè¡Œå‹•åŠ›å¼·",
  "éœ‡å·½": "é›·é¢¨æ†å¦ - æŒä¹‹ä»¥æ†ï¼Œé•·æœŸç™¼å±•",
  "éœ‡å…Œ": "é›·æ¾¤æ­¸å¦¹å¦ - æ„Ÿæƒ…è±å¯Œï¼Œäººç·£æ—ºç››",
  "éœ‡å¤": "é›·åœ°è±«å¦ - æ¨‚è§€ç©æ¥µï¼Œäººç”Ÿé †é‚",
  "éœ‡ä¹¾": "é›·å¤©å¤§å£¯å¦ - æ°£å‹¢ç£…ç¤´ï¼Œå‹¢ä¸å¯æ“‹",
  "å·½å": "é¢¨æ°´æ¸™å¦ - æµå‹•ç™¼å±•ï¼Œéˆæ´»è®Šé€š",
  "å·½è‰®": "é¢¨å±±æ¼¸å¦ - å¾ªåºæ¼¸é€²ï¼Œç©©æ­¥å‘å‰",
  "å·½é›¢": "é¢¨ç«å®¶äººå¦ - å®¶åº­å’Œç¦ï¼Œäº‹æ¥­é †åˆ©",
  "å·½éœ‡": "é¢¨é›·ç›Šå¦ - äº’åˆ©å…±è´ï¼Œå…±åŒæˆé•·",
  "å·½å·½": "å·½ç‚ºé¢¨å¦ - æŸ”å’Œé †æš¢ï¼Œéˆæ´»å¤šè®Š",
  "å·½å…Œ": "é¢¨æ¾¤ä¸­å­šå¦ - èª ä¿¡ç‚ºæœ¬ï¼Œä¿¡ä»»æ·±åš",
  "å·½å¤": "é¢¨åœ°è§€å¦ - è§€å¯Ÿå…¥å¾®ï¼Œæ´å¯Ÿå…ˆæ©Ÿ",
  "å·½ä¹¾": "é¢¨å¤©å°ç•œå¦ - è“„å‹¢å¾…ç™¼ï¼Œæ™‚æ©Ÿæœªåˆ°",
  "å…Œå": "æ¾¤æ°´å›°å¦ - å›°ä¸­æ±‚è®Šï¼ŒæŸ³æš—èŠ±æ˜",
  "å…Œè‰®": "æ¾¤å±±å’¸å¦ - æ„Ÿæ‡‰éˆæ•ï¼Œäººéš›å’Œè«§",
  "å…Œé›¢": "æ¾¤ç«é©å¦ - é©æ–°è®ŠåŒ–ï¼Œæµ´ç«é‡ç”Ÿ",
  "å…Œéœ‡": "æ¾¤é›·éš¨å¦ - é †æ‡‰æ™‚å‹¢ï¼Œéˆæ´»æ‡‰è®Š",
  "å…Œå·½": "æ¾¤é¢¨å¤§éå¦ - è¶…è¶Šè‡ªæˆ‘ï¼Œçªç ´æ¥µé™",
  "å…Œå…Œ": "å…Œç‚ºæ¾¤å¦ - å–œæ‚…é–‹æ”¾ï¼Œäººç·£æ—ºç››",
  "å…Œå¤": "æ¾¤åœ°èƒå¦ - èšé›†äººæ°£ï¼Œåœ˜çµåˆä½œ",
  "å…Œä¹¾": "æ¾¤å¤©å¤¬å¦ - æ±ºæ–·æœæ•¢ï¼Œå‹¢åœ¨å¿…è¡Œ",
  "åå": "åç‚ºæ°´å¦ - æ™ºæ…§æ·±é‚ƒï¼Œæµå‹•ç™¼å±•",
  "åè‰®": "æ°´å±±è¹‡å¦ - å›°é›£é‡é‡ï¼Œéœ€è¦è€å¿ƒ",
  "åé›¢": "æ°´ç«æ—¢æ¿Ÿå¦ - é™°é™½å¹³è¡¡ï¼Œäº‹æ¥­æˆåŠŸ",
  "åéœ‡": "æ°´é›·å±¯å¦ - åˆç”Ÿä¹‹çŠ¢ï¼Œå‰æ™¯å…‰æ˜",
  "åå·½": "æ°´é¢¨äº•å¦ - æºæºä¸æ–·ï¼ŒæŒçºŒç™¼å±•",
  "åå…Œ": "æ°´æ¾¤ç¯€å¦ - é©åº¦ç¯€åˆ¶ï¼Œé•·æœŸç©©å®š",
  "åå¤": "æ°´åœ°æ¯”å¦ - è¦ªå¯†åˆä½œï¼Œäº’ç›¸æ”¯æŒ",
  "åä¹¾": "æ°´å¤©éœ€å¦ - è€å¿ƒç­‰å¾…ï¼Œæ™‚æ©Ÿæˆç†Ÿ",
  "ä¹¾å": "å¤©æ°´è¨Ÿå¦ - ç†æ€§æºé€šï¼ŒåŒ–è§£ç´›çˆ­",
  "ä¹¾è‰®": "å¤©å±±é¯å¦ - æˆ°ç•¥é€€å»ï¼Œè“„å‹¢å¾…ç™¼",
  "ä¹¾é›¢": "å¤©ç«åŒäººå¦ - å¿—åŒé“åˆï¼Œäº‹æ¥­å…±é€²",
  "ä¹¾éœ‡": "å¤©é›·ç„¡å¦„å¦ - é †å…¶è‡ªç„¶ï¼Œç„¡ç‚ºè€Œæ²»",
  "ä¹¾å·½": "å¤©é¢¨å§¤å¦ - ç›¸é‡ç›¸çŸ¥ï¼Œç·£åˆ†å¤©æˆ",
  "ä¹¾å…Œ": "å¤©æ¾¤å±¥å¦ - è¸å¯¦è¡Œå‹•ï¼Œæ­¥æ­¥ç‚ºç‡Ÿ",
  "ä¹¾å¤": "å¤©åœ°æ³°å¦ - é™°é™½å’Œè«§ï¼Œäº‹æ¥­é †åˆ©",
  "ä¹¾ä¹¾": "ä¹¾ç‚ºå¤©å¦ - é ˜å°åŠ›å¼·ï¼Œå‰æ™¯å…‰æ˜"
};

// è¨ˆç®—å¦è±¡
function calculateGua(digits_str) {
  // è™•ç†é›¶
  if (digits_str.length < 3) return null;
  
  if (digits_str[2] === '0') return null; // æœ«ä½ç‚º0æˆç©º
  
  if (digits_str[0] === '0') {
    digits_str = digits_str[1] + digits_str[1] + digits_str[2];
  } else if (digits_str[1] === '0') {
    digits_str = digits_str[0] + digits_str[0] + digits_str[2];
  }
  
  // åˆ¤æ–·æ˜¯å¦ä½¿ç”¨é™°é™½çˆ»æ³•
  if (digits_str.length === 3) {
    const d1 = parseInt(digits_str[0]);
    const d2 = parseInt(digits_str[1]);
    const d3 = parseInt(digits_str[2]);
    
    // ã€Œå¥‡-å¶-å¶ã€æ¨¡å¼ä½¿ç”¨é™°é™½çˆ»æ³•
    if ((d1 % 2 === 1) && (d2 % 2 === 0) && (d3 % 2 === 0)) {
      const yao = [
        d1 % 2 === 1 ? "é™½" : "é™°",
        d2 % 2 === 1 ? "é™½" : "é™°",
        d3 % 2 === 1 ? "é™½" : "é™°"
      ];
      const pattern = yao[1] + yao[0] + yao[2];
      const patterns = {
        "é™½é™½é™½": 1, "é™½é™½é™°": 4, "é™½é™°é™½": 3, "é™½é™°é™°": 5,
        "é™°é™½é™½": 2, "é™°é™½é™°": 6, "é™°é™°é™½": 7, "é™°é™°é™°": 8
      };
      return patterns[pattern] || null;
    }
  }
  
  // æ±‚å’Œå–é¤˜æ³•
  const sum = digits_str.split('').reduce((a, b) => a + parseInt(b), 0);
  const remainder = sum % 8;
  return remainder === 0 ? 8 : remainder;
}

// åˆ†æèº«åˆ†è­‰
function analyzeID(idNumber) {
  const digits = idNumber.substring(1); // å»æ‰é¦–å­—æ¯
  const groups = [digits.substring(0, 3), digits.substring(3, 6), digits.substring(6, 9)];
  
  const guaSequence = [];
  const guaNames = [];
  const elements = [];
  
  for (let group of groups) {
    const guaNum = calculateGua(group);
    if (guaNum) {
      guaSequence.push(guaNum);
      guaNames.push(GUA_MAP[guaNum].name);
      elements.push(GUA_MAP[guaNum].element);
    }
  }
  
  // æœ¬å‘½å¦ = ä¸Šå¦(ç¬¬3çµ„) + ä¸‹å¦(ç¬¬2çµ„)
  let mingGua = null;
  if (guaNames.length >= 2) {
    mingGua = guaNames[2] + guaNames[1]; // ä¸Šå¦ + ä¸‹å¦
  }
  
  return {
    groups,
    guaSequence,
    guaNames,
    elements,
    mingGua,
    mingGuaMeaning: MING_GUA_MAP[mingGua] || "ç‰¹æ®Šå¦è±¡çµ„åˆ"
  };
}

// åˆ†ææ‰‹æ©Ÿè™Ÿ
function analyzePhone(phoneNumber) {
  const digits = phoneNumber.replace(/\D/g, '');
  
  // å¦‚æœæ˜¯å°ç£æ‰‹æ©Ÿ(09é–‹é ­)ï¼Œå»æ‰é¦–ä½0
  let processedDigits = digits;
  if (digits.startsWith('09')) {
    processedDigits = digits.substring(1);
  }
  
  // å¾å¾Œé¢é–‹å§‹ä¸‰ä½ä¸€çµ„
  const groups = [];
  for (let i = processedDigits.length; i > 0; i -= 3) {
    const start = Math.max(0, i - 3);
    groups.unshift(processedDigits.substring(start, i));
  }
  
  const guaSequence = [];
  const guaNames = [];
  const elements = [];
  
  for (let group of groups) {
    if (group.length === 1) {
      // å–®å€‹æ•¸å­—ç›´æ¥å°æ‡‰
      const guaNum = parseInt(group);
      if (guaNum >= 1 && guaNum <= 9) {
        const mappedNum = guaNum === 9 ? 8 : guaNum;
        guaSequence.push(mappedNum);
        guaNames.push(GUA_MAP[mappedNum].name);
        elements.push(GUA_MAP[mappedNum].element);
      }
    } else {
      const guaNum = calculateGua(group);
      if (guaNum) {
        guaSequence.push(guaNum);
        guaNames.push(GUA_MAP[guaNum].name);
        elements.push(GUA_MAP[guaNum].element);
      }
    }
  }
  
  return {
    groups,
    guaSequence,
    guaNames,
    elements
  };
}

// åˆ†æäº”è¡Œæµå‹•
function analyzeFiveElements(elements) {
  let analysis = "";
  let score = 100;
  
  for (let i = 0; i < elements.length - 1; i++) {
    const current = elements[i];
    const next = elements[i + 1];
    
    if (FIVE_ELEMENTS_GENERATION[current] === next) {
      analysis += `${current}ç”Ÿ${next}ï¼Œ`;
      score += 10;
    } else if (FIVE_ELEMENTS_RESTRAINT[current] === next) {
      analysis += `${current}å…‹${next}ï¼Œ`;
      score -= 15;
    } else {
      analysis += `${current}èˆ‡${next}ç›¸éš”ï¼Œ`;
    }
  }
  
  analysis = analysis.slice(0, -1);
  
  let flowAnalysis = "";
  if (analysis.includes("å…‹")) {
    flowAnalysis = "âš ï¸ äº”è¡Œä¸­å­˜åœ¨ç›¸å‰‹ï¼Œéœ€è¦ç‰¹åˆ¥èª¿é »å’Œå¹³è¡¡ã€‚";
  } else if (analysis.includes("ç”Ÿ")) {
    flowAnalysis = "âœ¨ äº”è¡Œç›¸ç”Ÿæµæš¢ï¼Œèƒ½é‡æµå‹•é †åˆ©ï¼Œäº‹æ¥­é‹å‹¢è‰¯å¥½ã€‚";
  } else {
    flowAnalysis = "ğŸ”„ äº”è¡Œç›¸éš”ï¼Œéœ€è¦é€šéèª¿é »ä¾†å¢å¼·èƒ½é‡é€£çµã€‚";
  }
  
  return {
    analysis,
    flowAnalysis,
    score: Math.max(0, Math.min(100, score))
  };
}

// åˆ†æç›¸å®¹æ€§
function analyzeCompatibility(idResult, phoneResult) {
  let score = 100;
  let analysis = "";
  
  // æª¢æŸ¥èº«åˆ†è­‰ä¸‹å¦èˆ‡æ‰‹æ©Ÿè™Ÿç¬¬ä¸€å¦çš„ç›¸å®¹æ€§
  if (idResult.guaNames.length >= 2 && phoneResult.guaNames.length >= 1) {
    const idLowerElement = idResult.elements[1];
    const phoneFirstElement = phoneResult.elements[0];
    
    if (FIVE_ELEMENTS_GENERATION[idLowerElement] === phoneFirstElement) {
      score += 15;
      analysis += `âœ¨ èº«åˆ†è­‰ä¸‹å¦(${idResult.guaNames[1]}å¦)çš„${idLowerElement}èƒ½é‡ç”Ÿæ‰‹æ©Ÿè™Ÿç¬¬ä¸€å¦(${phoneResult.guaNames[0]}å¦)çš„${phoneFirstElement}ï¼Œç›¸å®¹æ€§æ¥µä½³ã€‚\n`;
    } else if (FIVE_ELEMENTS_RESTRAINT[idLowerElement] === phoneFirstElement) {
      score -= 20;
      analysis += `âš ï¸ èº«åˆ†è­‰ä¸‹å¦(${idResult.guaNames[1]}å¦)çš„${idLowerElement}èƒ½é‡å…‹æ‰‹æ©Ÿè™Ÿç¬¬ä¸€å¦(${phoneResult.guaNames[0]}å¦)çš„${phoneFirstElement}ï¼Œéœ€è¦èª¿é »ã€‚\n`;
    }
  }
  
  // æª¢æŸ¥æ•´é«”äº”è¡Œå¹³è¡¡
  const allElements = [...idResult.elements, ...phoneResult.elements];
  const elementCount = {};
  for (let elem of allElements) {
    elementCount[elem] = (elementCount[elem] || 0) + 1;
  }
  
  const maxCount = Math.max(...Object.values(elementCount));
  if (maxCount > 3) {
    score -= 10;
    analysis += `âš ï¸ æŸå€‹äº”è¡Œéå¤šï¼Œå»ºè­°é¸æ“‡å…¶ä»–è™Ÿç¢¼ä¾†å¹³è¡¡ã€‚\n`;
  }
  
  score = Math.max(0, Math.min(100, score));
  
  return {
    score,
    analysis: analysis || "èº«åˆ†è­‰èˆ‡æ‰‹æ©Ÿè™Ÿçš„èƒ½é‡æ­é…å¹³è¡¡ã€‚"
  };
}

// ä¸»åˆ†æå‡½æ•¸
function analyzeEnergy() {
  const idInput = document.getElementById('idInput').value.trim().toUpperCase();
  const phoneInput = document.getElementById('phoneInput').value.trim();
  const birthInput = document.getElementById('birthInput').value;
  
  // é©—è­‰
  if (!idInput || !/^[A-Z]\d{9}$/.test(idInput)) {
    showError('è«‹è¼¸å…¥æ­£ç¢ºçš„èº«åˆ†è­‰è™Ÿç¢¼ï¼ˆ1ç¢¼è‹±æ–‡+9ç¢¼æ•¸å­—ï¼‰');
    return;
  }
  
  if (!phoneInput || (!/^09\d{8}$/.test(phoneInput) && !/^1[5-9]\d{9}$/.test(phoneInput))) {
    showError('è«‹è¼¸å…¥æ­£ç¢ºçš„æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆå°ç£09é–‹é ­æˆ–å¤§é™¸15/18é–‹é ­ï¼‰');
    return;
  }
  
  if (!birthInput) {
    showError('è«‹é¸æ“‡å‡ºç”Ÿæ—¥æœŸ');
    return;
  }
  
  // åˆ†æ
  const idResult = analyzeID(idInput);
  const phoneResult = analyzePhone(phoneInput);
  const flowResult = analyzeFiveElements(phoneResult.elements);
  const compatibilityResult = analyzeCompatibility(idResult, phoneResult);
  
  // é¡¯ç¤ºçµæœ
  displayIDGua(idResult);
  displayPhoneGua(phoneResult);
  displayFlow(flowResult);
  displayCompatibility(compatibilityResult, idResult, phoneResult);
  displayRecommendation(compatibilityResult, flowResult);
  
  // é¡¯ç¤ºçµæœå€
  document.getElementById('resultSection').classList.add('show');
  document.getElementById('resultSection').scrollIntoView({behavior: 'smooth'});
}

function showError(message) {
  alert(message);
}

function displayIDGua(idResult) {
  let html = '<div class="gua-content">';
  for (let i = 0; i < idResult.guaNames.length; i++) {
    const guaNum = idResult.guaSequence[i];
    const gua = GUA_MAP[guaNum];
    html += `
      <div class="gua-item">
        <div class="gua-name">${gua.name}</div>
        <div class="gua-element">${gua.element}äº”è¡Œ</div>
        <div class="gua-meaning">${gua.meaning}</div>
      </div>
    `;
  }
  html += '</div>';
  document.getElementById('idGuaContainer').innerHTML = html;
  
  // æœ¬å‘½å¦è§£è®€
  let interpretation = `<p><strong>æœ¬å‘½å¦ï¼š${idResult.mingGua}</strong></p>`;
  interpretation += `<p>${idResult.mingGuaMeaning}</p>`;
  interpretation += `<p>é€™å€‹å¦è±¡ä»£è¡¨äº†æ‚¨èˆ‡ç”Ÿä¿±ä¾†çš„å‘½é‹ç‰¹è³ªå’Œèƒ½é‡ç‰¹å¾µã€‚å®ƒå½±éŸ¿è‘—æ‚¨çš„äººç”Ÿæ–¹å‘ã€æ€§æ ¼å‚¾å‘å’Œä¸»è¦é‹å‹¢ã€‚é€šéäº†è§£æœ¬å‘½å¦ï¼Œæ‚¨å¯ä»¥æ›´å¥½åœ°èªè­˜è‡ªå·±ï¼Œç™¼æ®æ½›èƒ½ã€‚</p>`;
  document.getElementById('idGuaInterpretation').innerHTML = interpretation;
}

function displayPhoneGua(phoneResult) {
  let html = '<div class="gua-content">';
  for (let i = 0; i < phoneResult.guaNames.length; i++) {
    const guaNum = phoneResult.guaSequence[i];
    const gua = GUA_MAP[guaNum];
    html += `
      <div class="gua-item">
        <div class="gua-name">${gua.name}</div>
        <div class="gua-element">${gua.element}äº”è¡Œ</div>
        <div class="gua-meaning">${gua.meaning}</div>
      </div>
    `;
  }
  html += '</div>';
  document.getElementById('phoneGuaContainer').innerHTML = html;
  
  // æ‰‹æ©Ÿè™Ÿè§£è®€
  let interpretation = `<p>æ‚¨çš„æ‰‹æ©Ÿè™Ÿç¢¼ç”± <strong>${phoneResult.guaNames.join(' â†’ ')}</strong> çš„å¦è±¡åºåˆ—çµ„æˆã€‚</p>`;
  interpretation += `<p>é€™å€‹è™Ÿç¢¼çš„èƒ½é‡ç‰¹å¾µæ˜¯ï¼š<strong>${phoneResult.elements.join(' â†’ ')}</strong> çš„äº”è¡Œæµå‹•ã€‚æ‰‹æ©Ÿè™Ÿç¢¼æ˜¯æ‚¨æœ€å¸¸ä½¿ç”¨çš„æ•¸å­—ç£å ´ï¼Œå®ƒæœƒæŒçºŒå½±éŸ¿æ‚¨çš„èƒ½é‡é »ç‡å’Œé‹å‹¢ç™¼å±•ã€‚</p>`;
  document.getElementById('phoneGuaInterpretation').innerHTML = interpretation;
}

function displayFlow(flowResult) {
  let html = `
    <div class="flow-sequence">
      ${flowResult.analysis.split('ï¼Œ').map((item, idx, arr) => {
        const parts = item.split(/ç”Ÿ|å…‹|èˆ‡|ç›¸éš”/);
        if (idx < arr.length - 1) {
          return `
            <div class="flow-item">${parts[0]}</div>
            <div class="flow-arrow">â†’</div>
            <div class="flow-item">${parts[1]}</div>
            ${idx < arr.length - 2 ? '<div class="flow-arrow">â†’</div>' : ''}
          `;
        }
        return '';
      }).join('')}
    </div>
    <div class="flow-analysis">${flowResult.flowAnalysis}</div>
  `;
  document.getElementById('flowContainer').innerHTML = html;
}

function displayCompatibility(compatibilityResult, idResult, phoneResult) {
  let html = `
    <div class="compatibility-score">
      <span class="score-label">èº«åˆ†è­‰èˆ‡æ‰‹æ©Ÿæ­é…è©•åˆ†</span>
      <span class="score-value">${compatibilityResult.score}</span>
    </div>
    <div class="compatibility-analysis">${compatibilityResult.analysis}</div>
  `;
  document.getElementById('compatibilityContainer').innerHTML = html;
}

function displayRecommendation(compatibilityResult, flowResult) {
  let recommendation = "";
  
  if (compatibilityResult.score >= 80) {
    recommendation = `<p><strong>âœ¨ å®Œç¾æ­é…</strong></p><p>æ‚¨çš„èº«åˆ†è­‰èˆ‡æ‰‹æ©Ÿè™Ÿç¢¼çš„èƒ½é‡æ­é…éå¸¸å’Œè«§ï¼Œå»ºè­°ç¹¼çºŒä½¿ç”¨ç•¶å‰è™Ÿç¢¼ã€‚é€™å€‹çµ„åˆå°‡å¹«åŠ©æ‚¨ç™¼æ®æ½›èƒ½ï¼Œäº‹æ¥­å’Œäººç”Ÿé‹å‹¢éƒ½æœƒå¾—åˆ°è‰¯å¥½çš„æ”¯æŒã€‚</p>`;
  } else if (compatibilityResult.score >= 60) {
    recommendation = `<p><strong>ğŸŒŸ è‰¯å¥½æ­é…</strong></p><p>èº«åˆ†è­‰èˆ‡æ‰‹æ©Ÿè™Ÿç¢¼çš„èƒ½é‡æ­é…åŸºæœ¬å’Œè«§ï¼Œä½†é‚„æœ‰æ”¹é€²çš„ç©ºé–“ã€‚æ‚¨å¯ä»¥é€šéç²¾æ²¹èª¿é¦™ã€å†¥æƒ³æˆ–å…¶ä»–èƒ½é‡èª¿é »æ–¹å¼ä¾†å¢å¼·æ•´é«”çš„å’Œè«§åº¦ã€‚</p>`;
  } else {
    recommendation = `<p><strong>ğŸ”„ å»ºè­°èª¿æ•´</strong></p><p>ç•¶å‰çš„è™Ÿç¢¼çµ„åˆä¸­å­˜åœ¨ä¸€äº›èƒ½é‡è¡çªã€‚å»ºè­°æ‚¨è€ƒæ…®æ›´æ›æ‰‹æ©Ÿè™Ÿç¢¼ï¼Œé¸æ“‡èˆ‡èº«åˆ†è­‰æœ¬å‘½å¦æ›´ç›¸å®¹çš„è™Ÿç¢¼ï¼Œä»¥ç²å¾—æ›´å¥½çš„é‹å‹¢æ”¯æŒã€‚</p>`;
  }
  
  recommendation += `<p><strong>ğŸ’¡ èƒ½é‡èª¿é »å»ºè­°</strong></p><p>ç„¡è«–æ‚¨çš„æ­é…è©•åˆ†å¦‚ä½•ï¼Œéƒ½å¯ä»¥é€šéä»¥ä¸‹æ–¹å¼ä¾†å¢å¼·å’Œå„ªåŒ–æ‚¨çš„èƒ½é‡ï¼š</p><ul style="margin-left: 20px; margin-top: 10px;"><li>å®šæœŸä½¿ç”¨é¦¥éˆä¹‹é‘°ç‰Œå¡é€²è¡Œèƒ½é‡å°ç„¦</li><li>æ ¹æ“šæ‚¨çš„å¦è±¡ç‰¹è³ªé¸æ“‡åˆé©çš„ç²¾æ²¹èª¿é¦™</li><li>åœ¨é‡è¦æ±ºå®šå‰é€²è¡Œæ•¸å­—å¦å åœ</li><li>èˆ‡èª¿é »å¸«é€²è¡Œæ·±åº¦çš„èƒ½é‡è«®è©¢</li></ul>`;
  
  document.getElementById('recommendationContainer').innerHTML = recommendation;
}
</script>
</body>
</html>
