
<!DOCTYPE html>
<html lang="zh-TW">
<head>
<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BXP7K53QG6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-BXP7K53QG6');
</script>
<!-- Facebook Pixel -->
<script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '1333106288588347');
  fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=1333106288588347&ev=PageView&noscript=1"
/></noscript>
<!-- End Facebook Pixel -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦¥éˆä¹‹é‘° Hour Light v6.0 - è¶…å®Œæ•´ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #D4AF37;
            --gold-light: #F5E6A3;
            --cream: #FDF8E8;
            --brown: #4A3728;
            --night-bg: #1A1A2E;
            --night-card: #16213E;
            --purple: #9F5FDB;
        }
        
        body { font-family: 'Noto Sans TC', sans-serif; }
        .serif { font-family: 'Noto Serif TC', serif; }
        
        body.day-mode {
            background: linear-gradient(135deg, #FDF8E8 0%, #F5E6A3 50%, #FDF8E8 100%);
            color: #4A3728;
        }
        
        body.night-mode {
            background: linear-gradient(135deg, #1A1A2E 0%, #16213E 50%, #0F0F23 100%);
            color: #E0D4FC;
        }
        
        .gold-text { color: var(--gold); }
        .night-mode .gold-text { color: #FFD700; text-shadow: 0 0 15px rgba(255,215,0,0.3); }

        .gold-btn {
            background: linear-gradient(135deg, #D4AF37 0%, #F5E6A3 50%, #D4AF37 100%);
            color: #2D1B0E;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            transition: all 0.3s;
        }
        .gold-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4); }
        .night-mode .gold-btn {
            background: linear-gradient(135deg, #6B2C91 0%, #9F5FDB 50%, #6B2C91 100%);
            color: #fff;
        }

        .card {
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            transition: all 0.3s;
        }
        .day-mode .card {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 4px 20px rgba(139, 115, 85, 0.1);
        }
        .night-mode .card {
            background: rgba(22, 33, 62, 0.9);
            border: 1px solid rgba(159, 95, 219, 0.3);
        }

        .tab-btn { transition: all 0.3s; border-bottom: 3px solid transparent; }
        .tab-btn.active { border-bottom-color: var(--gold); }
        .night-mode .tab-btn.active { border-bottom-color: var(--purple); }

        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            transform: translateX(-50%);
        }
        .day-mode .timeline-line { background: linear-gradient(to bottom, #D4AF37, #8B7355); }
        .night-mode .timeline-line { background: linear-gradient(to bottom, #9F5FDB, #4A2C7C); }

        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(8px);
            display: flex; align-items: center; justify-content: center;
            z-index: 100;
        }
        .modal-content { max-height: 90vh; overflow-y: auto; }

        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12'%3E%3Cpath fill='%23D4AF37' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            appearance: none;
        }

        .score-bar { height: 8px; border-radius: 4px; overflow: hidden; }
        .score-fill { height: 100%; transition: width 0.8s ease-out; }

        @media (max-width: 768px) {
            .tab-btn { font-size: 0.75rem; padding: 0.5rem; }
        }
    </style>
<link rel="stylesheet" href="assets/css/hourlight-global.css">

    <meta name="description" content="é¦¥éˆä¹‹é‘°æ•¸å­—èƒ½é‡åˆ†æå™¨ï½œè¶…å®Œæ•´ç‰ˆèƒ½é‡è§£è®€å·¥å…·ï¼Œå¤šç¶­åº¦æ¢ç´¢ä½ çš„ç”Ÿå‘½æ•¸å­—ã€‚">
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hourlightkey.com/digital-energy-analyzer.html">
    <meta property="og:title" content="é¦¥éˆä¹‹é‘° Hour Light v6.0 - è¶…å®Œæ•´ç‰ˆ">
    <meta property="og:description" content="é¦¥éˆä¹‹é‘°æ•¸å­—èƒ½é‡åˆ†æå™¨ï½œè¶…å®Œæ•´ç‰ˆèƒ½é‡è§£è®€å·¥å…·ï¼Œå¤šç¶­åº¦æ¢ç´¢ä½ çš„ç”Ÿå‘½æ•¸å­—ã€‚">
    <meta property="og:image" content="https://hourlightkey.com/og-image.jpg">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:site_name" content="é¦¥éˆä¹‹é‘° Hour Light">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="é¦¥éˆä¹‹é‘° Hour Light v6.0 - è¶…å®Œæ•´ç‰ˆ">
    <meta name="twitter:description" content="é¦¥éˆä¹‹é‘°æ•¸å­—èƒ½é‡åˆ†æå™¨ï½œè¶…å®Œæ•´ç‰ˆèƒ½é‡è§£è®€å·¥å…·ï¼Œå¤šç¶­åº¦æ¢ç´¢ä½ çš„ç”Ÿå‘½æ•¸å­—ã€‚">
    <meta name="twitter:image" content="https://hourlightkey.com/og-image.jpg">

    
    <link rel="canonical" href="https://hourlightkey.com/digital-energy-analyzer.html">
    <meta name="keywords" content="æ•¸å­—èƒ½é‡åˆ†æ, èƒ½é‡è§£è®€">
    <!-- Schema.org çµæ§‹åŒ–è³‡æ–™ -->
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "@id": "https://hourlightkey.com/#organization",
  "name": "é¦¥éˆä¹‹é‘°åœ‹éš›æœ‰é™å…¬å¸",
  "alternateName": [
    "Hour Light International Co., Ltd.",
    "é¦¥éˆä¹‹é‘°",
    "Hour Light"
  ],
  "url": "https://hourlightkey.com",
  "logo": {
    "@type": "ImageObject",
    "url": "https://hourlightkey.com/logo.svg",
    "width": "200",
    "height": "200"
  },
  "image": "https://hourlightkey.com/og-image.jpg",
  "description": "é¦¥éˆä¹‹é‘° Hour Lightï½œæ„Ÿå®˜ç§‘å­¸ Ã— æƒ…ç·’å•†æ¥­ç³»çµ±ã€‚34å¹´ç¾æ¥­ç¶“é©—ï¼ŒçµåˆèŠ³é¦™ç™‚æ³•èˆ‡èƒ½é‡è¦ºå¯Ÿï¼Œå”åŠ©ä½ è®€æ‡‚è‡ªå·±ï¼Œæ´»å°äººç”Ÿã€‚",
  "foundingDate": "2024",
  "founder": {
    "@type": "Person",
    "@id": "https://hourlightkey.com/#founder",
    "name": "ç‹é€¸å›",
    "alternateName": "Ruby Wang"
  },
  "sameAs": [
    "https://www.youtube.com/@hourlight",
    "https://www.facebook.com/hourlight",
    "https://www.instagram.com/hourlight",
    "https://lin.ee/OQDB5t6"
  ],
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "customer service",
    "url": "https://lin.ee/OQDB5t6",
    "availableLanguage": [
      "zh-TW",
      "zh-CN"
    ]
  },
  "areaServed": {
    "@type": "Country",
    "name": "Taiwan"
  },
  "knowsAbout": [
    "èŠ³é¦™ç™‚æ³•",
    "èƒ½é‡è¦ºå¯Ÿ",
    "æƒ…ç·’ç®¡ç†",
    "ç¾å®¹ç¾æ¥­",
    "ç”Ÿå‘½éˆæ•¸",
    "å¡”ç¾…ç‰Œ"
  ]
}
    </script>
<link rel="stylesheet" href="assets/css/hl-cosmos.css">
<link rel="stylesheet" href="assets/css/hl-music.css">
<script src="assets/js/hl-analytics.js" defer></script>
<!-- MailerLite Universal -->
<script>
    (function(w,d,e,u,f,l,n){w[f]=w[f]||function(){(w[f].q=w[f].q||[])
    .push(arguments);},l=d.createElement(e),l.async=1,l.src=u,
    n=d.getElementsByTagName(e)[0],n.parentNode.insertBefore(l,n);})
    (window,document,'script','https://assets.mailerlite.com/js/universal.js','ml');
    ml('account', '2060689');
</script>
<!-- End MailerLite Universal -->
<style>
/* ========== æµ®å‹• LINE æŒ‰éˆ•ï¼ˆç»ç’ƒæ“¬æ…‹ï¼‰========== */
.hl-float-line{position:fixed;right:20px;bottom:24px;z-index:9000;display:flex;align-items:center;gap:8px;padding:14px 22px;border-radius:999px;background:rgba(5,3,10,0.7);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(233,194,125,0.3);color:var(--hl-gold,#e9c27d);text-decoration:none;font-weight:600;font-size:0.95rem;box-shadow:0 8px 32px rgba(0,0,0,0.3),inset 0 1px 0 rgba(233,194,125,0.1);transition:all .3s ease}
.hl-float-line:hover{background:linear-gradient(135deg,#06c755,#04a648);border-color:transparent;color:#fff;box-shadow:0 8px 32px rgba(0,0,0,0.3),0 0 20px rgba(6,199,85,0.4);transform:translateY(-3px)}
.hl-float-line-icon{font-size:1.2rem;transition:transform .3s ease}
.hl-float-line:hover .hl-float-line-icon{transform:scale(1.1)}
.hl-float-line-text{letter-spacing:1px}
@media(max-width:480px){.hl-float-line{right:16px;bottom:20px;padding:12px 18px;font-size:0.85rem}.hl-float-line-text{display:none}.hl-float-line-icon{font-size:1.4rem}}
</style>
<style>
/* ========== èƒŒæ™¯éŸ³æ¨‚æ§åˆ¶æŒ‰éˆ• ========== */
.hl-music-toggle{position:fixed;top:20px;right:20px;z-index:9999;width:44px;height:44px;border-radius:50%;border:1px solid rgba(233,194,125,0.4);background:rgba(5,3,10,0.8);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);color:#e9c27d;font-size:1.2rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}
.hl-music-toggle:hover{background:rgba(233,194,125,0.1);transform:scale(1.1)}
.hl-music-toggle.playing{animation:music-pulse 2s ease-in-out infinite}
@keyframes music-pulse{0%,100%{box-shadow:0 0 10px rgba(233,194,125,0.3)}50%{box-shadow:0 0 20px rgba(233,194,125,0.6)}}
</style>
</head>
<body class="day-mode">
<!-- ========== èƒŒæ™¯éŸ³æ¨‚ ========== -->
<audio id="bgMusic" loop>
  <source src="https://hourlightkey.com/432Hz.mp3" type="audio/mpeg">
</audio>
<button class="hl-music-toggle" id="musicToggle" onclick="toggleHLMusic()">ğŸ”‡</button>
<script>
function toggleHLMusic(){
  var a=document.getElementById('bgMusic'),b=document.getElementById('musicToggle');
  if(a.paused){a.volume=0.3;a.play();b.textContent='ğŸ”Š';b.classList.add('playing');}
  else{a.pause();b.textContent='ğŸ”‡';b.classList.remove('playing');}
}
</script>
<!-- ========== End èƒŒæ™¯éŸ³æ¨‚ ========== -->

<!-- æ˜Ÿç©ºèƒŒæ™¯ -->
<div class="hl-cosmos">
  <div class="hl-stars-layer hl-stars-1"></div>
  <div class="hl-stars-layer hl-stars-2"></div>
  <div class="hl-stars-layer hl-stars-3"></div>
  <div class="hl-meteors">
    <div class="hl-meteor"></div>
    <div class="hl-meteor"></div>
    <div class="hl-meteor"></div>
    <div class="hl-meteor"></div>
    <div class="hl-meteor"></div>
    <div class="hl-meteor"></div>
  </div>
  <div class="hl-aura hl-aura-1"></div>
  <div class="hl-aura hl-aura-2"></div>
  <div class="hl-aura hl-aura-3"></div>
</div>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        /* ============================================
           å®Œæ•´è³‡æ–™åº«
           ============================================ */

        const HOURS = [
            { id: 'zi', name: 'å­æ™‚ (23:00-01:00)', num: 1 },
            { id: 'chou', name: 'ä¸‘æ™‚ (01:00-03:00)', num: 2 },
            { id: 'yin', name: 'å¯…æ™‚ (03:00-05:00)', num: 3 },
            { id: 'mao', name: 'å¯æ™‚ (05:00-07:00)', num: 4 },
            { id: 'chen', name: 'è¾°æ™‚ (07:00-09:00)', num: 5 },
            { id: 'si', name: 'å·³æ™‚ (09:00-11:00)', num: 6 },
            { id: 'wu', name: 'åˆæ™‚ (11:00-13:00)', num: 7 },
            { id: 'wei', name: 'æœªæ™‚ (13:00-15:00)', num: 8 },
            { id: 'shen', name: 'ç”³æ™‚ (15:00-17:00)', num: 9 },
            { id: 'you', name: 'é…‰æ™‚ (17:00-19:00)', num: 1 },
            { id: 'xu', name: 'æˆŒæ™‚ (19:00-21:00)', num: 2 },
            { id: 'hai', name: 'äº¥æ™‚ (21:00-23:00)', num: 3 },
            { id: 'unknown', name: 'æ™‚è¾°ä¸è©³', num: 0 }
        ];
        
        // æ ¹æ“šidå–å¾—æ™‚è¾°æ•¸å­—
        const getHourNum = (hourId) => {
            const hour = HOURS.find(h => h.id === hourId);
            return hour ? hour.num : 0;
        };

        const NUMBER_DATA = {
            1: { title: 'é ˜èˆªè€…', essence: 'ç¨ç«‹ã€é–‹å‰µã€é ˜å°', light: 'ç¨ç«‹é–‹å‰µã€æ•¢åšæ±ºå®š', dark: 'å­¤ç¨æ§åˆ¶ã€ä¸é¡˜æ±‚åŠ©', work: 'é–‹å‰µè€…', workDesc: 'ã€Œè®“æˆ‘ä¾†å¸¶ã€', oils: ['é›ªæ¾', 'å²©è˜­è‰', 'é»‘èƒ¡æ¤’'] },
            2: { title: 'èª¿å’Œè€…', essence: 'åˆä½œã€æ•æ„Ÿã€é€£çµ', light: 'æ•æ„Ÿé«”è²¼ã€å–„æ–¼èª¿è§£', dark: 'è¨å¥½ã€å¤±å»è‡ªæˆ‘', work: 'å”èª¿è€…', workDesc: 'ã€Œè®“æˆ‘ä¾†é…åˆã€', oils: ['ç«ç‘°', 'èŒ‰è‰', 'å¤©ç«ºè‘µ'] },
            3: { title: 'å‰µé€ è€…', essence: 'å‰µæ„ã€è¡¨é”ã€æ¨‚è§€', light: 'å‰µæ„ç„¡é™ã€æœ‰æ„ŸæŸ“åŠ›', dark: 'è™é ­è›‡å°¾ã€é€ƒé¿æ·±å±¤', work: 'è¡¨é”è€…', workDesc: 'ã€Œè®“æˆ‘ä¾†èªªã€', oils: ['ä½›æ‰‹æŸ‘', 'ç”œæ©™', 'æª¸æª¬'] },
            4: { title: 'å»ºé€ è€…', essence: 'ç©©å®šã€å‹™å¯¦ã€å»ºè¨­', light: 'è…³è¸å¯¦åœ°ã€è€åŠ›é©šäºº', dark: 'å®³æ€•è®ŠåŒ–ã€å¤ªéåƒµåŒ–', work: 'åŸ·è¡Œè€…', workDesc: 'ã€Œè®“æˆ‘ä¾†åšã€', oils: ['å°¤åŠ åˆ©', 'çµ²æŸ', 'èŒ¶æ¨¹'] },
            5: { title: 'è®Šé©è€…', essence: 'è‡ªç”±ã€è®ŠåŒ–ã€å†’éšª', light: 'é©æ‡‰åŠ›å¼·ã€å¤šæ‰å¤šè—', dark: 'æ¼‚æ³Šä¸å®šã€ç„¡æ³•æ‰¿è«¾', work: 'å†’éšªè€…', workDesc: 'ã€Œè®“æˆ‘ä¾†è©¦ã€', oils: ['è–‘', 'ç”œæ©™', 'è–„è·'] },
            6: { title: 'ç…§é¡§è€…', essence: 'è²¬ä»»ã€æ„›ã€æœå‹™', light: 'æœ‰æ„›è² è²¬ã€å‰µé€ å’Œè«§', dark: 'éåº¦ä»˜å‡ºã€æ§åˆ¶', work: 'ç…§é¡§è€…', workDesc: 'ã€Œè®“æˆ‘ä¾†é¡§ã€', oils: ['ç«ç‘°', 'ä¾è˜­', 'å¤©ç«ºè‘µ'] },
            7: { title: 'æ¢ç´¢è€…', essence: 'å…§çœã€æ™ºæ…§ã€éˆæ€§', light: 'æ™ºæ…§æ·±åˆ»ã€ç›´è¦ºæ•éŠ³', dark: 'éåº¦æ‡·ç–‘ã€å†·æ¼ ç–é›¢', work: 'åˆ†æè€…', workDesc: 'ã€Œè®“æˆ‘ä¾†æƒ³ã€', oils: ['ä¹³é¦™', 'æª€é¦™', 'è–°è¡£è‰'] },
            8: { title: 'æŒæ¬Šè€…', essence: 'æ¬ŠåŠ›ã€è±ç››ã€å½±éŸ¿åŠ›', light: 'é ˜å°åŠ›å¼·ã€èšé›†è³‡æº', dark: 'æ§åˆ¶è²ªå©ªã€å·¥ä½œç‹‚', work: 'æŒæ§è€…', workDesc: 'ã€Œè®“æˆ‘ä¾†ç®¡ã€', oils: ['æ²’è—¥', 'æª€é¦™', 'é›ªæ¾'] },
            9: { title: 'æ™ºè€…', essence: 'æ…ˆæ‚²ã€æ™ºæ…§ã€å®Œæˆ', light: 'æ…ˆæ‚²å¤§æ„›ã€æœå‹™äººé¡', dark: 'éåº¦ç†æƒ³ã€è„«é›¢ç¾å¯¦', work: 'æœå‹™è€…', workDesc: 'ã€Œè®“æˆ‘ä¾†å¹«ã€', oils: ['ä¹³é¦™', 'èŠ±æ¢¨æœ¨', 'å»£è—¿é¦™'] }
        };

        const PALACE_DATA = {
            1: { name: 'å‹‡æ°£æ®¿', meridian: 'è†½ç¶“', theme: 'æˆ‘æ•¢ä¸æ•¢åšè‡ªå·±ï¼Ÿ', oils: ['è–‘', 'é»‘èƒ¡æ¤’', 'æœæ¾'] },
            2: { name: 'åŠ›é‡å»³', meridian: 'è‚ç¶“', theme: 'æˆ‘çš„åŠ›é‡å¡åœ¨å“ªï¼Ÿ', oils: ['ä½›æ‰‹æŸ‘', 'è–„è·', 'æ´‹ç”˜èŠ'] },
            3: { name: 'å‘Šåˆ¥è‹‘', meridian: 'è‚ºç¶“', theme: 'æˆ‘æ”¾ä¸ä¸‹ä»€éº¼ï¼Ÿ', oils: ['çµ²æŸ', 'ä¹³é¦™', 'å°¤åŠ åˆ©'] },
            4: { name: 'æ·¨åŒ–å®¤', meridian: 'å¤§è…¸ç¶“', theme: 'æˆ‘è©²ä¸Ÿæ‰ä»€éº¼ï¼Ÿ', oils: ['æª¸æª¬', 'è‘¡è„æŸš', 'èŒ¶æ¨¹'] },
            5: { name: 'æ¶ˆåŒ–é–£', meridian: 'èƒƒç¶“', theme: 'æˆ‘æ¶ˆåŒ–ä¸äº†ä»€éº¼ï¼Ÿ', oils: ['ç”œæ©™', 'è–‘', 'è±†è”»'] },
            6: { name: 'ä¿¡ä»»æ®¿', meridian: 'è„¾ç¶“', theme: 'æˆ‘æƒ³å¤ªå¤šä»€éº¼ï¼Ÿ', oils: ['æª€é¦™', 'å²©è˜­è‰', 'é¼ å°¾è‰'] },
            7: { name: 'å¿ƒé–€å®®', meridian: 'å¿ƒç¶“', theme: 'æˆ‘æ¸´æœ›ä»€éº¼æ„›ï¼Ÿ', oils: ['ç«ç‘°', 'èŒ‰è‰', 'ä¾è˜­'] },
            8: { name: 'æ˜è¾¨å»³', meridian: 'å°è…¸ç¶“', theme: 'æˆ‘åˆ†ä¸æ¸…ä»€éº¼ï¼Ÿ', oils: ['è¿·è¿­é¦™', 'ç¾…å‹’', 'è–„è·'] },
            9: { name: 'å¸è¼‰è‹‘', meridian: 'è†€èƒ±ç¶“', theme: 'æˆ‘æ‰›è‘—ä»€éº¼ï¼Ÿ', oils: ['è–°è¡£è‰', 'é¦¬é¬±è˜­', 'è‹¦æ©™è‘‰'] },
            10: { name: 'å¿—æ°£æ®¿', meridian: 'è…ç¶“', theme: 'æˆ‘å®³æ€•ä»€éº¼ï¼Ÿ', oils: ['é›ªæ¾', 'æª€é¦™', 'æ²’è—¥'] },
            11: { name: 'æ•é–‹é–£', meridian: 'å¿ƒåŒ…ç¶“', theme: 'æˆ‘åœ¨ä¿è­·ä»€éº¼ï¼Ÿ', oils: ['ç«ç‘°è‰', 'æ©™èŠ±', 'å»£è—¿é¦™'] },
            12: { name: 'å¹³è¡¡å®¤', meridian: 'ä¸‰ç„¦ç¶“', theme: 'æˆ‘å“ªè£¡ä¸å¹³è¡¡ï¼Ÿ', oils: ['å¤©ç«ºè‘µ', 'ä¹³é¦™', 'èŠ±æ¢¨æœ¨'] }
        };

        // æµå¹´ä¸»é¡Œ
        const YEAR_THEMES = {
            1: { keyword: 'æ–°é–‹å§‹', theme: 'ç¨®å­èŒèŠ½', advice: 'å•Ÿå‹•æ–°è¨ˆç•«ã€å‹‡æ•¢åšæ±ºå®š', palace: '1å®®ï¼ˆå‹‡æ°£æ®¿ï¼‰' },
            2: { keyword: 'ç­‰å¾…', theme: 'è€å¿ƒè€•è€˜', advice: 'å»ºç«‹åˆä½œã€ç­‰å¾…æ™‚æ©Ÿ', palace: '2å®®ï¼ˆåŠ›é‡å»³ï¼‰' },
            3: { keyword: 'è¡¨é”', theme: 'å‰µæ„ç¶»æ”¾', advice: 'è‡ªæˆ‘è¡¨é”ã€ç¤¾äº¤æ‹“å±•', palace: '3å®®ï¼ˆå‘Šåˆ¥è‹‘ï¼‰' },
            4: { keyword: 'å»ºè¨­', theme: 'ç©©å›ºåŸºç¤', advice: 'æ‰“åœ°åŸºã€å»ºç«‹çµæ§‹', palace: '4å®®ï¼ˆæ·¨åŒ–å®¤ï¼‰' },
            5: { keyword: 'è®ŠåŒ–', theme: 'è½‰å‹çªç ´', advice: 'æ“æŠ±æ”¹è®Šã€å‹‡æ–¼å†’éšª', palace: '5å®®ï¼ˆæ¶ˆåŒ–é–£ï¼‰' },
            6: { keyword: 'è²¬ä»»', theme: 'ç…§é¡§æ”¶æˆ', advice: 'å®¶åº­è²¬ä»»ã€æ”¶ç©«ä»˜å‡º', palace: '6å®®ï¼ˆä¿¡ä»»æ®¿ï¼‰' },
            7: { keyword: 'æ²‰æ¾±', theme: 'å…§åœ¨æ¢ç´¢', advice: 'åæ€å­¸ç¿’ã€ç¨è™•å……é›»', palace: '7å®®ï¼ˆå¿ƒé–€å®®ï¼‰' },
            8: { keyword: 'æ”¶ç©«', theme: 'è±ç››æˆå°±', advice: 'äº‹æ¥­æˆåŠŸã€è²¡å‹™è±æ”¶', palace: '8å®®ï¼ˆæ˜è¾¨å»³ï¼‰' },
            9: { keyword: 'çµæŸ', theme: 'å®Œæˆé‡‹æ”¾', advice: 'æ”¾ä¸‹èˆŠæœ‰ã€æº–å‚™æ–°å¾ªç’°', palace: '9å®®ï¼ˆå¸è¼‰è‹‘ï¼‰' }
        };

        // å¤§é‹ä¸»é¡Œ
        const FORTUNE_THEMES = {
            1: 'ç«¥å¹´å°è¨˜',
            2: 'é’æ˜¥æ¢ç´¢',
            3: 'è‡ªæˆ‘å»ºç«‹',
            4: 'æ ¹åŸºç©©å›º',
            5: 'è½‰åŒ–è›»è®Š',
            6: 'è²¬ä»»æ”¶æˆ',
            7: 'æ™ºæ…§åœ“æ»¿',
            8: 'éˆæ€§æ˜‡è¯'
        };

        // äº’è£œèˆ‡å¼µåŠ›çµ„åˆ
        const COMPLEMENTARY_PAIRS = [
            { pair: [1, 2], desc: 'é ˜å° + æ”¯æŒï¼Œä¸€å€‹é–‹è·¯ä¸€å€‹è·Ÿéš¨' },
            { pair: [3, 4], desc: 'å‰µæ„ + åŸ·è¡Œï¼Œä¸€å€‹ç™¼æƒ³ä¸€å€‹è½åœ°' },
            { pair: [5, 6], desc: 'è‡ªç”± + è²¬ä»»ï¼Œä¸€å€‹å†’éšªä¸€å€‹å®ˆè­·' },
            { pair: [7, 8], desc: 'éˆæ€§ + ç‰©è³ªï¼Œä¸€å€‹æ€è€ƒä¸€å€‹è¡Œå‹•' },
            { pair: [9, 1], desc: 'å®Œæˆ + é–‹å§‹ï¼Œä¸€å€‹æ”¶å°¾ä¸€å€‹èµ·é ­' }
        ];

        const TENSION_PAIRS = [
            { pair: [1, 1], desc: 'æ¬ŠåŠ›çˆ­å¥ª', solution: 'åˆ†å·¥æ˜ç¢ºï¼Œå„æœ‰é ˜åŸŸ' },
            { pair: [4, 5], desc: 'ç©©å®š vs è®ŠåŒ–', solution: 'æ‰¾åˆ°å½ˆæ€§çš„ç©©å®š' },
            { pair: [3, 7], desc: 'è¡¨é¢ vs æ·±åº¦', solution: 'å­¸ç¿’æ¬£è³å°æ–¹çš„æ–¹å¼' },
            { pair: [5, 6], desc: 'è²¬ä»» vs è‡ªç”±', solution: 'çµ¦å½¼æ­¤ç©ºé–“' },
            { pair: [8, 9], desc: 'ç‰©è³ª vs ç†æƒ³', solution: 'æ‰¾åˆ°å…±åŒç›®æ¨™' }
        ];

        // HRå·¥ä½œæ…‹åº¦è©•åˆ†
        const WORK_RATINGS = {
            1: { independence: 5, obedience: 2, teamwork: 2, stress: 4, stability: 3 },
            2: { independence: 2, obedience: 5, teamwork: 5, stress: 3, stability: 4 },
            3: { independence: 3, obedience: 3, teamwork: 4, stress: 3, stability: 2 },
            4: { independence: 3, obedience: 4, teamwork: 4, stress: 4, stability: 5 },
            5: { independence: 4, obedience: 2, teamwork: 3, stress: 4, stability: 2 },
            6: { independence: 3, obedience: 4, teamwork: 5, stress: 3, stability: 4 },
            7: { independence: 5, obedience: 3, teamwork: 2, stress: 4, stability: 4 },
            8: { independence: 5, obedience: 3, teamwork: 3, stress: 5, stability: 4 },
            9: { independence: 4, obedience: 3, teamwork: 4, stress: 3, stability: 4 }
        };

        /* ============================================
           è¨ˆç®—é‚è¼¯
           ============================================ */
        
        const reduceNumber = (num, keepMaster = false) => {
            if (keepMaster && (num === 11 || num === 22 || num === 33)) return num;
            while (num > 9) {
                num = String(num).split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);
                if (keepMaster && (num === 11 || num === 22 || num === 33)) return num;
            }
            return num;
        };

        const calculateHourLight = (data) => {
            const { year, month, day, lunarMonth, lunarDay, hourId } = data;
            const hourValue = getHourNum(hourId);
            
            const hNum = reduceNumber(parseInt(lunarMonth) + parseInt(lunarDay), true);
            const oNumRaw = String(year) + String(month).padStart(2, '0') + String(day).padStart(2, '0');
            const oNum = reduceNumber(oNumRaw.split('').reduce((a, b) => parseInt(a) + parseInt(b), 0), true);
            const uNum = hourValue || 0;
            const rNum = uNum ? reduceNumber(hNum + oNum + uNum, true) : reduceNumber(hNum + oNum, true);

            const lNum = parseInt(lunarMonth) > 9 ? reduceNumber(parseInt(lunarMonth)) : parseInt(lunarMonth);
            const iNum = uNum;
            const gNum = reduceNumber(String(year).split('').reduce((a, b) => parseInt(a) + parseInt(b), 0));
            const hEnergyNum = parseInt(lunarDay) > 9 ? reduceNumber(parseInt(lunarDay)) : parseInt(lunarDay);
            const tNum = reduceNumber(lNum + (iNum || 5) + gNum + hEnergyNum);

            const yearStr = String(year);
            const lastTwo = parseInt(yearStr.slice(-2));
            const p2Num = reduceNumber(Math.floor(lastTwo / 10) + (lastTwo % 10));
            const p3Num = parseInt(month) > 9 ? reduceNumber(parseInt(month)) : parseInt(month);
            const p4Num = parseInt(day) > 9 ? reduceNumber(parseInt(day)) : parseInt(day);
            const p9Num = parseInt(yearStr.charAt(yearStr.length - 3)) || 9;

            const palaces = {
                1: reduceNumber(hNum), 2: p2Num, 3: p3Num, 4: p4Num,
                5: lNum, 6: hEnergyNum, 7: reduceNumber(oNum), 8: gNum,
                9: p9Num, 10: uNum || 5, 11: tNum, 12: reduceNumber(rNum)
            };

            const numberCount = {};
            for (let i = 1; i <= 9; i++) numberCount[i] = 0;
            Object.values(palaces).forEach(num => {
                const r = num > 9 ? reduceNumber(num) : num;
                if (r >= 1 && r <= 9) numberCount[r]++;
            });

            return {
                inputData: { year, month, day, lunarMonth, lunarDay, hourId, hourValue },
                hour: { h: hNum, o: oNum, u: uNum, r: rNum },
                light: { l: lNum, i: iNum || 5, g: gNum, h: hEnergyNum, t: tNum },
                palaces,
                analysis: {
                    numberCount,
                    missingNumbers: Object.entries(numberCount).filter(([_, c]) => c === 0).map(([n]) => parseInt(n)),
                    excessNumbers: Object.entries(numberCount).filter(([_, c]) => c >= 3).map(([n]) => parseInt(n))
                }
            };
        };

        // è¨ˆç®—æµå¹´
        const calculateYearFortune = (rNum, year) => {
            const universeYear = reduceNumber(String(year).split('').reduce((a, b) => parseInt(a) + parseInt(b), 0));
            const personalYear = reduceNumber(reduceNumber(rNum) + universeYear);
            return { universeYear, personalYear, ...YEAR_THEMES[personalYear] };
        };

        // è¨ˆç®—å¤§é‹
        const calculateLifeFortunes = (rNum, birthYear) => {
            const currentYear = new Date().getFullYear();
            const age = currentYear - birthYear;
            const fortunes = [];
            
            for (let i = 1; i <= 8; i++) {
                const startAge = (i - 1) * 10 + 1;
                const endAge = i === 8 ? 'âˆ' : i * 10;
                const fortuneNum = reduceNumber(reduceNumber(rNum) + i, true);
                const isCurrent = age >= startAge && (i === 8 || age <= i * 10);
                
                fortunes.push({
                    period: i,
                    ageRange: `${startAge}-${endAge}æ­²`,
                    startYear: birthYear + startAge - 1,
                    endYear: i === 8 ? 'âˆ' : birthYear + i * 10 - 1,
                    num: fortuneNum,
                    theme: FORTUNE_THEMES[i],
                    numMeaning: NUMBER_DATA[fortuneNum > 9 ? reduceNumber(fortuneNum) : fortuneNum]?.title || '',
                    isCurrent
                });
            }
            return fortunes;
        };

        // åˆç›¤åˆ†æ
        const analyzeCompatibility = (resultA, resultB, relationType) => {
            const hourA = resultA.hour, hourB = resultB.hour;
            const palA = resultA.palaces, palB = resultB.palaces;
            
            let scores = { total: 0, details: [] };
            
            // Oæ•¸å¸å¼•åŠ› (20åˆ†)
            const oDiff = Math.abs(reduceNumber(hourA.o) - reduceNumber(hourB.o));
            const oScore = oDiff === 0 ? 20 : oDiff <= 2 ? 15 : oDiff <= 4 ? 10 : 5;
            scores.details.push({ name: 'Oæ•¸å¸å¼•åŠ›', score: oScore, max: 20, desc: oDiff === 0 ? 'å®Œç¾å…±é³´' : oDiff <= 2 ? 'è‡ªç„¶ä¾†é›»' : 'éœ€è¦æ™‚é–“' });
            
            // Hæ•¸å¥‘åˆåº¦ (20åˆ†)
            const hDiff = Math.abs(reduceNumber(hourA.h) - reduceNumber(hourB.h));
            const hScore = hDiff === 0 ? 20 : hDiff <= 2 ? 15 : hDiff <= 4 ? 10 : 5;
            scores.details.push({ name: 'Hæ•¸å¥‘åˆåº¦', score: hScore, max: 20, desc: hDiff === 0 ? 'å¿ƒæ„ç›¸é€š' : hDiff <= 2 ? 'å®¹æ˜“æ‡‚å°æ–¹' : 'éœ€è¦å¤šæºé€š' });
            
            // 7å®®æ„›çš„åŒ¹é… (20åˆ†)
            const p7Diff = Math.abs(palA[7] - palB[7]);
            const p7Score = p7Diff === 0 ? 20 : p7Diff <= 2 ? 15 : p7Diff <= 4 ? 10 : 5;
            scores.details.push({ name: '7å®®æ„›çš„èªè¨€', score: p7Score, max: 20, desc: p7Diff === 0 ? 'æ„›çš„èªè¨€ç›¸åŒ' : p7Diff <= 2 ? 'å¤§è‡´å¥‘åˆ' : 'éœ€è¦å­¸ç¿’å°æ–¹çš„æ„›' });
            
            // Ræ•¸æ–¹å‘ä¸€è‡´ (15åˆ†)
            const rDiff = Math.abs(reduceNumber(hourA.r) - reduceNumber(hourB.r));
            const rScore = rDiff === 0 ? 15 : rDiff <= 2 ? 12 : rDiff <= 4 ? 8 : 4;
            scores.details.push({ name: 'Ræ•¸äººç”Ÿæ–¹å‘', score: rScore, max: 15, desc: rDiff === 0 ? 'åŒè·¯äºº' : rDiff <= 2 ? 'æ–¹å‘æ¥è¿‘' : 'å„æœ‰è·¯ç·š' });
            
            // äº’è£œåŠ åˆ† (15åˆ†)
            let compScore = 0;
            const numA = reduceNumber(hourA.o), numB = reduceNumber(hourB.o);
            COMPLEMENTARY_PAIRS.forEach(({ pair }) => {
                if ((pair[0] === numA && pair[1] === numB) || (pair[0] === numB && pair[1] === numA)) compScore = 15;
            });
            scores.details.push({ name: 'äº’è£œåŠ åˆ†', score: compScore, max: 15, desc: compScore > 0 ? 'å¤©ç”Ÿäº’è£œçµ„åˆ' : 'éœ€è¦ä¸»å‹•é…åˆ' });
            
            // å¼µåŠ›æ‰£åˆ† (10åˆ†åŸºç¤)
            let tensionScore = 10;
            TENSION_PAIRS.forEach(({ pair }) => {
                if ((pair[0] === numA && pair[1] === numB) || (pair[0] === numB && pair[1] === numA)) tensionScore = 3;
            });
            scores.details.push({ name: 'å¼µåŠ›è™•ç†', score: tensionScore, max: 10, desc: tensionScore < 10 ? 'æœ‰å¼µåŠ›éœ€åŒ–è§£' : 'å¼µåŠ›ä¸å¤§' });
            
            scores.total = scores.details.reduce((sum, d) => sum + d.score, 0);
            
            let level, levelDesc;
            if (scores.total >= 85) { level = 'å¤©ä½œä¹‹åˆ'; levelDesc = 'å¥½å¥½çæƒœé€™ä»½ç·£åˆ†ï¼'; }
            else if (scores.total >= 70) { level = 'è‰¯å¥½é…å°'; levelDesc = 'æ­£å¸¸ç¶“ç‡Ÿå³å¯'; }
            else if (scores.total >= 55) { level = 'éœ€è¦åŠªåŠ›'; levelDesc = 'å¤šæºé€šã€å¤šç†è§£'; }
            else if (scores.total >= 40) { level = 'æŒ‘æˆ°è¼ƒå¤š'; levelDesc = 'éœ€è¦é›™æ–¹éƒ½æœ‰æ„é¡˜'; }
            else { level = 'å›°é›£é‡é‡'; levelDesc = 'å»ºè­°æ·±æ€'; }
            
            return { ...scores, level, levelDesc };
        };

        /* ============================================
           UI å…ƒä»¶
           ============================================ */

        // é›·é”åœ–
        const RadarChart = ({ data, isNight }) => {
            const chartRef = useRef(null);
            const chartInstance = useRef(null);

            useEffect(() => {
                if (!chartRef.current) return;
                if (chartInstance.current) chartInstance.current.destroy();

                const ctx = chartRef.current.getContext('2d');
                const color = isNight ? 'rgba(159, 95, 219, ' : 'rgba(212, 175, 55, ';

                chartInstance.current = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['L æ„›ä¹‹åŠ›', 'I ç›´è¦ºåŠ›', 'G æ ¹åŸºåŠ›', 'H å’Œè«§åŠ›', 'T è›»è®ŠåŠ›'],
                        datasets: [{
                            data: [data.l, data.i, data.g, data.h, data.t],
                            backgroundColor: color + '0.25)',
                            borderColor: color + '1)',
                            pointBackgroundColor: color + '1)',
                            borderWidth: 2, pointRadius: 5
                        }]
                    },
                    options: {
                        scales: { r: { suggestedMin: 0, suggestedMax: 9, ticks: { display: false } } },
                        plugins: { legend: { display: false } }
                    }
                });
            }, [data, isNight]);

            return <canvas ref={chartRef} />;
        };

        // è¼¸å…¥è¡¨å–®
        const InputForm = ({ onCalculate, title, showName = false, nameLabel = 'å§“å' }) => {
            const [formData, setFormData] = useState({
                name: '', year: '', month: '1', day: '1', lunarMonth: '', lunarDay: '', hourId: ''
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!formData.year || !formData.lunarMonth || !formData.lunarDay) {
                    alert('è«‹å¡«å¯«å®Œæ•´è³‡æ–™');
                    return;
                }
                onCalculate(formData);
            };

            return (
                <div className="card p-6 fade-in">
                    {title && <h3 className="text-xl font-bold gold-text mb-4 serif">{title}</h3>}
                    <form onSubmit={handleSubmit} className="space-y-4">
                        {showName && (
                            <input 
                                type="text" placeholder={nameLabel}
                                className="w-full p-3 border rounded-lg bg-white/80 text-gray-800"
                                value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})}
                            />
                        )}
                        <div className="grid grid-cols-3 gap-2">
                            <input type="number" placeholder="è¥¿å…ƒå¹´" className="p-3 border rounded-lg bg-white/80 text-gray-800"
                                value={formData.year} onChange={e => setFormData({...formData, year: e.target.value})} min="1900" max="2030" />
                            <select className="p-3 border rounded-lg bg-white/80 text-gray-800" value={formData.month}
                                onChange={e => setFormData({...formData, month: e.target.value})}>
                                {Array.from({length: 12}, (_, i) => <option key={i+1} value={i+1}>{i+1}æœˆ</option>)}
                            </select>
                            <select className="p-3 border rounded-lg bg-white/80 text-gray-800" value={formData.day}
                                onChange={e => setFormData({...formData, day: e.target.value})}>
                                {Array.from({length: 31}, (_, i) => <option key={i+1} value={i+1}>{i+1}æ—¥</option>)}
                            </select>
                        </div>
                        <div className="grid grid-cols-2 gap-2">
                            <select className="p-3 border rounded-lg bg-white/80 text-gray-800" value={formData.lunarMonth}
                                onChange={e => setFormData({...formData, lunarMonth: e.target.value})}>
                                <option value="">è¾²æ›†æœˆ</option>
                                {Array.from({length: 12}, (_, i) => <option key={i+1} value={i+1}>{['æ­£','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹','å','åä¸€','åäºŒ'][i]}æœˆ</option>)}
                            </select>
                            <select className="p-3 border rounded-lg bg-white/80 text-gray-800" value={formData.lunarDay}
                                onChange={e => setFormData({...formData, lunarDay: e.target.value})}>
                                <option value="">è¾²æ›†æ—¥</option>
                                {Array.from({length: 30}, (_, i) => {
                                    const d = i + 1;
                                    const label = d <= 10 ? 'åˆ' + ['ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹','å'][d-1] :
                                                  d < 20 ? 'å' + ['ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹'][d-11] :
                                                  d === 20 ? 'äºŒå' : d < 30 ? 'å»¿' + ['ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹'][d-21] : 'ä¸‰å';
                                    return <option key={d} value={d}>{label}</option>;
                                })}
                            </select>
                        </div>
                        <select className="w-full p-3 border rounded-lg bg-white/80 text-gray-800" value={formData.hourId}
                            onChange={e => setFormData({...formData, hourId: e.target.value})}>
                            <option value="">æ™‚è¾°ï¼ˆé¸å¡«ï¼‰</option>
                            {HOURS.map(h => <option key={h.id} value={h.id}>{h.name}</option>)}
                        </select>
                        <button type="submit" className="w-full gold-btn py-3 rounded-lg">é–‹å§‹è¨ˆç®—</button>
                    </form>
                </div>
            );
        };

        // å¤§é‹æ™‚é–“è»¸
        const FortuneTimeline = ({ fortunes, isNight }) => (
            <div className="relative py-8">
                <div className="timeline-line"></div>
                <div className="space-y-8">
                    {fortunes.map((f, i) => (
                        <div key={i} className={`relative flex items-center ${i % 2 === 0 ? 'flex-row' : 'flex-row-reverse'}`}>
                            <div className={`w-5/12 ${i % 2 === 0 ? 'text-right pr-8' : 'text-left pl-8'}`}>
                                <div className={`card p-4 inline-block ${f.isCurrent ? (isNight ? 'ring-2 ring-purple-500' : 'ring-2 ring-amber-500') : ''}`}>
                                    {f.isCurrent && <span className="text-xs px-2 py-1 rounded-full bg-green-500 text-white mb-2 inline-block">ç•¶å‰å¤§é‹</span>}
                                    <div className="text-sm opacity-60">ç¬¬{f.period}å¤§é‹ãƒ»{f.ageRange}</div>
                                    <div className="text-sm opacity-50">{f.startYear}-{f.endYear}å¹´</div>
                                    <div className="text-3xl font-bold gold-text my-2">{f.num}</div>
                                    <div className="font-bold">{f.theme}</div>
                                    <div className="text-sm opacity-70">{f.numMeaning}èƒ½é‡</div>
                                </div>
                            </div>
                            <div className={`w-2/12 flex justify-center`}>
                                <div className={`w-6 h-6 rounded-full border-4 ${
                                    f.isCurrent 
                                        ? (isNight ? 'bg-purple-500 border-purple-300' : 'bg-amber-500 border-amber-300') 
                                        : (isNight ? 'bg-gray-700 border-purple-900' : 'bg-white border-amber-300')
                                }`}></div>
                            </div>
                            <div className="w-5/12"></div>
                        </div>
                    ))}
                </div>
            </div>
        );

        // HRå ±å‘Š
        const HRReport = ({ result, isNight }) => {
            const oNum = reduceNumber(result.hour.o);
            const numData = NUMBER_DATA[oNum];
            const ratings = WORK_RATINGS[oNum];
            
            const ratingLabels = {
                independence: 'ç¨ç«‹æ€§', obedience: 'æœå¾æ€§', teamwork: 'åœ˜éšŠåˆä½œ', stress: 'æŠ—å£“æ€§', stability: 'ç©©å®šæ€§'
            };

            return (
                <div className="space-y-6 fade-in">
                    <div className="card p-6 text-center">
                        <div className="text-6xl font-bold gold-text">{oNum}</div>
                        <div className="text-2xl font-bold mt-2 serif">{numData.work}</div>
                        <div className="text-lg opacity-70">{numData.workDesc}</div>
                    </div>

                    <div className="card p-6">
                        <h4 className="font-bold mb-4">ğŸ“Š å·¥ä½œæ…‹åº¦äº”ç¶­è©•ä¼°</h4>
                        <div className="space-y-3">
                            {Object.entries(ratings).map(([key, value]) => (
                                <div key={key}>
                                    <div className="flex justify-between text-sm mb-1">
                                        <span>{ratingLabels[key]}</span>
                                        <span>{'â˜…'.repeat(value)}{'â˜†'.repeat(5-value)}</span>
                                    </div>
                                    <div className="score-bar bg-gray-200">
                                        <div className="score-fill" style={{
                                            width: `${value * 20}%`,
                                            background: isNight ? 'linear-gradient(90deg, #6B2C91, #9F5FDB)' : 'linear-gradient(90deg, #D4AF37, #F5E6A3)'
                                        }}></div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className={`card p-4 ${isNight ? 'bg-green-900/30' : 'bg-green-50'}`}>
                            <h4 className="font-bold text-green-600 mb-2">âœ… é©åˆçš„å·¥ä½œ</h4>
                            <ul className="text-sm space-y-1 opacity-80">
                                <li>â–º {oNum <= 3 ? 'é ˜å°ã€å‰µæ„ã€è¡¨é”å‹å·¥ä½œ' : oNum <= 6 ? 'åŸ·è¡Œã€æœå‹™ã€ç…§é¡§å‹å·¥ä½œ' : 'åˆ†æã€ç­–ç•¥ã€ç®¡ç†å‹å·¥ä½œ'}</li>
                                <li>â–º {numData.light}</li>
                            </ul>
                        </div>
                        <div className={`card p-4 ${isNight ? 'bg-red-900/30' : 'bg-red-50'}`}>
                            <h4 className="font-bold text-red-600 mb-2">âŒ ä¸é©åˆçš„å·¥ä½œ</h4>
                            <ul className="text-sm space-y-1 opacity-80">
                                <li>â–º {oNum <= 3 ? 'éœ€è¦é«˜åº¦æœå¾çš„å·¥ä½œ' : oNum <= 6 ? 'é«˜å£“è®ŠåŒ–å¿«çš„å·¥ä½œ' : 'å¤§é‡ç¤¾äº¤æ‡‰é…¬çš„å·¥ä½œ'}</li>
                                <li>â–º å®¹æ˜“è§¸ç™¼ï¼š{numData.dark}</li>
                            </ul>
                        </div>
                    </div>

                    <div className="card p-6">
                        <h4 className="font-bold mb-3">ğŸ’¡ ç®¡ç†å»ºè­°</h4>
                        <ul className="text-sm space-y-2 opacity-80">
                            <li>â–º {oNum === 1 ? 'çµ¦äºˆè‡ªä¸»æ¬Šå’Œæ±ºç­–ç©ºé–“' : oNum === 2 ? 'æä¾›æƒ…æ„Ÿæ”¯æŒå’Œåœ˜éšŠæ­¸å±¬æ„Ÿ' : oNum === 3 ? 'é¼“å‹µå‰µæ„è¡¨é”ï¼Œå®šæœŸçµ¦äºˆè®šç¾' : oNum === 4 ? 'å»ºç«‹æ˜ç¢ºçš„æµç¨‹å’Œçµæ§‹' : oNum === 5 ? 'çµ¦äºˆå½ˆæ€§å’Œæ–°æŒ‘æˆ°' : oNum === 6 ? 'è®“ä»–æ„Ÿè¦ºè¢«éœ€è¦å’Œè¢«é‡è¦–' : oNum === 7 ? 'çµ¦äºˆç¨è™•ç©ºé–“ï¼Œä¸è¦å¾®ç®¡ç†' : oNum === 8 ? 'æ˜ç¢ºçš„KPIå’Œå‡é·è·¯å¾‘' : 'é€£çµå·¥ä½œèˆ‡æ›´å¤§çš„æ„ç¾©'}</li>
                            <li>â–º æ ¸å¿ƒéœ€æ±‚ï¼š{NUMBER_DATA[reduceNumber(result.hour.h)]?.essence}</li>
                        </ul>
                    </div>

                    <div className="card p-6">
                        <h4 className="font-bold mb-3">âš ï¸ é¢¨éšªé è­¦</h4>
                        <p className="text-sm opacity-80">{numData.dark}</p>
                        <p className="text-sm mt-2 opacity-60">å»ºè­°æ­é…ï¼š{oNum <= 3 ? '2ã€4ã€6è™Ÿ' : oNum <= 6 ? '1ã€3ã€7è™Ÿ' : '2ã€3ã€6è™Ÿ'}å‹å“¡å·¥äº’è£œ</p>
                    </div>
                </div>
            );
        };

        // åˆç›¤çµæœ
        const CompatibilityResult = ({ resultA, resultB, analysis, isNight }) => (
            <div className="space-y-6 fade-in">
                <div className="grid grid-cols-2 gap-4">
                    {[{ label: 'Aæ–¹', r: resultA }, { label: 'Bæ–¹', r: resultB }].map(({ label, r }) => (
                        <div key={label} className="card p-4 text-center">
                            <div className="text-sm opacity-60">{label}</div>
                            <div className="text-2xl font-bold gold-text">H{r.hour.h} O{r.hour.o} R{r.hour.r}</div>
                        </div>
                    ))}
                </div>

                <div className={`card p-6 text-center ${
                    analysis.total >= 70 ? (isNight ? 'bg-green-900/30' : 'bg-green-50') : 
                    analysis.total >= 50 ? (isNight ? 'bg-yellow-900/30' : 'bg-yellow-50') : 
                    (isNight ? 'bg-red-900/30' : 'bg-red-50')
                }`}>
                    <div className="text-5xl font-bold gold-text">{analysis.total}</div>
                    <div className="text-sm opacity-60">/ 100 åˆ†</div>
                    <div className="text-2xl font-bold mt-2 serif">{analysis.level}</div>
                    <div className="text-sm opacity-70">{analysis.levelDesc}</div>
                </div>

                <div className="card p-6">
                    <h4 className="font-bold mb-4">ğŸ“Š è©³ç´°è©•åˆ†</h4>
                    <div className="space-y-3">
                        {analysis.details.map((d, i) => (
                            <div key={i}>
                                <div className="flex justify-between text-sm mb-1">
                                    <span>{d.name}</span>
                                    <span className="opacity-60">{d.score}/{d.max}</span>
                                </div>
                                <div className="score-bar bg-gray-200">
                                    <div className="score-fill" style={{
                                        width: `${(d.score / d.max) * 100}%`,
                                        background: d.score / d.max >= 0.7 ? 'linear-gradient(90deg, #22C55E, #4ADE80)' :
                                                    d.score / d.max >= 0.5 ? 'linear-gradient(90deg, #EAB308, #FDE047)' :
                                                    'linear-gradient(90deg, #EF4444, #F87171)'
                                    }}></div>
                                </div>
                                <div className="text-xs opacity-50 mt-1">{d.desc}</div>
                            </div>
                        ))}
                    </div>
                </div>

                <div className="card p-6">
                    <h4 className="font-bold mb-3">ğŸ’¡ ç›¸è™•å»ºè­°</h4>
                    <div className="text-sm space-y-2 opacity-80">
                        <p>â–º Aæ–¹ï¼ˆOæ•¸{reduceNumber(resultA.hour.o)}ï¼‰çš„æºé€šé¢¨æ ¼ï¼š{NUMBER_DATA[reduceNumber(resultA.hour.o)]?.essence}</p>
                        <p>â–º Bæ–¹ï¼ˆOæ•¸{reduceNumber(resultB.hour.o)}ï¼‰çš„æºé€šé¢¨æ ¼ï¼š{NUMBER_DATA[reduceNumber(resultB.hour.o)]?.essence}</p>
                        <p className="mt-3 italic opacity-70">ğŸ’• æ„›çš„ç§˜è¨£ï¼šç†è§£å°æ–¹7å®®çš„æ„›çš„èªè¨€ï¼ŒAæ–¹æ¸´æœ›{PALACE_DATA[7].theme.replace('æˆ‘æ¸´æœ›', '')}ï¼ŒBæ–¹ä¹Ÿæ¸´æœ›{PALACE_DATA[7].theme.replace('æˆ‘æ¸´æœ›', '')}</p>
                    </div>
                </div>
            </div>
        );

        /* ============================================
           ä¸»è¦åŠŸèƒ½é é¢
           ============================================ */

        // åŸºç¤å‘½ç›¤é 
        const BasicPage = ({ result, setResult, isNight }) => {
            if (!result) {
                return (
                    <div className="max-w-xl mx-auto">
                        <div className="text-center mb-8">
                            <h2 className="text-3xl font-bold gold-text serif">é–‹å•Ÿä½ çš„å…§åœ¨åŸå ¡</h2>
                            <p className="text-sm mt-2 opacity-60">è¼¸å…¥å‡ºç”Ÿè³‡æ–™ï¼Œæ‰¾åˆ°ä½ çš„ç”Ÿå‘½å¯†ç¢¼</p>
                        </div>
                        <InputForm onCalculate={(data) => setResult(calculateHourLight(data))} />
                    </div>
                );
            }

            const { hour, light, palaces, analysis } = result;

            return (
                <div className="space-y-8 fade-in">
                    {/* H.O.U.R. */}
                    <section>
                        <h3 className="text-2xl font-bold gold-text mb-4 pl-4 border-l-4 border-current serif">ğŸ”‘ H.O.U.R. å››ä¸»æ•¸</h3>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                            {[
                                { k: 'h', l: 'H ç™’æ•¸', s: 'å…§åœ¨éœ€æ±‚' },
                                { k: 'o', l: 'O è­˜æ•¸', s: 'å¤–åœ¨å‘ˆç¾' },
                                { k: 'u', l: 'U è§£æ•¸', s: 'éš±è—æ½›èƒ½' },
                                { k: 'r', l: 'R è¡Œæ•¸', s: 'äººç”Ÿä½¿å‘½' }
                            ].map(item => (
                                <div key={item.k} className={`card p-5 text-center ${item.k === 'r' ? (isNight ? 'ring-2 ring-purple-500' : 'ring-2 ring-amber-400') : ''}`}>
                                    <div className="text-xs opacity-60">{item.l}</div>
                                    <div className="text-5xl font-bold gold-text my-2">{hour[item.k] || 'â€”'}</div>
                                    <div className="text-xs opacity-50">{item.s}</div>
                                </div>
                            ))}
                        </div>
                    </section>

                    {/* L.I.G.H.T. */}
                    <section className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <h3 className="text-2xl font-bold gold-text mb-4 pl-4 border-l-4 border-current serif">âœ¨ L.I.G.H.T. äº”èƒ½é‡</h3>
                            <div className="card p-6">
                                <div className="aspect-square max-w-xs mx-auto">
                                    <RadarChart data={light} isNight={isNight} />
                                </div>
                            </div>
                        </div>
                        <div className="space-y-2">
                            {[
                                { k: 'l', n: 'L æ„›ä¹‹åŠ›' }, { k: 'i', n: 'I ç›´è¦ºåŠ›' }, { k: 'g', n: 'G æ ¹åŸºåŠ›' },
                                { k: 'h', n: 'H å’Œè«§åŠ›' }, { k: 't', n: 'T è›»è®ŠåŠ›' }
                            ].map(item => {
                                const v = light[item.k];
                                const level = v <= 3 ? 'weak' : v <= 6 ? 'medium' : 'strong';
                                return (
                                    <div key={item.k} className={`card p-3 ${level === 'weak' ? 'bg-red-50' : level === 'medium' ? 'bg-yellow-50' : 'bg-green-50'}`}>
                                        <div className="flex justify-between items-center">
                                            <span className="font-bold">{item.n}</span>
                                            <div className="flex items-center gap-2">
                                                <span className="text-2xl font-bold gold-text">{v}</span>
                                                <span className={`text-xs px-2 py-1 rounded ${level === 'weak' ? 'bg-red-200 text-red-700' : level === 'medium' ? 'bg-yellow-200 text-yellow-700' : 'bg-green-200 text-green-700'}`}>
                                                    {level === 'weak' ? 'éœ€åŸ¹é¤Š' : level === 'medium' ? 'ä¸­ç­‰' : 'å¤©è³¦'}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </section>

                    {/* ç©ºç¼ºæ•¸åˆ†æ */}
                    {analysis.missingNumbers.length > 0 && (
                        <section className={`card p-6 ${isNight ? 'bg-red-900/20' : 'bg-red-50'}`}>
                            <h4 className="font-bold text-red-600 mb-3">âš ï¸ ç©ºç¼ºæ•¸å­— â€” éœ€è¦å­¸ç¿’çš„èª²é¡Œ</h4>
                            <div className="flex flex-wrap gap-3">
                                {analysis.missingNumbers.map(n => (
                                    <div key={n} className="flex items-center gap-2">
                                        <span className="text-2xl font-bold text-red-500">{n}</span>
                                        <span className="text-sm">{NUMBER_DATA[n]?.title}</span>
                                    </div>
                                ))}
                            </div>
                        </section>
                    )}

                    {/* 12å®®ä½ */}
                    <section>
                        <h3 className="text-2xl font-bold gold-text mb-4 pl-4 border-l-4 border-current serif">ğŸ° 12å®®ä½ãƒ»å…§åœ¨åŸå ¡</h3>
                        <div className="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3">
                            {Object.entries(PALACE_DATA).map(([id, data]) => (
                                <div key={id} className="card p-3 text-center hover:scale-105 transition cursor-pointer">
                                    <div className="text-xs opacity-50">{id}å®®ãƒ»{data.meridian}</div>
                                    <div className="text-3xl font-bold gold-text my-1">{palaces[id]}</div>
                                    <div className="text-xs font-bold truncate">{data.name}</div>
                                </div>
                            ))}
                        </div>
                    </section>
                </div>
            );
        };

        // æµå¹´é 
        const YearFortunePage = ({ result, isNight }) => {
            const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());
            const currentYear = new Date().getFullYear();
            
            if (!result) return <div className="text-center py-20 opacity-60">è«‹å…ˆåœ¨ã€ŒåŸºç¤å‘½ç›¤ã€è¨ˆç®—ä½ çš„æ•¸æ“š</div>;

            const fortune = calculateYearFortune(result.hour.r, selectedYear);

            return (
                <div className="max-w-2xl mx-auto space-y-6 fade-in">
                    <div className="card p-6">
                        <h3 className="text-xl font-bold gold-text mb-4 serif">ğŸ—“ï¸ é¸æ“‡å¹´ä»½</h3>
                        <div className="flex gap-2 flex-wrap">
                            {[currentYear - 1, currentYear, currentYear + 1, currentYear + 2].map(y => (
                                <button key={y} onClick={() => setSelectedYear(y)}
                                    className={`px-4 py-2 rounded-lg transition ${selectedYear === y ? 'gold-btn' : 'bg-gray-100 hover:bg-gray-200 text-gray-700'}`}>
                                    {y}å¹´
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className={`card p-8 text-center ${isNight ? 'bg-gradient-to-br from-purple-900/50 to-pink-900/30' : 'bg-gradient-to-br from-amber-50 to-orange-50'}`}>
                        <div className="text-sm opacity-60">{selectedYear}å¹´ æµå¹´æ•¸</div>
                        <div className="text-7xl font-bold gold-text my-4">{fortune.personalYear}</div>
                        <div className="text-3xl font-bold serif">{fortune.keyword}å¹´</div>
                        <div className="text-lg mt-2 opacity-80">{fortune.theme}</div>
                    </div>

                    <div className="card p-6">
                        <h4 className="font-bold mb-3">ğŸ“ å¹´åº¦èšç„¦å®®ä½</h4>
                        <p className="text-lg gold-text font-bold">{fortune.palace}</p>
                        <p className="text-sm opacity-70 mt-2">é€™ä¸€å¹´ï¼Œ{PALACE_DATA[fortune.personalYear]?.theme || 'æ•´é«”å¹³è¡¡'} çš„è­°é¡Œæœƒç‰¹åˆ¥æ˜é¡¯</p>
                    </div>

                    <div className="card p-6">
                        <h4 className="font-bold mb-3">ğŸ’¡ å¹´åº¦å»ºè­°</h4>
                        <p className="text-lg">{fortune.advice}</p>
                        <div className="mt-4 p-4 rounded-lg bg-gray-100 dark:bg-gray-800">
                            <p className="text-sm opacity-70">
                                ğŸŒ¿ è¦ºå¯Ÿç²¾æ²¹ï¼š{PALACE_DATA[fortune.personalYear]?.oils?.join('ã€') || NUMBER_DATA[fortune.personalYear]?.oils?.join('ã€')}
                            </p>
                        </div>
                    </div>

                    <div className="card p-6">
                        <h4 className="font-bold mb-3">ğŸ“Š è¨ˆç®—éç¨‹</h4>
                        <div className="text-sm opacity-70 space-y-1">
                            <p>â–º ä½ çš„Ræ•¸ï¼ˆä½¿å‘½æ•¸ï¼‰= {result.hour.r}</p>
                            <p>â–º {selectedYear}å¹´å®‡å®™å¹´æ•¸ = {String(selectedYear).split('').join('+')} = {fortune.universeYear}</p>
                            <p>â–º å€‹äººæµå¹´ = Ræ•¸ + å®‡å®™å¹´æ•¸ = {reduceNumber(result.hour.r)} + {fortune.universeYear} = {fortune.personalYear}</p>
                        </div>
                    </div>
                </div>
            );
        };

        // å¤§é‹é 
        const LifeFortunePage = ({ result, isNight }) => {
            if (!result) return <div className="text-center py-20 opacity-60">è«‹å…ˆåœ¨ã€ŒåŸºç¤å‘½ç›¤ã€è¨ˆç®—ä½ çš„æ•¸æ“š</div>;

            const fortunes = calculateLifeFortunes(result.hour.r, parseInt(result.inputData.year));

            return (
                <div className="max-w-3xl mx-auto fade-in">
                    <div className="text-center mb-8">
                        <h2 className="text-3xl font-bold gold-text serif">â³ äººç”Ÿå¤§é‹æ™‚é–“è»¸</h2>
                        <p className="text-sm mt-2 opacity-60">æ¯10å¹´ä¸€å€‹å¤§é‹é€±æœŸï¼Œçœ‹è¦‹äººç”Ÿçš„ç¯€å¥</p>
                    </div>
                    <FortuneTimeline fortunes={fortunes} isNight={isNight} />
                    
                    <div className="card p-6 mt-8">
                        <h4 className="font-bold mb-3">ğŸ“Š è¨ˆç®—èªªæ˜</h4>
                        <p className="text-sm opacity-70">
                            å¤§é‹å…¬å¼ï¼šRæ•¸ï¼ˆ{result.hour.r}ï¼‰+ ç¬¬Nå¤§é‹ = è©²å¤§é‹ä¸»æ•¸
                        </p>
                        <p className="text-sm opacity-70 mt-2">
                            ä½ çš„Ræ•¸æ˜¯ {result.hour.r}ï¼Œæ‰€ä»¥æ¯å€‹å¤§é‹çš„èƒ½é‡æœƒä»¥æ­¤ç‚ºåŸºç¤å±•é–‹ã€‚
                        </p>
                    </div>
                </div>
            );
        };

        // åˆç›¤é 
        const CompatibilityPage = ({ result, isNight }) => {
            const [resultA, setResultA] = useState(result);
            const [resultB, setResultB] = useState(null);
            const [analysis, setAnalysis] = useState(null);

            useEffect(() => {
                if (result && !resultA) setResultA(result);
            }, [result]);

            const handleCalculateB = (data) => {
                const rb = calculateHourLight(data);
                setResultB(rb);
                if (resultA) {
                    setAnalysis(analyzeCompatibility(resultA, rb, 'partner'));
                }
            };

            return (
                <div className="max-w-4xl mx-auto space-y-6 fade-in">
                    <div className="text-center mb-6">
                        <h2 className="text-3xl font-bold gold-text serif">ğŸ’• é—œä¿‚åˆç›¤åˆ†æ</h2>
                        <p className="text-sm mt-2 opacity-60">äº†è§£å…©äººçš„èƒ½é‡äº’å‹•èˆ‡å¥‘åˆåº¦</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div className="text-center mb-2 font-bold gold-text">Aæ–¹{resultA ? ' âœ“' : ''}</div>
                            {resultA ? (
                                <div className="card p-4 text-center">
                                    <div className="text-sm opacity-60">å·²ä½¿ç”¨ä½ çš„å‘½ç›¤</div>
                                    <div className="text-2xl font-bold gold-text mt-2">H{resultA.hour.h} O{resultA.hour.o} R{resultA.hour.r}</div>
                                    <button onClick={() => setResultA(null)} className="text-xs mt-2 opacity-50 hover:opacity-100">é‡æ–°è¼¸å…¥</button>
                                </div>
                            ) : (
                                <InputForm title="Aæ–¹è³‡æ–™" onCalculate={(data) => {
                                    const ra = calculateHourLight(data);
                                    setResultA(ra);
                                    if (resultB) setAnalysis(analyzeCompatibility(ra, resultB, 'partner'));
                                }} />
                            )}
                        </div>
                        <div>
                            <div className="text-center mb-2 font-bold gold-text">Bæ–¹{resultB ? ' âœ“' : ''}</div>
                            {resultB ? (
                                <div className="card p-4 text-center">
                                    <div className="text-2xl font-bold gold-text">H{resultB.hour.h} O{resultB.hour.o} R{resultB.hour.r}</div>
                                    <button onClick={() => { setResultB(null); setAnalysis(null); }} className="text-xs mt-2 opacity-50 hover:opacity-100">é‡æ–°è¼¸å…¥</button>
                                </div>
                            ) : (
                                <InputForm title="Bæ–¹è³‡æ–™" onCalculate={handleCalculateB} />
                            )}
                        </div>
                    </div>

                    {analysis && <CompatibilityResult resultA={resultA} resultB={resultB} analysis={analysis} isNight={isNight} />}
                </div>
            );
        };

        // HRè­˜äººé 
        const HRPage = ({ result, isNight }) => {
            const [hrResult, setHrResult] = useState(null);

            return (
                <div className="max-w-2xl mx-auto fade-in">
                    <div className="text-center mb-6">
                        <h2 className="text-3xl font-bold gold-text serif">ğŸ’¼ HRå¿«é€Ÿè­˜äººå ±å‘Š</h2>
                        <p className="text-sm mt-2 opacity-60">ä¸€é å¼äººæ‰è©•ä¼°ï¼Œå¿«é€Ÿäº†è§£å·¥ä½œé¢¨æ ¼</p>
                    </div>

                    {!hrResult ? (
                        <div className="space-y-4">
                            {result && (
                                <button onClick={() => setHrResult(result)} className="w-full gold-btn py-4 rounded-lg text-lg">
                                    ä½¿ç”¨æˆ‘çš„å‘½ç›¤ç”Ÿæˆå ±å‘Š
                                </button>
                            )}
                            <div className="text-center text-sm opacity-50">æˆ–</div>
                            <InputForm title="è¼¸å…¥å“¡å·¥/æ‡‰å¾µè€…è³‡æ–™" showName={true} nameLabel="å§“åï¼ˆé¸å¡«ï¼‰"
                                onCalculate={(data) => setHrResult(calculateHourLight(data))} />
                        </div>
                    ) : (
                        <div>
                            <button onClick={() => setHrResult(null)} className="text-sm opacity-60 hover:opacity-100 mb-4">â† é‡æ–°è¼¸å…¥</button>
                            <HRReport result={hrResult} isNight={isNight} />
                        </div>
                    )}
                </div>
            );
        };

        /* ============================================
           ä¸»æ‡‰ç”¨
           ============================================ */

        const App = () => {
            const [result, setResult] = useState(null);
            const [isNight, setIsNight] = useState(false);
            const [activeTab, setActiveTab] = useState('basic');

            useEffect(() => {
                document.body.className = isNight ? 'night-mode' : 'day-mode';
            }, [isNight]);

            const tabs = [
                { id: 'basic', label: 'ğŸ”‘ åŸºç¤å‘½ç›¤', icon: 'ğŸ”‘' },
                { id: 'year', label: 'ğŸ—“ï¸ æµå¹´é‹å‹¢', icon: 'ğŸ—“ï¸' },
                { id: 'fortune', label: 'â³ å¤§é‹æ™‚é–“è»¸', icon: 'â³' },
                { id: 'compat', label: 'ğŸ’• é—œä¿‚åˆç›¤', icon: 'ğŸ’•' },
                { id: 'hr', label: 'ğŸ’¼ HRè­˜äºº', icon: 'ğŸ’¼' }
            ];

            return (
                <div className="min-h-screen">
                    <header className={`backdrop-blur-md shadow-sm sticky top-0 z-50 ${isNight ? 'bg-gray-900/90' : 'bg-white/90'}`}>
                        <div className="container mx-auto px-4 py-3">
                            <div className="flex justify-between items-center mb-3">
                                <div>
                                    <h1 className="text-2xl font-bold gold-text tracking-widest serif">é¦¥éˆä¹‹é‘°</h1>
                                    <p className="text-[10px] opacity-50">Hour Light v6.0 è¶…å®Œæ•´ç‰ˆ</p>
                                </div>
                                <div className="flex items-center gap-2">
                                    {result && (
                                        <button onClick={() => setResult(null)} className="text-xs opacity-60 hover:opacity-100 px-3 py-1">é‡æ–°è¨ˆç®—</button>
                                    )}
                                    <button onClick={() => setIsNight(!isNight)} className="gold-btn px-3 py-1 rounded-full text-xs">
                                        {isNight ? 'ğŸŒ™' : 'â˜€ï¸'}
                                    </button>
                                </div>
                            </div>
                            <div className="flex gap-1 overflow-x-auto pb-1">
                                {tabs.map(tab => (
                                    <button key={tab.id} onClick={() => setActiveTab(tab.id)}
                                        className={`tab-btn px-3 py-2 text-sm whitespace-nowrap ${activeTab === tab.id ? 'active font-bold' : 'opacity-60'}`}>
                                        <span className="hidden md:inline">{tab.label}</span>
                                        <span className="md:hidden">{tab.icon}</span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </header>

                    <main className="container mx-auto px-4 py-8">
                        {activeTab === 'basic' && <BasicPage result={result} setResult={setResult} isNight={isNight} />}
                        {activeTab === 'year' && <YearFortunePage result={result} isNight={isNight} />}
                        {activeTab === 'fortune' && <LifeFortunePage result={result} isNight={isNight} />}
                        {activeTab === 'compat' && <CompatibilityPage result={result} isNight={isNight} />}
                        {activeTab === 'hr' && <HRPage result={result} isNight={isNight} />}
                    </main>

                    </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>


<!-- ========== é¦¥éˆä¹‹é‘°å®Œæ•´ç‰ˆæ¬Šè²æ˜ Footer ========== -->

<!-- ===== Email è¨‚é–±å€å¡Š ===== -->
<link rel="stylesheet" href="assets/css/hl-subscribe.css">
<section class="hl-subscribe-section">
  <div class="hl-subscribe-inner">
    <div class="hl-subscribe-icon">âœ¨</div>
    <h2 class="hl-subscribe-title">å…è²»é ˜å–ï½œæ¯é€±èƒ½é‡é€±å ±</h2>
    <p class="hl-subscribe-subtitle">
      æ¯é€±ä¸€å°ï¼Œé™ªä½ è¦ºå¯Ÿã€æ¢ç´¢ã€æ´»å‡ºè‡ªå·±ã€‚<br>
      ä¸æ¨éŠ·ã€ä¸æ´—è…¦ï¼Œåªçµ¦ä½ å‰›å‰›å¥½çš„é™ªä¼´ã€‚
    </p>
    <div class="hl-subscribe-benefits">
      <span class="hl-subscribe-benefit">æ¯é€±èƒ½é‡æé†’</span>
      <span class="hl-subscribe-benefit">å°ˆå±¬è¦ºå¯Ÿå»ºè­°</span>
      <span class="hl-subscribe-benefit">æ–°æ›¸/èª²ç¨‹å„ªå…ˆé€šçŸ¥</span>
    </div>
    <div class="hl-subscribe-form">
      <div class="ml-embedded" data-form="z9Z2mu"></div>
    </div>
    <p class="hl-subscribe-privacy">
      æ”¾å¿ƒï¼Œæˆ‘å€‘å¾ˆè¨å­åƒåœ¾ä¿¡ã€‚éš¨æ™‚å¯ä»¥å–æ¶ˆè¨‚é–±ã€‚<br>
      <a href="privacy.html">éš±ç§æ”¿ç­–</a>
    </p>
  </div>
</section>
<!-- ===== End Email è¨‚é–±å€å¡Š ===== -->

<footer class="hl-footer">
  <div class="hl-footer-inner">
    
    <!-- å“ç‰Œè³‡è¨Š -->
    <div class="hl-footer-brand">é¦¥éˆä¹‹é‘° Hour Light</div>
    <div class="hl-footer-founder">
      å‰µè¾¦äººï¼šç‹é€¸å›ï½œèŠ³é¦™èƒ½é‡è¦ºå¯Ÿå¸«ï½œå¥åº·ç”¢æ¥­ç®¡ç†ç¢©å£«ï½œç¾æ¥­ 34 å¹´è³‡æ·±è¬›å¸«
    </div>
    
    <!-- å¿«é€Ÿé€£çµ -->
    <div class="hl-footer-links">
      <a href="index.html">é¦–é </a>
      <a href="hourlight-sitemap.html">ğŸ—ºï¸ ç¶²ç«™åœ°åœ–</a>
      <a href="privacy.html">éš±ç§æ¬Šæ”¿ç­–</a>
      <a href="terms.html">æœå‹™æ¢æ¬¾</a>
      <a href="https://lin.ee/OQDB5t6" target="_blank" rel="noopener">LINE è«®è©¢</a>
    </div>
    
    <!-- é‡è¦å…è²¬è²æ˜ -->
    <div class="hl-footer-disclaimer">
      <div class="hl-footer-disclaimer-title">
        âš ï¸ é‡è¦è²æ˜ï½œImportant Notice
      </div>
      <div class="hl-footer-disclaimer-content">
        <p>
          æœ¬ç¶²ç«™æä¾›ä¹‹æ‰€æœ‰æœå‹™èˆ‡å…§å®¹ï¼ˆåŒ…æ‹¬ä½†ä¸é™æ–¼ï¼šèŠ³é¦™èƒ½é‡è¦ºå¯Ÿã€ç‰Œå¡è§£è®€ã€ç”Ÿå‘½æ•¸å­—åˆ†æã€æƒ…ç·’è¦ºå¯Ÿã€èƒ½é‡è«®è©¢ç­‰ï¼‰
          åƒ…ä¾›<strong style="color:var(--hl-gold);">å€‹äººå£“åŠ›ç®¡ç†ã€æƒ…ç·’ç´“è§£ã€è‡ªæˆ‘æ¢ç´¢åŠæ—¥å¸¸ç”Ÿæ´»æŒ‡å¼•åƒè€ƒ</strong>ä¹‹ç”¨é€”ã€‚
        </p>
        <p>
          <strong style="color:var(--hl-gold);">æœ¬æœå‹™ä¸æ§‹æˆäº¦ä¸å–ä»£ä»¥ä¸‹ä»»ä½•å½¢å¼ä¹‹å°ˆæ¥­æœå‹™ï¼š</strong><br>
          â–¸ é†«ç™‚è¨ºæ–·ã€é†«ç™‚è«®è©¢æˆ–ä»»ä½•é†«ç™‚è¡Œç‚º<br>
          â–¸ å¿ƒç†è«®å•†ã€å¿ƒç†æ²»ç™‚æˆ–ç²¾ç¥ç§‘è¨ºç™‚<br>
          â–¸ æ³•å¾‹è«®è©¢ã€è²¡å‹™è¦åŠƒæˆ–æŠ•è³‡å»ºè­°
        </p>
        <p>
          å¦‚æœ‰èº«å¿ƒå¥åº·ç›¸é—œç–‘æ…®ï¼Œè«‹è«®è©¢åˆæ ¼ä¹‹é†«ç™‚å°ˆæ¥­äººå“¡ã€‚æœ¬å…¬å¸åŠå‰µè¾¦äººå°æ–¼ä½¿ç”¨è€…è‡ªè¡Œè©®é‡‹æˆ–æ‡‰ç”¨æœ¬ç¶²ç«™å…§å®¹æ‰€ç”¢ç”Ÿä¹‹ä»»ä½•çµæœï¼Œä¸è² ä»»ä½•è²¬ä»»ã€‚
        </p>
      </div>
    </div>
    
    <!-- æ³•å¾‹è²æ˜å€å¡Š -->
    <div class="hl-footer-legal">
      <div class="hl-footer-legal-grid">
        
        <!-- æ™ºæ…§è²¡ç”¢æ¬Šè²æ˜ -->
        <div class="hl-footer-legal-item">
          <strong>ğŸ“œ æ™ºæ…§è²¡ç”¢æ¬Šè²æ˜</strong>
          æœ¬ç¶²ç«™æ‰€æœ‰å…§å®¹ï¼ˆåŒ…æ‹¬ä½†ä¸é™æ–¼ï¼šæ–‡å­—ã€åœ–ç‰‡ã€éŸ³è¨Šã€å½±ç‰‡ã€ç¨‹å¼ç¢¼ã€è¨­è¨ˆã€æ–¹æ³•è«–ã€èª²ç¨‹æ¶æ§‹ã€ç‰Œå¡ç³»çµ±ã€H.O.U.R. æ–¹æ³•è«–ï¼‰å‡å—ä¸­è¯æ°‘åœ‹è‘—ä½œæ¬Šæ³•åŠåœ‹éš›è‘—ä½œæ¬Šå…¬ç´„ä¿è­·ã€‚æœªç¶“é¦¥éˆä¹‹é‘°åœ‹éš›æœ‰é™å…¬å¸æ›¸é¢æˆæ¬Šï¼Œç¦æ­¢ä»»ä½•å½¢å¼ä¹‹è¤‡è£½ã€è½‰è¼‰ã€æ”¹ä½œã€æ•£å¸ƒæˆ–å•†æ¥­ä½¿ç”¨ã€‚
        </div>
        
        <!-- å•†æ¨™è²æ˜ -->
        <div class="hl-footer-legal-item">
          <strong>â„¢ å•†æ¨™è²æ˜ï¼ˆç”³è«‹ä¸­ï¼‰</strong>
          ã€Œé¦¥éˆä¹‹é‘°ã€ã€ŒHour Lightã€ã€ŒH.O.U.R.ã€ã€Œé¦¥éˆç§˜ç¢¼ã€åŠç›¸é—œæ¨™èªŒç‚ºé¦¥éˆä¹‹é‘°åœ‹éš›æœ‰é™å…¬å¸ä¹‹å•†æ¨™ï¼ˆç”³è«‹ä¸­ï¼‰ã€‚æœªç¶“æˆæ¬Šï¼Œä¸å¾—ä»¥ä»»ä½•å½¢å¼ä½¿ç”¨ã€æ¨¡ä»¿æˆ–è¨»å†Šè¿‘ä¼¼å•†æ¨™ã€‚
        </div>
        
        <!-- æœå‹™æ€§è³ªèªªæ˜ -->
        <div class="hl-footer-legal-item">
          <strong>ğŸŒ¿ æœå‹™æ€§è³ªèªªæ˜</strong>
          æœ¬å…¬å¸æœå‹™æ€§è³ªå±¬æ–¼ï¼šèŠ³é¦™ç™‚æ³•ç”Ÿæ´»æ‡‰ç”¨ï¼ˆéé†«ç™‚è¡Œç‚ºï¼‰ã€æƒ…ç·’å£“åŠ›ç®¡ç†æŒ‡å°ã€å€‹äººæˆé•·æ¢ç´¢è«®è©¢ã€ç¾å®¹ç¾æ¥­æ•™è‚²åŸ¹è¨“ã€‚æ‰€æœ‰æœå‹™çš†ä»¥ä¿ƒé€²èº«å¿ƒå¹³è¡¡èˆ‡ç”Ÿæ´»å“è³ªç‚ºç›®æ¨™ã€‚
        </div>
        
      </div>
      
      <!-- ç‰ˆæ¬Šè²æ˜ -->
      <div class="hl-footer-copyright">
        <span class="hl-footer-copyright-brand">Â© 2026 é¦¥éˆä¹‹é‘°åœ‹éš›æœ‰é™å…¬å¸</span><br>
        Hour Light International Co., Ltd. All Rights Reserved.
        <div class="hl-footer-trademark">
          é¦¥éˆä¹‹é‘°â„¢ã€Hour Lightâ„¢ã€H.O.U.R.â„¢ã€é¦¥éˆç§˜ç¢¼â„¢ ç‚ºæœ¬å…¬å¸å•†æ¨™ï¼ˆç”³è«‹ä¸­ï¼‰
        </div>
      </div>
      
    </div>
  </div>
</footer>
<!-- ========== Footer End ========== -->


<script src="assets/js/hourlight-global.js"></script>
<script src="assets/js/hl-music.js"></script>
<!-- ========== æµ®å‹• LINE æŒ‰éˆ•ï¼ˆç»ç’ƒæ“¬æ…‹ï¼‰========== -->
<a href="https://lin.ee/OQDB5t6" target="_blank" rel="noopener" class="hl-float-line">
  <span class="hl-float-line-icon">ğŸ’¬</span>
  <span class="hl-float-line-text">LINE è«®è©¢</span>
</a>
<!-- ========== End æµ®å‹• LINE æŒ‰éˆ• ========== -->
</body>
</html>
