<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>æ•¸å­—èƒ½é‡åˆ†æå™¨ï½œé¦¥éˆä¹‹é‘° é‡å­éˆæ•¸â„¢</title>
<meta name="description" content="è¼¸å…¥ä½ çš„æ‰‹æ©Ÿè™Ÿç¢¼èˆ‡ç”Ÿæ—¥ï¼Œè§£é–ä½ çš„æ•¸å­—ç£å ´å¯†ç¢¼ã€‚åŸºæ–¼å…«æ˜Ÿèƒ½é‡ç†è«–ï¼Œç‚ºä½ æ­ç¤ºè²¡å¯Œã€å¥åº·ã€äº‹æ¥­çš„èƒ½é‡é »ç‡ã€‚">
<link rel="icon" href="favicon.ico" />
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
  :root{
    --milk:#f9f5f0; --cocoa:#6b4f3e;
    --rose:#cda86e; --rose-dark:#a88257;
    --ink:#2a2a2a; --line:rgba(0,0,0,.10);
    --green:#4caf50; --red:#f44336;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    background:url('https://github.com/HourLight/11/raw/main/background.jpg') center/cover fixed no-repeat;
    font-family:"Noto Sans TC","PingFang TC","Arial",sans-serif;
    color:var(--ink);
    padding:20px;
    min-height:100vh;
  }
  .container{
    max-width:900px;
    margin:0 auto;
    background:rgba(255,255,255,.95);
    backdrop-filter:blur(8px);
    border-radius:20px;
    padding:40px 32px;
    box-shadow:0 12px 40px rgba(0,0,0,.15);
  }
  
  /* æ¨™é¡Œå€ */
  h1{
    text-align:center;
    color:var(--cocoa);
    font-size:clamp(1.8rem,4vw,2.4rem);
    margin-bottom:8px;
    font-weight:900;
  }
  .subtitle{
    text-align:center;
    color:#888;
    font-size:0.95rem;
    margin-bottom:32px;
    line-height:1.6;
  }
  
  /* è¼¸å…¥å€ */
  .input-section{
    background:rgba(249,245,240,.6);
    border-radius:16px;
    padding:28px;
    margin-bottom:24px;
  }
  .input-group{
    margin-bottom:20px;
  }
  .input-group:last-child{
    margin-bottom:0;
  }
  .input-label{
    font-size:0.95rem;
    font-weight:700;
    color:var(--cocoa);
    margin-bottom:10px;
    display:block;
  }
  .input-label .required{
    color:var(--red);
    margin-left:4px;
  }
  .input-field{
    width:100%;
    padding:14px 16px;
    border:2px solid var(--line);
    border-radius:12px;
    font-size:1rem;
    font-family:inherit;
    transition:.25s;
    background:#fff;
  }
  .input-field:focus{
    outline:none;
    border-color:var(--rose);
    box-shadow:0 0 0 3px rgba(205,168,110,.15);
  }
  .input-hint{
    font-size:0.85rem;
    color:#999;
    margin-top:6px;
  }
  
  /* æŒ‰éˆ• */
  .analyze-btn{
    display:block;
    width:100%;
    background:linear-gradient(135deg,var(--rose),var(--rose-dark));
    color:#fff;
    border:none;
    padding:16px 24px;
    border-radius:14px;
    font-size:1.1rem;
    font-weight:900;
    cursor:pointer;
    box-shadow:0 6px 18px rgba(205,168,110,.4);
    transition:.25s;
    margin-top:24px;
  }
  .analyze-btn:hover{
    transform:translateY(-3px);
    box-shadow:0 8px 24px rgba(205,168,110,.5);
  }
  .analyze-btn:disabled{
    opacity:0.6;
    cursor:not-allowed;
    transform:none;
  }
  
  /* çµæœå€ */
  .result-section{
    display:none;
    margin-top:32px;
  }
  .result-section.show{
    display:block;
    animation:fadeIn 0.5s;
  }
  @keyframes fadeIn{
    from{opacity:0;transform:translateY(20px)}
    to{opacity:1;transform:translateY(0)}
  }
  
  /* ç¸½åˆ†å¡ç‰‡ */
  .score-card{
    background:linear-gradient(135deg,rgba(205,168,110,.2),rgba(168,130,87,.15));
    border:3px solid var(--rose);
    border-radius:16px;
    padding:32px;
    margin-bottom:28px;
    text-align:center;
  }
  .score-title{
    font-size:1rem;
    color:#888;
    margin-bottom:12px;
    font-weight:600;
  }
  .score-value{
    font-size:4rem;
    font-weight:900;
    color:var(--rose);
    margin-bottom:8px;
    line-height:1;
  }
  .score-desc{
    font-size:1.1rem;
    color:var(--cocoa);
    font-weight:700;
  }
  
  /* å…«æ˜Ÿåˆ†æ */
  .stars-section{
    background:#fff;
    border-radius:16px;
    padding:24px;
    margin-bottom:24px;
    border:2px solid var(--line);
  }
  .section-title{
    font-size:1.3rem;
    font-weight:900;
    color:var(--cocoa);
    margin-bottom:20px;
    padding-bottom:12px;
    border-bottom:2px solid var(--line);
  }
  .star-item{
    display:flex;
    align-items:center;
    padding:12px;
    margin-bottom:10px;
    border-radius:10px;
    background:rgba(249,245,240,.4);
  }
  .star-item.lucky{
    background:rgba(76,175,80,.1);
    border-left:4px solid var(--green);
  }
  .star-item.unlucky{
    background:rgba(244,67,54,.1);
    border-left:4px solid var(--red);
  }
  .star-name{
    font-weight:700;
    color:var(--cocoa);
    min-width:80px;
  }
  .star-combo{
    font-family:monospace;
    background:rgba(0,0,0,.05);
    padding:4px 8px;
    border-radius:6px;
    margin:0 12px;
    font-size:0.9rem;
  }
  .star-desc{
    flex:1;
    font-size:0.9rem;
    color:#666;
  }
  
  /* èƒ½é‡é›·é”åœ– */
  .chart-container{
    background:#fff;
    border-radius:16px;
    padding:24px;
    margin-bottom:24px;
    border:2px solid var(--line);
  }
  .chart-wrapper{
    max-width:500px;
    margin:0 auto;
    padding:20px 0;
  }
  
  /* å»ºè­°å€ */
  .recommendations{
    background:linear-gradient(135deg,rgba(124,77,255,.08),rgba(255,107,53,.08));
    border-radius:16px;
    padding:24px;
    margin-bottom:24px;
  }
  .rec-item{
    background:#fff;
    border-radius:12px;
    padding:16px 20px;
    margin-bottom:12px;
    border-left:4px solid var(--rose);
  }
  .rec-item:last-child{
    margin-bottom:0;
  }
  .rec-title{
    font-weight:700;
    color:var(--cocoa);
    margin-bottom:6px;
  }
  .rec-content{
    color:#666;
    line-height:1.6;
  }
  
  /* CTAå€ */
  .cta-section{
    background:linear-gradient(135deg,var(--cocoa),#8b6f5e);
    color:#fff;
    border-radius:16px;
    padding:32px;
    text-align:center;
  }
  .cta-title{
    font-size:1.5rem;
    font-weight:900;
    margin-bottom:12px;
  }
  .cta-desc{
    font-size:1rem;
    margin-bottom:24px;
    opacity:0.9;
    line-height:1.6;
  }
  .cta-btn{
    display:inline-block;
    background:#fff;
    color:var(--cocoa);
    padding:14px 32px;
    border-radius:12px;
    font-weight:900;
    text-decoration:none;
    transition:.25s;
    box-shadow:0 4px 12px rgba(0,0,0,.2);
  }
  .cta-btn:hover{
    transform:translateY(-2px);
    box-shadow:0 6px 16px rgba(0,0,0,.3);
  }
  
  /* è¿”å›æŒ‰éˆ• */
  .back-link{
    display:inline-block;
    margin-top:24px;
    color:var(--cocoa);
    text-decoration:none;
    font-weight:700;
    transition:.25s;
  }
  .back-link:hover{
    color:var(--rose);
  }
  
  @media(max-width:600px){
    .container{padding:28px 20px}
    .input-section{padding:20px}
    .score-value{font-size:3rem}
  }
</style>
</head>
<body>

<div class="container">
  <h1>ğŸ”® æ•¸å­—èƒ½é‡åˆ†æå™¨</h1>
  <p class="subtitle">
    åŸºæ–¼å…«æ˜Ÿç£å ´ç†è«–ï¼Œç‚ºä½ æ­ç¤ºéš±è—åœ¨æ•¸å­—èƒŒå¾Œçš„èƒ½é‡å¯†ç¢¼<br>
    é€™ä¸æ˜¯ç®—å‘½ï¼Œè€Œæ˜¯ä¸€å¥—ç§‘å­¸åŒ–çš„èƒ½é‡èª¿é »å·¥å…·
  </p>
  
  <!-- è¼¸å…¥è¡¨å–® -->
  <div class="input-section">
    <div class="input-group">
      <label class="input-label">
        æ‰‹æ©Ÿè™Ÿç¢¼<span class="required">*</span>
      </label>
      <input type="tel" id="phoneInput" class="input-field" placeholder="è«‹è¼¸å…¥11ä½æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆä¾‹å¦‚ï¼š13912345678ï¼‰" maxlength="11">
      <div class="input-hint">æ‰‹æ©Ÿè™Ÿç¢¼æ˜¯ä½ æœ€å¸¸ä½¿ç”¨çš„æ•¸å­—ç£å ´ï¼Œå½±éŸ¿è‘—ä½ çš„èƒ½é‡é »ç‡</div>
    </div>
    
    <div class="input-group">
      <label class="input-label">
        å‡ºç”Ÿæ—¥æœŸ<span class="required">*</span>
      </label>
      <input type="date" id="birthInput" class="input-field">
      <div class="input-hint">ç”Ÿæ—¥æ±ºå®šäº†ä½ çš„ç”Ÿå‘½éˆæ•¸ï¼Œæ˜¯ä½ èˆ‡ç”Ÿä¿±ä¾†çš„èƒ½é‡å°è¨˜</div>
    </div>
    
    <div class="input-group">
      <label class="input-label">
        å§“åï¼ˆé¸å¡«ï¼‰
      </label>
      <input type="text" id="nameInput" class="input-field" placeholder="è«‹è¼¸å…¥æ‚¨çš„å§“å">
      <div class="input-hint">æä¾›å§“åå¯ç²å¾—æ›´å€‹æ€§åŒ–çš„åˆ†æå ±å‘Š</div>
    </div>
    
    <button class="analyze-btn" onclick="analyzeEnergy()">
      âœ¨ é–‹å§‹åˆ†ææˆ‘çš„æ•¸å­—èƒ½é‡
    </button>
  </div>
  
  <!-- çµæœå€ -->
  <div id="resultSection" class="result-section">
    <!-- ç¸½åˆ† -->
    <div class="score-card">
      <div class="score-title">ä½ çš„ç¶œåˆèƒ½é‡æŒ‡æ•¸</div>
      <div class="score-value" id="totalScore">--</div>
      <div class="score-desc" id="scoreLevel">--</div>
    </div>
    
    <!-- å…«æ˜Ÿåˆ†æ -->
    <div class="stars-section">
      <h2 class="section-title">ğŸ“± æ‰‹æ©Ÿè™Ÿç¢¼å…«æ˜Ÿç£å ´åˆ†æ</h2>
      <div id="starsContainer"></div>
    </div>
    
    <!-- èƒ½é‡é›·é”åœ– -->
    <div class="chart-container">
      <h2 class="section-title">ğŸ“Š äº”ç¶­èƒ½é‡é›·é”åœ–</h2>
      <div class="chart-wrapper">
        <canvas id="energyChart"></canvas>
      </div>
    </div>
    
    <!-- ç”Ÿå‘½éˆæ•¸ -->
    <div class="stars-section">
      <h2 class="section-title">ğŸŒŸ ç”Ÿå‘½éˆæ•¸åˆ†æ</h2>
      <div id="lifePathContainer"></div>
    </div>
    
    <!-- èª¿é »å»ºè­° -->
    <div class="recommendations">
      <h2 class="section-title">ğŸ’¡ èƒ½é‡èª¿é »å»ºè­°</h2>
      <div id="recommendationsContainer"></div>
    </div>
    
    <!-- CTA -->
    <div class="cta-section">
      <div class="cta-title">æƒ³è¦æ›´æ·±å…¥çš„èƒ½é‡èª¿é »ï¼Ÿ</div>
      <div class="cta-desc">
        é ç´„ä¸€å°ä¸€æ·±åº¦è«®è©¢ï¼Œè®“å°ˆæ¥­èª¿é »å¸«ç‚ºä½ é‡èº«æ‰“é€ <br>
        å°ˆå±¬çš„èƒ½é‡æå‡æ–¹æ¡ˆï¼Œé–‹å•Ÿä½ çš„é‡å­é¡¯åŒ–ä¹‹æ—…
      </div>
      <a href="consulting.html" class="cta-btn">é ç´„æ·±åº¦è«®è©¢</a>
    </div>
  </div>
  
  <a href="index.html" class="back-link">â† è¿”å›é¦–é </a>
</div>

<script>
// ========== å…«æ˜Ÿç£å ´æ•¸æ“š ==========
const EIGHT_STARS = {
  // å‰æ˜Ÿ
  '14': { name: 'ç”Ÿæ°£', type: 'lucky', desc: 'è²´äººé‹å¼·ï¼Œæ™ºæ…§æ¨‚è§€' },
  '41': { name: 'ç”Ÿæ°£', type: 'lucky', desc: 'è²´äººé‹å¼·ï¼Œæ™ºæ…§æ¨‚è§€' },
  '67': { name: 'ç”Ÿæ°£', type: 'lucky', desc: 'è²´äººé‹å¼·ï¼Œæ™ºæ…§æ¨‚è§€' },
  '76': { name: 'ç”Ÿæ°£', type: 'lucky', desc: 'è²´äººé‹å¼·ï¼Œæ™ºæ…§æ¨‚è§€' },
  '93': { name: 'ç”Ÿæ°£', type: 'lucky', desc: 'è²´äººé‹å¼·ï¼Œæ™ºæ…§æ¨‚è§€' },
  '39': { name: 'ç”Ÿæ°£', type: 'lucky', desc: 'è²´äººé‹å¼·ï¼Œæ™ºæ…§æ¨‚è§€' },
  '82': { name: 'ç”Ÿæ°£', type: 'lucky', desc: 'è²´äººé‹å¼·ï¼Œæ™ºæ…§æ¨‚è§€' },
  '28': { name: 'ç”Ÿæ°£', type: 'lucky', desc: 'è²´äººé‹å¼·ï¼Œæ™ºæ…§æ¨‚è§€' },
  
  '13': { name: 'å¤©é†«', type: 'lucky', desc: 'è²¡é‹æ¥µä½³ï¼Œå¿ƒåœ°å–„è‰¯' },
  '31': { name: 'å¤©é†«', type: 'lucky', desc: 'è²¡é‹æ¥µä½³ï¼Œå¿ƒåœ°å–„è‰¯' },
  '68': { name: 'å¤©é†«', type: 'lucky', desc: 'è²¡é‹æ¥µä½³ï¼Œå¿ƒåœ°å–„è‰¯' },
  '86': { name: 'å¤©é†«', type: 'lucky', desc: 'è²¡é‹æ¥µä½³ï¼Œå¿ƒåœ°å–„è‰¯' },
  '94': { name: 'å¤©é†«', type: 'lucky', desc: 'è²¡é‹æ¥µä½³ï¼Œå¿ƒåœ°å–„è‰¯' },
  '49': { name: 'å¤©é†«', type: 'lucky', desc: 'è²¡é‹æ¥µä½³ï¼Œå¿ƒåœ°å–„è‰¯' },
  '72': { name: 'å¤©é†«', type: 'lucky', desc: 'è²¡é‹æ¥µä½³ï¼Œå¿ƒåœ°å–„è‰¯' },
  '27': { name: 'å¤©é†«', type: 'lucky', desc: 'è²¡é‹æ¥µä½³ï¼Œå¿ƒåœ°å–„è‰¯' },
  
  '19': { name: 'å»¶å¹´', type: 'lucky', desc: 'äº‹æ¥­æœ‰æˆï¼Œé ˜å°åŠ›å¼·' },
  '91': { name: 'å»¶å¹´', type: 'lucky', desc: 'äº‹æ¥­æœ‰æˆï¼Œé ˜å°åŠ›å¼·' },
  '87': { name: 'å»¶å¹´', type: 'lucky', desc: 'äº‹æ¥­æœ‰æˆï¼Œé ˜å°åŠ›å¼·' },
  '78': { name: 'å»¶å¹´', type: 'lucky', desc: 'äº‹æ¥­æœ‰æˆï¼Œé ˜å°åŠ›å¼·' },
  '43': { name: 'å»¶å¹´', type: 'lucky', desc: 'äº‹æ¥­æœ‰æˆï¼Œé ˜å°åŠ›å¼·' },
  '34': { name: 'å»¶å¹´', type: 'lucky', desc: 'äº‹æ¥­æœ‰æˆï¼Œé ˜å°åŠ›å¼·' },
  '26': { name: 'å»¶å¹´', type: 'lucky', desc: 'äº‹æ¥­æœ‰æˆï¼Œé ˜å°åŠ›å¼·' },
  '62': { name: 'å»¶å¹´', type: 'lucky', desc: 'äº‹æ¥­æœ‰æˆï¼Œé ˜å°åŠ›å¼·' },
  
  '11': { name: 'ä¼ä½', type: 'lucky', desc: 'è€å¿ƒç­‰å¾…ï¼Œæ½›åŠ›ç„¡é™' },
  '22': { name: 'ä¼ä½', type: 'lucky', desc: 'è€å¿ƒç­‰å¾…ï¼Œæ½›åŠ›ç„¡é™' },
  '33': { name: 'ä¼ä½', type: 'lucky', desc: 'è€å¿ƒç­‰å¾…ï¼Œæ½›åŠ›ç„¡é™' },
  '44': { name: 'ä¼ä½', type: 'lucky', desc: 'è€å¿ƒç­‰å¾…ï¼Œæ½›åŠ›ç„¡é™' },
  '66': { name: 'ä¼ä½', type: 'lucky', desc: 'è€å¿ƒç­‰å¾…ï¼Œæ½›åŠ›ç„¡é™' },
  '77': { name: 'ä¼ä½', type: 'lucky', desc: 'è€å¿ƒç­‰å¾…ï¼Œæ½›åŠ›ç„¡é™' },
  '88': { name: 'ä¼ä½', type: 'lucky', desc: 'è€å¿ƒç­‰å¾…ï¼Œæ½›åŠ›ç„¡é™' },
  '99': { name: 'ä¼ä½', type: 'lucky', desc: 'è€å¿ƒç­‰å¾…ï¼Œæ½›åŠ›ç„¡é™' },
  
  // å‡¶æ˜Ÿ
  '12': { name: 'çµ•å‘½', type: 'unlucky', desc: 'æŠ•è³‡æ³¢å‹•å¤§ï¼Œéœ€è¬¹æ…' },
  '21': { name: 'çµ•å‘½', type: 'unlucky', desc: 'æŠ•è³‡æ³¢å‹•å¤§ï¼Œéœ€è¬¹æ…' },
  '69': { name: 'çµ•å‘½', type: 'unlucky', desc: 'æŠ•è³‡æ³¢å‹•å¤§ï¼Œéœ€è¬¹æ…' },
  '96': { name: 'çµ•å‘½', type: 'unlucky', desc: 'æŠ•è³‡æ³¢å‹•å¤§ï¼Œéœ€è¬¹æ…' },
  '84': { name: 'çµ•å‘½', type: 'unlucky', desc: 'æŠ•è³‡æ³¢å‹•å¤§ï¼Œéœ€è¬¹æ…' },
  '48': { name: 'çµ•å‘½', type: 'unlucky', desc: 'æŠ•è³‡æ³¢å‹•å¤§ï¼Œéœ€è¬¹æ…' },
  '73': { name: 'çµ•å‘½', type: 'unlucky', desc: 'æŠ•è³‡æ³¢å‹•å¤§ï¼Œéœ€è¬¹æ…' },
  '37': { name: 'çµ•å‘½', type: 'unlucky', desc: 'æŠ•è³‡æ³¢å‹•å¤§ï¼Œéœ€è¬¹æ…' },
  
  '18': { name: 'äº”é¬¼', type: 'unlucky', desc: 'æ‰è¯æ´‹æº¢ï¼Œä½†éœ€ç©©å®š' },
  '81': { name: 'äº”é¬¼', type: 'unlucky', desc: 'æ‰è¯æ´‹æº¢ï¼Œä½†éœ€ç©©å®š' },
  '97': { name: 'äº”é¬¼', type: 'unlucky', desc: 'æ‰è¯æ´‹æº¢ï¼Œä½†éœ€ç©©å®š' },
  '79': { name: 'äº”é¬¼', type: 'unlucky', desc: 'æ‰è¯æ´‹æº¢ï¼Œä½†éœ€ç©©å®š' },
  '36': { name: 'äº”é¬¼', type: 'unlucky', desc: 'æ‰è¯æ´‹æº¢ï¼Œä½†éœ€ç©©å®š' },
  '63': { name: 'äº”é¬¼', type: 'unlucky', desc: 'æ‰è¯æ´‹æº¢ï¼Œä½†éœ€ç©©å®š' },
  '42': { name: 'äº”é¬¼', type: 'unlucky', desc: 'æ‰è¯æ´‹æº¢ï¼Œä½†éœ€ç©©å®š' },
  '24': { name: 'äº”é¬¼', type: 'unlucky', desc: 'æ‰è¯æ´‹æº¢ï¼Œä½†éœ€ç©©å®š' },
  
  '17': { name: 'ç¦å®³', type: 'unlucky', desc: 'å£æ‰ä½³ï¼Œä½†æ˜“å£èˆŒ' },
  '71': { name: 'ç¦å®³', type: 'unlucky', desc: 'å£æ‰ä½³ï¼Œä½†æ˜“å£èˆŒ' },
  '89': { name: 'ç¦å®³', type: 'unlucky', desc: 'å£æ‰ä½³ï¼Œä½†æ˜“å£èˆŒ' },
  '98': { name: 'ç¦å®³', type: 'unlucky', desc: 'å£æ‰ä½³ï¼Œä½†æ˜“å£èˆŒ' },
  '64': { name: 'ç¦å®³', type: 'unlucky', desc: 'å£æ‰ä½³ï¼Œä½†æ˜“å£èˆŒ' },
  '46': { name: 'ç¦å®³', type: 'unlucky', desc: 'å£æ‰ä½³ï¼Œä½†æ˜“å£èˆŒ' },
  '32': { name: 'ç¦å®³', type: 'unlucky', desc: 'å£æ‰ä½³ï¼Œä½†æ˜“å£èˆŒ' },
  '23': { name: 'ç¦å®³', type: 'unlucky', desc: 'å£æ‰ä½³ï¼Œä½†æ˜“å£èˆŒ' },
  
  '16': { name: 'å…­ç…', type: 'unlucky', desc: 'äººç·£å¥½ï¼Œä½†æ˜“å„ªæŸ”' },
  '61': { name: 'å…­ç…', type: 'unlucky', desc: 'äººç·£å¥½ï¼Œä½†æ˜“å„ªæŸ”' },
  '74': { name: 'å…­ç…', type: 'unlucky', desc: 'äººç·£å¥½ï¼Œä½†æ˜“å„ªæŸ”' },
  '47': { name: 'å…­ç…', type: 'unlucky', desc: 'äººç·£å¥½ï¼Œä½†æ˜“å„ªæŸ”' },
  '38': { name: 'å…­ç…', type: 'unlucky', desc: 'äººç·£å¥½ï¼Œä½†æ˜“å„ªæŸ”' },
  '83': { name: 'å…­ç…', type: 'unlucky', desc: 'äººç·£å¥½ï¼Œä½†æ˜“å„ªæŸ”' },
  '92': { name: 'å…­ç…', type: 'unlucky', desc: 'äººç·£å¥½ï¼Œä½†æ˜“å„ªæŸ”' },
  '29': { name: 'å…­ç…', type: 'unlucky', desc: 'äººç·£å¥½ï¼Œä½†æ˜“å„ªæŸ”' },
};

// ç”Ÿå‘½éˆæ•¸ç‰¹è³ª
const LIFE_PATH_TRAITS = {
  1: { title: 'é ˜å°è€…', desc: 'ç¨ç«‹è‡ªä¸»ï¼Œé–‹å‰µç²¾ç¥ï¼Œå¤©ç”Ÿçš„é ˜å°è€…' },
  2: { title: 'å”èª¿è€…', desc: 'å–„æ–¼æºé€šï¼Œé‡è¦–å’Œè«§ï¼Œå„ªç§€çš„èª¿è§£è€…' },
  3: { title: 'å‰µé€ è€…', desc: 'å……æ»¿å‰µæ„ï¼Œè¡¨é”åŠ›å¼·ï¼Œè—è¡“å¤©è³¦' },
  4: { title: 'å»ºè¨­è€…', desc: 'å‹™å¯¦ç©©é‡ï¼Œçµ„ç¹”åŠ›å¼·ï¼Œå€¼å¾—ä¿¡è³´' },
  5: { title: 'å†’éšªå®¶', desc: 'ç†±æ„›è‡ªç”±ï¼Œå‹‡æ–¼å˜—è©¦ï¼Œé©æ‡‰åŠ›å¼·' },
  6: { title: 'ç…§é¡§è€…', desc: 'å¯Œæœ‰æ„›å¿ƒï¼Œè²¬ä»»æ„Ÿé‡ï¼Œå®¶åº­ç‚ºé‡' },
  7: { title: 'æ™ºè€…', desc: 'è¿½æ±‚çœŸç†ï¼Œæ·±åº¦æ€è€ƒï¼Œéˆæ€§è¦ºé†’' },
  8: { title: 'å¯¦è¸å®¶', desc: 'ç›®æ¨™æ˜ç¢ºï¼ŒåŸ·è¡ŒåŠ›å¼·ï¼Œè²¡å¯Œç£å ´' },
  9: { title: 'å®Œæˆè€…', desc: 'èƒ¸æ‡·å¯¬å»£ï¼Œç„¡ç§å¥‰ç»ï¼Œæ™ºæ…§åœ“æ»¿' },
};

// ========== æ ¸å¿ƒåˆ†æå‡½æ•¸ ==========
function analyzeEnergy() {
  const phone = document.getElementById('phoneInput').value.trim();
  const birth = document.getElementById('birthInput').value;
  const name = document.getElementById('nameInput').value.trim();
  
  // é©—è­‰
  if (!phone || phone.length !== 11 || !/^\d+$/.test(phone)) {
    alert('è«‹è¼¸å…¥æ­£ç¢ºçš„11ä½æ‰‹æ©Ÿè™Ÿç¢¼');
    return;
  }
  if (!birth) {
    alert('è«‹é¸æ“‡æ‚¨çš„å‡ºç”Ÿæ—¥æœŸ');
    return;
  }
  
  // åˆ†æå…«æ˜Ÿç£å ´
  const starsAnalysis = analyzeEightStars(phone);
  
  // è¨ˆç®—ç”Ÿå‘½éˆæ•¸
  const lifePathNumber = calculateLifePath(birth);
  
  // è¨ˆç®—èƒ½é‡åˆ†æ•¸
  const energyScores = calculateEnergyScores(starsAnalysis, lifePathNumber);
  
  // ç”Ÿæˆå»ºè­°
  const recommendations = generateRecommendations(starsAnalysis, energyScores);
  
  // é¡¯ç¤ºçµæœ
  displayResults(starsAnalysis, lifePathNumber, energyScores, recommendations, name);
}

function analyzeEightStars(phone) {
  const stars = [];
  const starCounts = { lucky: 0, unlucky: 0 };
  
  for (let i = 0; i < phone.length - 1; i++) {
    const combo = phone[i] + phone[i + 1];
    if (EIGHT_STARS[combo]) {
      const star = EIGHT_STARS[combo];
      stars.push({ combo, ...star, position: i + 1 });
      starCounts[star.type]++;
    }
  }
  
  return { stars, starCounts };
}

function calculateLifePath(birthDate) {
  const digits = birthDate.replace(/-/g, '').split('').map(Number);
  let sum = digits.reduce((a, b) => a + b, 0);
  
  while (sum > 9 && sum !== 11 && sum !== 22 && sum !== 33) {
    sum = sum.toString().split('').map(Number).reduce((a, b) => a + b, 0);
  }
  
  return sum;
}

function calculateEnergyScores(starsAnalysis, lifePathNumber) {
  const { starCounts } = starsAnalysis;
  const total = starCounts.lucky + starCounts.unlucky;
  const luckyRatio = total > 0 ? starCounts.lucky / total : 0.5;
  
  return {
    wealth: Math.round(40 + luckyRatio * 40 + Math.random() * 20),
    health: Math.round(45 + luckyRatio * 35 + Math.random() * 20),
    career: Math.round(40 + luckyRatio * 40 + Math.random() * 20),
    relationship: Math.round(45 + luckyRatio * 35 + Math.random() * 20),
    overall: Math.round(50 + luckyRatio * 30 + Math.random() * 20),
  };
}

function generateRecommendations(starsAnalysis, energyScores) {
  const recs = [];
  const { starCounts } = starsAnalysis;
  
  if (starCounts.unlucky > starCounts.lucky) {
    recs.push({
      title: 'å»ºè­°æ›´æ›æ‰‹æ©Ÿè™Ÿç¢¼',
      content: 'æ‚¨çš„æ‰‹æ©Ÿè™Ÿç¢¼ä¸­å‡¶æ˜Ÿæ•¸é‡è¼ƒå¤šï¼Œå»ºè­°é¸æ“‡å«æœ‰æ›´å¤šã€Œå¤©é†«ã€ã€ã€Œç”Ÿæ°£ã€ã€ã€Œå»¶å¹´ã€çµ„åˆçš„è™Ÿç¢¼ï¼Œä»¥æå‡æ•´é«”èƒ½é‡å ´ã€‚'
    });
  }
  
  if (energyScores.wealth < 60) {
    recs.push({
      title: 'è²¡å¯Œèƒ½é‡æå‡',
      content: 'å»ºè­°åœ¨è™Ÿç¢¼ä¸­å¢åŠ ã€Œå¤©é†«ã€ï¼ˆ13ã€68ã€94ã€72ï¼‰çµ„åˆï¼Œå¯æå‡è²¡é‹å’Œæ™ºæ…§è²¡å¯Œçš„èƒ½é‡é »ç‡ã€‚'
    });
  }
  
  if (energyScores.health < 60) {
    recs.push({
      title: 'å¥åº·èƒ½é‡èª¿é »',
      content: 'å»ºè­°å¤šä½¿ç”¨ã€Œå¤©é†«ã€å’Œã€Œå»¶å¹´ã€çš„çµ„åˆï¼Œé€™å…©å€‹ç£å ´å°å¥åº·å’Œé•·å£½æœ‰æ­£é¢çš„èƒ½é‡æ”¯æŒã€‚'
    });
  }
  
  recs.push({
    title: 'æŒçºŒèƒ½é‡èª¿é »',
    content: 'æ•¸å­—èƒ½é‡æ˜¯å‹•æ…‹çš„ï¼Œå»ºè­°æ¯3-6å€‹æœˆé‡æ–°æª¢è¦–æ‚¨çš„æ•¸å­—ç£å ´ï¼Œä¸¦æ ¹æ“šäººç”Ÿéšæ®µèª¿æ•´ä½¿ç”¨çš„æ•¸å­—çµ„åˆã€‚'
  });
  
  return recs;
}

function displayResults(starsAnalysis, lifePathNumber, energyScores, recommendations, name) {
  // é¡¯ç¤ºç¸½åˆ†
  document.getElementById('totalScore').textContent = energyScores.overall;
  let level = 'éœ€è¦èª¿é »';
  if (energyScores.overall >= 80) level = 'èƒ½é‡å……æ²›';
  else if (energyScores.overall >= 65) level = 'èƒ½é‡è‰¯å¥½';
  else if (energyScores.overall >= 50) level = 'èƒ½é‡å¹³è¡¡';
  document.getElementById('scoreLevel').textContent = level;
  
  // é¡¯ç¤ºå…«æ˜Ÿåˆ†æ
  const starsContainer = document.getElementById('starsContainer');
  starsContainer.innerHTML = '';
  
  if (starsAnalysis.stars.length === 0) {
    starsContainer.innerHTML = '<p style="color:#999;text-align:center">æœªæª¢æ¸¬åˆ°æ¨™æº–å…«æ˜Ÿçµ„åˆ</p>';
  } else {
    starsAnalysis.stars.forEach(star => {
      const div = document.createElement('div');
      div.className = `star-item ${star.type}`;
      div.innerHTML = `
        <span class="star-name">${star.name}</span>
        <span class="star-combo">${star.combo}</span>
        <span class="star-desc">${star.desc}</span>
      `;
      starsContainer.appendChild(div);
    });
  }
  
  // é¡¯ç¤ºç”Ÿå‘½éˆæ•¸
  const lifePathContainer = document.getElementById('lifePathContainer');
  const trait = LIFE_PATH_TRAITS[lifePathNumber] || { title: 'ç‰¹æ®Šæ•¸å­—', desc: 'æ‚¨æ“æœ‰ç¨ç‰¹çš„ç”Ÿå‘½èƒ½é‡' };
  lifePathContainer.innerHTML = `
    <div style="text-align:center;padding:20px">
      <div style="font-size:3rem;font-weight:900;color:var(--rose);margin-bottom:12px">${lifePathNumber}</div>
      <div style="font-size:1.2rem;font-weight:700;color:var(--cocoa);margin-bottom:8px">${trait.title}</div>
      <div style="color:#666;line-height:1.6">${trait.desc}</div>
    </div>
  `;
  
  // é¡¯ç¤ºå»ºè­°
  const recsContainer = document.getElementById('recommendationsContainer');
  recsContainer.innerHTML = '';
  recommendations.forEach(rec => {
    const div = document.createElement('div');
    div.className = 'rec-item';
    div.innerHTML = `
      <div class="rec-title">${rec.title}</div>
      <div class="rec-content">${rec.content}</div>
    `;
    recsContainer.appendChild(div);
  });
  
  // ç¹ªè£½é›·é”åœ–
  drawEnergyChart(energyScores);
  
  // é¡¯ç¤ºçµæœå€
  document.getElementById('resultSection').classList.add('show');
  document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function drawEnergyChart(scores) {
  const ctx = document.getElementById('energyChart').getContext('2d');
  
  // å¦‚æœå·²æœ‰åœ–è¡¨ï¼Œå…ˆéŠ·æ¯€
  if (window.energyChartInstance) {
    window.energyChartInstance.destroy();
  }
  
  window.energyChartInstance = new Chart(ctx, {
    type: 'radar',
    data: {
      labels: ['è²¡å¯Œ', 'å¥åº·', 'äº‹æ¥­', 'äººéš›', 'æ•´é«”'],
      datasets: [{
        label: 'èƒ½é‡æŒ‡æ•¸',
        data: [scores.wealth, scores.health, scores.career, scores.relationship, scores.overall],
        backgroundColor: 'rgba(205, 168, 110, 0.2)',
        borderColor: 'rgba(205, 168, 110, 1)',
        borderWidth: 2,
        pointBackgroundColor: 'rgba(205, 168, 110, 1)',
        pointBorderColor: '#fff',
        pointHoverBackgroundColor: '#fff',
        pointHoverBorderColor: 'rgba(205, 168, 110, 1)'
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      scales: {
        r: {
          beginAtZero: true,
          max: 100,
          ticks: {
            stepSize: 20,
            font: { size: 12 }
          },
          pointLabels: {
            font: { size: 14, weight: 'bold' }
          }
        }
      },
      plugins: {
        legend: {
          display: false
        }
      }
    }
  });
}
</script>

</body>
</html>
